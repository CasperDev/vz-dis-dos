/***********************************************************
 * 
 *  Laser 210/VZ210 ROM 1+2
 *  -----------------------
 *  $0000 - $ffff
 *
 *  Disassembled by z88dk-dis
 *  Verified by compare binary content with output file
 *  generated by Rasm assembler
 *
 *  Various Sources
 ***********************************************************/

;************************************************************
;RAM COMMUNICATION ADRESSSES
; by David Mitchel 1987, R. Quinn 1988

; 7800-7814 : RST jump Vectors
;-----------------|-addr----|-call from---|-initial value--|
RCA.AssertChar   equ     $7800   ; RTS08         jp $1c96
RCA.NextChar   equ     $7803   ; RTS10         jp $1d78    (DOS: 4293)
RCA.uiCmpHLDE   equ     $7806   ; RTS18         jp $1c90
RCA.TestNTF   equ     $7809   ; RST20         jp $25d9
RCA.BreakKeyTest   equ     $780c   ; RST28         set to: RET
RCA.Debug   equ     $780f   ; RST30         set to: RET
RCA.DOSINTHandler   equ     $7812   ; RST38         set to: EI,RET

; 7815-781c : Keyboard
;---------------------------------------------------------------
DCB.KeysBlock       equ $7815   ; (structure)
DCB.KeysCaps        equ $7815   ; (bye) Capabilities Flags ( 1 - read)
DCB.KeysDrvPtr     equ $7816   ; (word) - 2ef4
KEYS_INVERSE_SCREEN     equ $7818   ; (byte)
KEYS_INVERSE_TYPING     equ $7819   ; (byte)
KEYS_UNKNOWN            equ $781a   ; byte
KEYS_BUFFER_ADDRESS     equ $781b   ; word

; 781d-7824 : Video
;----------------------------------------------------------------
VIDEO_DEVICE_TYPE       equ $781d   ; byte Device type 0 
VIDEO_DRIVER_ADDRESS    equ $781e   ; word
SCR.CursorPtr        equ $7820   ; word (range 7000 to 71ff)
VIDEO_UNKNOWN           equ $7822   ; byte
TAPE_CRC      equ $7823   ; word 

; 7825-782c : Printer
;----------------------------------------------------------------
PRINTER_DEVICE_TYPE     equ $7825   ; byte Device type 6 ???
PRINTER_DRIVER_ADDRESS  equ $7826   ; word 058d
PRINTER_LINES_PER_PAGE  equ $7828   ; byte
PRINTER_LINES_PRINTED   equ $7829   ; byte
PRINTER_UNKNOWN         equ $782a   ; byte
PRINTER_BUFFER_ADDRESS  equ $782b   ; word

;------------------------------------------
TRS80_DOS_AREA      equ     $782d   ; thru $7832
; ...
PRINTER_ERROR_VECTOR    equ $7833   ; (code) ld a,0; ret 

;---------------------------------------------
; Keyboard work area
KEY1         equ     $7836   ; word
; $7838  inverse message
; $7839  disable up, down keys: low res speed up
; $783a  ?
; $783b  copy of O/P latch
SCR.CursorChar      equ     $783c  ;(byte) character at cursor position
; $783d  video control word
; $783e-$787c  ?
; $787d  interrupt (jump? - 3 bytes)
; $7880-$788d  division support routine
; $788e  USR pointer (word)
; $7890  rnd number seed (3 bytes)
; $7893  INP (XX) (3 bytes)
; $7896  OUT (XX) (3 bytes)
; $7899  LAST KEY PRESSED
; $789a  error code
; $789b  printer position
; $789c  output device code
; $789d  size of video line
; $789e  high or low res
; $789f  ?

; 78A0-78xx : Basic
BASIC_STACK_ADDRESS     equ     $78a0       ; (word)
BASIC_LINE_NUMBER       equ     $78a2       ; (word)
BAS.PrgStartPtr     equ     $78a4       ; (word)
BASIC_CURSOR_POS_IN_LINE    equ     $78a6       ; (byte)

; 78a7-8    keyboard buffer address
CASS_INPUT_FLAG         equ     $78a9       ;(byte) 0 if cassete input else non zero

; Funkcja BASIC RANDOM zapisuje tu aktualna wartość rejestru odświeżania 
; pamięci RAM (R) - wartość przypadkowa zależna od czasu jaki upłynął od
; właczenia komputera.
BASIC_RANDOM_SEED       equ     $78ab       ;(byte)
; 78aa-d    random number seed
; 78ae      variable flag
; 78af      number flag (integer, string, single, double)
; 78b0      expression evaluator
MEM_TOP                 equ     $78b1       ; (word)
BAS.StrNextVar        equ     $78b3       ; (word) next location in literal string pool
BAS.StrVars       equ     $78b5       ; (word) start of literal string pool
; 78b7 ... 78e1   ?
BAS.CurStrVec         equ     $78d3       ; length of last defined string
BAS.PrgStart       equ     $78df       ;(word) pointer to start of program when run
BAS.AutoFlag         equ     $78e1       ; 0=no auto
; 78e2-3   current line number
; 78e4-5   auto increment
; 78e6-7   last byte executed in current line
; 78e8-9   backspaced stack address
; 78ea-b   error line number
BAS.EditLineNo      equ     $78ec       ;(word)
; 78ee-f   cursor position in line with error
; 78f0-1   address of statement to resume at
; 78f2     error message override
; 78f3-4   ?
BAS.LastLineNo  equ     $78f5       ;(word)  line number ended on
; 78f7-8   last statement byte scanned
BAS.PrgEnd       equ     $78f9       ; (word) end of program
BAS.ArrStartPtr  equ     $78fb       ; (word) start of DIM variables table
BAS.ArrEndPtr        equ     $78fd       ; (word) start of free memory
BAS_READ_DATA_PTR  equ  $78ff       ; (word) data pointer (READ statement)
BAS.VarTypesTable  equ  $7901       ; thru $791A - variable declaration table
TRACE_FLAG      equ     $791b       ; byte
; 791c math routines
MATH_REG_1_DOUBLE  equ     $791d       ; thru 7924 : LSB LSB LSB LSB LSB LSB MSB EXP
MATH_ACC_S  equ     $7921       ; thru 7924 :                 LSB LSB MSB EXP
MATH_ACC_I     equ     $7921       ; thru 7922 :         LSB MSB
; 7925-6  math routines
MATH_AACC_D  equ     $7927       ; thru 792e : LSB LSB LSB LSB LSB LSB MSB EXP
MATH_AACC_S  equ     $7927       ; thru 792e :                 LSB LSB MSB EXP
MATH_AACC_I     equ     $7927       ; thru 792c :         LSB MSB
; 792f  ???

SYS.ConvBuffer      equ     $7930       ; thru 7749 (32 bytes)
;794a-7951  double precision math

TRS_JUMPTABLE       equ     $7952
; 7952-79a5  TRS-80 DOS reserved words
; 79a6-79e4  TRS-80 DOS links

; 79e5-7  used by input
BASIC_LINE_BUFFER_START   equ     $79e8       ; thru 7a28 (41 bytes)
; 7a29-7a9c   ?
; 7a9d-7aac   tape name
; 7aad-7ad6   ?
; 7ad7-7ae6   tape load routine
; 7ae7-8       zero

BAS.PrgStart      equ     $7ae9

 ; Includes ------------------------------------------------
    ;include "l210_sys_procs.inc"
    ;include "l210_basic.inc"
 ; ---------------------------------------------------------



    org     $0000   
;************************************************************
; Reset/Włączenie komputera
SYS_RESET    
    di                           ; Wyłączenie przerwań na czas inicjalizacji ;[0000] f3
    xor     a                    ; Zerowanie Rejestru IO -                   ;[0001] af
    ld      ($6800),a                                                        ;[0002] 32 00 68
    jp      SYS_INIT_VARS             ; dalsza procedura inicjalizacji            ;[0005] c3 74 06

;COMPARE SYMBOL (EXAMINE STRING) - RST 08H
;A routine which is called using the RST 08H instruction can be used to compare 
;a character in a string pointed to by the HL register, with the value 
;in the location following the RST 08H instruction itself. If there is a match, 
;control is returned to the instruction 2 bytes after the RST 08H, 
;with the HL register incremented by 1 and the next character of the string 
;in the A register. 
;This allows repeated calls to check for an expected sequence of characters. 
;Note that if a match is not found, the RST 08H routine does not return from where it is
;called, but jumps instead to the BASIC interpreter's input phase after printing 
;the 'SYNTAX ERROR' message. 
;Here is how the routine is used to check that the string pointed to by HL register is 'A=B=C':
;       RST 08H         ;test for 'A'
;       DEFB 41H        ;hex value of A for comparison
;       RST 0BH         ;must have found, so try for '='
;       DEFB 3DH        ;hex value of '='
;       RST 08H         ;OK so far, try for 'B'
;       DEFB 42H
;       RST 08H         ;now look for second '='
;       DEFB 3DH    
;       RST 08H ;finally check for 'C'
;       DEFB 43H ... ;must have been OK, so proceed
SYS_COMPARE_SYMBOL_RST08
                    jp      $7800                           ;[0008] c3 00 78
                    
                    pop     hl                              ;[000b] e1
                    jp      (hl)                            ;[000c] e9
                    nop                                     ;[000d] 00
                    nop                                     ;[000e] 00
                    nop                                     ;[000f] 00
                    
;LOAD & CHECK NEXT CHARACTER IN STRING -- RST 10H
;The RST 10H instruction may be used to call a routine which loads the A register 
;with the next character of a string pointed to by the HL register, and clears 
;the CARRY flag if character is alphanumeric. 
;Blanks and control codes 09H and OBH are skipped automatically. 
;The HL register is incremented before each character is loaded, therefore 
;on the first call the HL register should be set to point to the address BEFORE 
;the location of the first string character to be tested. The string must be 
;terminated by a null byte.
;Here is an example of this routine in use. 
;Note that if it is used immediately after the RST 08H instruction as shown, 
;the HL register will automatically be incremented to point to the next character 
;in the string:
;       RST 08H     ;test for
;       DEFB 3DH
;       RST 10H     ;fetch & check next char
;       JR NC,VAR   ;will go to VAR if alpha
;       ....        ;continues if numeral
;*****************************************************************************
; RST 10
SYS_CHECK_NEXT_CHAR_RST10
    jp      $7803                                                       ;[0010] c3 03 78
                    
DEVICE_READ                    
    push    bc                  ; store BC                              ;[0013] c5
    ld      b,$01               ; B - command ???                       ;[0014] 06 01
    jr      _RJ_DEVICE_EXECUTE     ; relay jump to READ_DEVICE             ;[0016] 18 2e



;COMPARE DE & HL REGISTER PAIRS - RST 18H
;The instruction RST 18H may be used to call a routine which compares 
;the contents of the DE and HL register pairs. The routine uses the A 
;register only, but will only work for unsigned or positive numbers. 
;Upon returning, the result of the comparison will be in the status register:
;   HL < DE : carry set
;   HL > DE : no carry
;   HL <> DE : NZ
;   HL = DE : Z
;***************************************************************************
; RST 16
SYS_CMP_HL_DE_RST16       EQU     $0016
                    jp      $7806                           ;[0018] c3 06 78


                    push    bc                              ;[001b] c5
                    ld      b,$02                           ;[001c] 06 02
                    jr      _RJ_DEVICE_EXECUTE                 ;[001e] 18 26

;*****************************************************************************
; RST 20
                    jp      $7809                           ;[0020] c3 09 78
                    
                    push    bc                              ;[0023] c5
                    ld      b,$04                           ;[0024] 06 04
                    jr      _RJ_DEVICE_EXECUTE                 ;[0026] 18 1e
                    
                    jp      $780c                           ;[0028] c3 0c 78
                    
;------------------------------------------------------------------------
KEYS_READ_DEVICE                    
    ld      de,DCB.KeysBlock     ; de - current keys device type             ;[002b] 11 15 78
    jr      DEVICE_READ  ; read key from device                       ;[002e] 18 e3


;*************************************************************************
; RST 30 
;
                    jp      $780f                           ;[0030] c3 0f 78
                    ld      de,$781d                        ;[0033] 11 1d 78
                    jr      $001b                           ;[0036] 18 e3
                    jp      $2eb8                           ;[0038] c3 b8 2e
                    ld      de,$7825                        ;[003b] 11 25 78
                    jr      $001b                           ;[003e] 18 db
                    jp      $2efd                           ;[0040] c3 fd 2e
                    ret                                     ;[0043] c9

                    nop                                     ;[0044] 00
                    nop                                     ;[0045] 00
;***********************************
; READ DEVICE RELAY
; WE: de - device struct address
;     b - command, 01 read, 04 - ???
; BC stored on stack 
_RJ_DEVICE_EXECUTE
    jp      $03c2           ; skok do READ_DEVICE                           ;[0046] c3 c2 03

;;CONSTANT KEYBOARD SCAN
;Scans the Keyboard until a key is pressed. Will not return until a key is pressed. If CTRL-BREAK is pressed,
;it is returned like other keys.
;Returns with A containing character pressed.
;       CALL 0049H      ; scan keyboard
SYS_SCAN_KEYS_WAIT
    call    KEYS_READ_DEVICE        ; gey key                               ;[0049] cd 2b 00
    or      a                       ; any key pressed                       ;[004c] b7
    ret     nz                      ; yes - return with A = key pressed     ;[004d] c0
    jr      SYS_SCAN_KEYS_WAIT      ; no - get key                          ;[004e] 18 f9
                    
                    
                    
                    ld      hl,($7820)                      ;[0050] 2a 20 78
                    ld      a,(hl)                          ;[0053] 7e
                    ld      ($783c),a                       ;[0054] 32 3c 78
                    ret                                     ;[0057] c9

                    defb    $4c, $fe, $54, $20, $d6, $fd, $21, $f1 ;[0058] 4c fe 54 20 d6 fd 21 f1

;DELAY
;Load BC with the size of the delay in mS.
;       LD BC,delay
;       CALL 0060H      ; delay
SYS_DELAY_MS
                    dec     bc                              ;[0060] 0b
                    ld      a,b                             ;[0061] 78
                    or      c                               ;[0062] b1
                    jr      nz,SYS_DELAY_MS                 ;[0063] 20 fb
                    ret                                     ;[0065] c9


                    ld      sp,$0600                        ;[0066] 31 00 06
                    ld      a,($68ec)                       ;[0069] 3a ec 68
                    inc     a                               ;[006c] 3c
                    cp      $02                             ;[006d] fe 02
                    jp      nc,$0000                        ;[006f] d2 00 00
                    jp      $06cc                           ;[0072] c3 cc 06
                    ld      de,$7880                        ;[0075] 11 80 78
                    ld      hl,$18f7                        ;[0078] 21 f7 18
                    ld      bc,$0027                        ;[007b] 01 27 00
                    ldir                                    ;[007e] ed b0
                    ld      hl,$79e5                        ;[0080] 21 e5 79
                    ld      (hl),$3a                        ;[0083] 36 3a
                    inc     hl                              ;[0085] 23
                    ld      (hl),b                          ;[0086] 70
                    inc     hl                              ;[0087] 23
                    ld      (hl),$2c                        ;[0088] 36 2c
                    inc     hl                              ;[008a] 23
                    ld      ($78a7),hl                      ;[008b] 22 a7 78
                    ld      de,$012d                        ;[008e] 11 2d 01
                    ld      b,$1c                           ;[0091] 06 1c
                    ld      hl,$7952                        ;[0093] 21 52 79
                    ld      (hl),$c3                        ;[0096] 36 c3
                    inc     hl                              ;[0098] 23
                    ld      (hl),e                          ;[0099] 73
                    inc     hl                              ;[009a] 23
                    ld      (hl),d                          ;[009b] 72
                    inc     hl                              ;[009c] 23
                    djnz    $0096                           ;[009d] 10 f7
                    ld      b,$15                           ;[009f] 06 15
                    ld      (hl),$c9                        ;[00a1] 36 c9
                    inc     hl                              ;[00a3] 23
                    inc     hl                              ;[00a4] 23
                    inc     hl                              ;[00a5] 23
                    djnz    $00a1                           ;[00a6] 10 f9
                    ld      hl,$7ae8                        ;[00a8] 21 e8 7a
                    ld      (hl),b                          ;[00ab] 70
                    ld      sp,$79f8                        ;[00ac] 31 f8 79
                    call    $1b8f                           ;[00af] cd 8f 1b
                    call    BAS_PROC_CLS                           ;[00b2] cd c9 01
                    nop                                     ;[00b5] 00
                    nop                                     ;[00b6] 00
                    nop                                     ;[00b7] 00
                    nop                                     ;[00b8] 00
                    nop                                     ;[00b9] 00
                    nop                                     ;[00ba] 00
                    nop                                     ;[00bb] 00
                    nop                                     ;[00bc] 00
                    nop                                     ;[00bd] 00
                    jr      $00c4                           ;[00be] 18 04
                    rst     $10                             ;[00c0] d7
                    or      a                               ;[00c1] b7
                    jr      nz,$00d6                        ;[00c2] 20 12
                    ld      hl,$7b4c                        ;[00c4] 21 4c 7b
                    inc     hl                              ;[00c7] 23
                    ld      a,h                             ;[00c8] 7c
                    or      l                               ;[00c9] b5
                    jr      z,$00e7                         ;[00ca] 28 1b
                    ld      a,(hl)                          ;[00cc] 7e
                    ld      b,a                             ;[00cd] 47
                    cpl                                     ;[00ce] 2f
                    ld      (hl),a                          ;[00cf] 77
                    cp      (hl)                            ;[00d0] be
                    ld      (hl),b                          ;[00d1] 70
                    jr      z,$00c7                         ;[00d2] 28 f3
                    jr      $00e7                           ;[00d4] 18 11
                    call    $1e5a                           ;[00d6] cd 5a 1e
                    or      a                               ;[00d9] b7
                    jp      nz,$1997                        ;[00da] c2 97 19
                    ex      de,hl                           ;[00dd] eb
                    dec     hl                              ;[00de] 2b
                    ld      a,$8f                           ;[00df] 3e 8f
                    ld      b,(hl)                          ;[00e1] 46
                    ld      (hl),a                          ;[00e2] 77
                    cp      (hl)                            ;[00e3] be
                    ld      (hl),b                          ;[00e4] 70
                    jr      nz,$00b5                        ;[00e5] 20 ce
                    dec     hl                              ;[00e7] 2b
                    ld      de,$7c14                        ;[00e8] 11 14 7c
                    rst     $18                             ;[00eb] df
                    jp      c,$197a                         ;[00ec] da 7a 19
                    ld      de,$ffce                        ;[00ef] 11 ce ff
                    ld      ($78b1),hl                      ;[00f2] 22 b1 78
                    add     hl,de                           ;[00f5] 19
                    ld      ($78a0),hl                      ;[00f6] 22 a0 78
                    call    $1b4d                           ;[00f9] cd 4d 1b
                    call    $3484                           ;[00fc] cd 84 34
                    ld      hl,$010f                        ;[00ff] 21 0f 01
                    call    SYS_STR_TO_DEVICE              ;[0102] cd a7 28
                    im      1                               ;[0105] ed 56
                    jp      $068e                           ;[0107] c3 8e 06
                    nop                                     ;[010a] 00
                    ld      a,(hl)                          ;[010b] 7e
                    inc     hl                              ;[010c] 23
                    cp      $0d                             ;[010d] fe 0d
                    ld      d,(hl)                          ;[010f] 56
                    ld      c,c                             ;[0110] 49
                    ld      b,h                             ;[0111] 44
                    ld      b,l                             ;[0112] 45
                    ld      c,a                             ;[0113] 4f
                    jr      nz,$016a                        ;[0114] 20 54
                    ld      b,l                             ;[0116] 45
                    ld      b,e                             ;[0117] 43
                    ld      c,b                             ;[0118] 48
                    ld      c,(hl)                          ;[0119] 4e
                    ld      c,a                             ;[011a] 4f
                    ld      c,h                             ;[011b] 4c
                    ld      c,a                             ;[011c] 4f
                    ld      b,a                             ;[011d] 47
                    ld      e,c                             ;[011e] 59
                    dec     c                               ;[011f] 0d
                    ld      b,d                             ;[0120] 42
                    ld      b,c                             ;[0121] 41
                    ld      d,e                             ;[0122] 53
                    ld      c,c                             ;[0123] 49
                    ld      b,e                             ;[0124] 43
                    jr      nz,$017d                        ;[0125] 20 56
                    ld      ($302e),a                       ;[0127] 32 2e 30
                    dec     c                               ;[012a] 0d
                    dec     c                               ;[012b] 0d
                    nop                                     ;[012c] 00
                    ld      e,$2c                           ;[012d] 1e 2c
                    jp      $19a2                           ;[012f] c3 a2 19
                    rst     $10                             ;[0132] d7
                    
;***************************************************************************
; trick by rozpocząć procedure od róznych wartości i w resultacie do sekwencji
; push af, rst 08  wejśc z róznymi wartościami w A
; ????? - start od 0133 -> A = 00
; SET   - start od 0135 -> A = 80
BAS_PROC_SET:
; RESET - start od 0138 -> A = 01 
BAS_PROC_RESET:
                    xor     a                               ;[0133] af
                    ld      bc,$803e    ; nieistotne        ;[0134] 01 3e 80
                   ;ld      a,$80       ; entry point SET   ;[0135] 3e 80
                    ld      bc,$013e    ; nieistotne        ;[0137] 01 3e 01
                   ;ld      a,$01       ; entry point RESET ;[0138] 3e 01
                    push    af                              ;[013a] f5
                    rst     $08                             ;[013b] cf
                    jr      z,$010b                         ;[013c] 28 cd
                    inc     e                               ;[013e] 1c
                    dec     hl                              ;[013f] 2b
                    cp      $80                             ;[0140] fe 80
                    jp      nc,$1e4a                        ;[0142] d2 4a 1e
                    push    af                              ;[0145] f5
                    rst     $08                             ;[0146] cf
                    inc     l                               ;[0147] 2c
                    call    $2b1c                           ;[0148] cd 1c 2b
                    cp      $40                             ;[014b] fe 40
                    jp      nc,$1e4a                        ;[014d] d2 4a 1e

;BASIC SET/RESET/POINT
;Load HL with the return address and PUSH it onto the stack. Load register A with one of the following:
;   00h = POINT 01H = RESET 80h = SET
;PUSH AF onto the stack. Load A with the X-Coordinate and PUSH onto the stack. Point HL to ')' and NULL.
;Load A with the Y Coordinate and JP 0150h
;To SET (23,50):
;       LD HL,return        ; code adress where we want continue
;       PUSH HL             ; param on stack 
;       LD A,80h            ; SET param
;       PUSH AF             ; param on stack
;       LD A,23             ; X pixel coordinate
;       PUSH AF             ; param on stack
;       LD A,50             ; Y pixel coordinate
;       LD HL,rbkt          ; point HL to char ')' - closing 
;       JP 0150h            ; execute
;return ......
;rbkt   DEFB 29h            ; ')' needed data char
;       DEFB 00h            ; null terminating string
SYS_SET_PIXEL
                    ld      e,a                             ;[0150] 5f
                    xor     a                               ;[0151] af
                    ld      d,a                             ;[0152] 57
                    ex      de,hl                           ;[0153] eb
                    add     hl,hl                           ;[0154] 29
                    add     hl,hl                           ;[0155] 29
                    add     hl,hl                           ;[0156] 29
                    add     hl,hl                           ;[0157] 29
                    add     hl,hl                           ;[0158] 29
                    ex      de,hl                           ;[0159] eb
                    pop     af                              ;[015a] f1
                    push    af                              ;[015b] f5
                    srl     a                               ;[015c] cb 3f
                    srl     a                               ;[015e] cb 3f
                    add     e                               ;[0160] 83
                    ld      e,a                             ;[0161] 5f
                    ld      a,d                             ;[0162] 7a
                    or      $70                             ;[0163] f6 70
                    ld      d,a                             ;[0165] 57
                    pop     af                              ;[0166] f1
                    and     $03                             ;[0167] e6 03
                    add     a                               ;[0169] 87
                    ld      b,a                             ;[016a] 47
                    pop     af                              ;[016b] f1
                    or      a                               ;[016c] b7
                    jp      z,$38e7                         ;[016d] ca e7 38
                    push    af                              ;[0170] f5
                    ld      c,$3f                           ;[0171] 0e 3f
                    ld      a,($7846)                       ;[0173] 3a 46 78
                    sla     a                               ;[0176] cb 27
                    sla     a                               ;[0178] cb 27
                    rrc     a                               ;[017a] cb 0f
                    rrc     c                               ;[017c] cb 09
                    djnz    $017a                           ;[017e] 10 fa
                    jp      $3903                           ;[0180] c3 03 39
                    ld      hl,$7839                        ;[0183] 21 39 78
                    res     3,(hl)                          ;[0186] cb 9e
                    ld      hl,$0384                        ;[0188] 21 84 03
                    call    SYS_STR_TO_DEVICE                           ;[018b] cd a7 28
                    jp      $36cf                           ;[018e] c3 cf 36
                    pop     af                              ;[0191] f1
                    cp      $20                             ;[0192] fe 20
                    jr      nz,$01aa                        ;[0194] 20 14
                    ld      a,(de)                          ;[0196] 1a
                    inc     de                              ;[0197] 13
                    cp      $20                             ;[0198] fe 20
                    jr      z,$0196                         ;[019a] 28 fa
                    cp      $d7                             ;[019c] fe d7
                    push    hl                              ;[019e] e5
                    ld      a,($7899)                       ;[019f] 3a 99 78
                    or      a                               ;[01a2] b7
                    jr      nz,$01ab                        ;[01a3] 20 06
                    call    $0358                           ;[01a5] cd 58 03
                    or      a                               ;[01a8] b7
                    jr      z,$01bc                         ;[01a9] 28 11
                    push    af                              ;[01ab] f5
                    xor     a                               ;[01ac] af
                    ld      ($7899),a                       ;[01ad] 32 99 78
                    inc     a                               ;[01b0] 3c
                    call    $2857                           ;[01b1] cd 57 28
                    pop     af                              ;[01b4] f1
                    ld      hl,($78d4)                      ;[01b5] 2a d4 78
                    ld      (hl),a                          ;[01b8] 77
                    jp      $2884                           ;[01b9] c3 84 28
                    ld      hl,$1928                        ;[01bc] 21 28 19
                    ld      ($7921),hl                      ;[01bf] 22 21 79
                    ld      a,$03                           ;[01c2] 3e 03
                    ld      ($78af),a                       ;[01c4] 32 af 78
                    pop     hl                              ;[01c7] e1
                    ret                                     ;[01c8] c9

;*********************************************************************************************************************
; CLS
;BAS_PROC_CLS_ADR      equ     $01c9
;CLEAR SCREEN
; Routine may be used to clear the video screen, home the cursor and select display mode 0.
; It disturbs all registers.
BAS_PROC_CLS:
                    ld      a,$1c               ; '???' special char            ;[01c9] 3e 1c
                    call    SYS_CHAR_TO_SCREEN_SAVE                                     ;[01cb] cd 3a 03
                    ld      a,$1f                                               ;[01ce] 3e 1f
                    jp      SYS_CHAR_TO_SCREEN_SAVE     ; '???' special char            ;[01d0] c3 3a 03


;*********************************************************************************************************************
; RANDOM
; UWAGA: Niezgodne z dawna dok VZ-200 -> tab_BASIC_NAMES nie zawiera w danej pozycji
;        tokena RANDOM. Adres ten może byc nieprawidłowy
UPDATE_RANDOM
                    ld      a,r                             ;[01d3] ed 5f
                    ld      (BASIC_RANDOM_SEED),a           ;[01d5] 32 ab 78
                    ret                                     ;[01d8] c9




                    ld      d,h                             ;[01d9] 54
                    ld      b,a                             ;[01da] 47
                    ld      b,d                             ;[01db] 42
                    dec     (hl)                            ;[01dc] 35
                    ld      c,(hl)                          ;[01dd] 4e
                    ld      (hl),$59                        ;[01de] 36 59
                    ld      c,b                             ;[01e0] 48
                    ld      d,a                             ;[01e1] 57
                    ld      d,e                             ;[01e2] 53
                    ld      e,b                             ;[01e3] 58
                    ld      ($392e),a                       ;[01e4] 32 2e 39
                    ld      c,a                             ;[01e7] 4f
                    ld      c,h                             ;[01e8] 4c
                    nop                                     ;[01e9] 00
                    nop                                     ;[01ea] 00
                    nop                                     ;[01eb] 00
                    nop                                     ;[01ec] 00
                    nop                                     ;[01ed] 00
                    dec     l                               ;[01ee] 2d
                    dec     c                               ;[01ef] 0d
                    ld      a,($4445)                       ;[01f0] 3a 45 44
                    ld      b,e                             ;[01f3] 43
                    inc     sp                              ;[01f4] 33
                    inc     l                               ;[01f5] 2c
                    jr      c,$0241                         ;[01f6] 38 49
                    ld      c,e                             ;[01f8] 4b
                    ld      d,c                             ;[01f9] 51
                    ld      b,c                             ;[01fa] 41
                    ld      e,d                             ;[01fb] 5a
                    ld      sp,$3020                        ;[01fc] 31 20 30
                    ld      d,b                             ;[01ff] 50
                    dec     sp                              ;[0200] 3b
                    ld      d,d                             ;[0201] 52
                    ld      b,(hl)                          ;[0202] 46
                    ld      d,(hl)                          ;[0203] 56
                    inc     (hl)                            ;[0204] 34
                    ld      c,l                             ;[0205] 4d
                    scf                                     ;[0206] 37
                    ld      d,l                             ;[0207] 55
                    ld      c,d                             ;[0208] 4a
                    adc     h                               ;[0209] 8c
                    adc     c                               ;[020a] 89
                    nop                                     ;[020b] 00
                    dec     h                               ;[020c] 25
                    ld      e,(hl)                          ;[020d] 5e
                    ld      h,$83                           ;[020e] 26 83
                    add     (hl)                            ;[0210] 86
                    adc     l                               ;[0211] 8d
                    add     d                               ;[0212] 82
                    nop                                     ;[0213] 00
                    ld      ($293e),hl                      ;[0214] 22 3e 29
                    ld      e,e                             ;[0217] 5b
                    ccf                                     ;[0218] 3f
                    nop                                     ;[0219] 00
                    nop                                     ;[021a] 00
                    nop                                     ;[021b] 00
                    nop                                     ;[021c] 00
                    nop                                     ;[021d] 00
                    dec     a                               ;[021e] 3d
                    dec     c                               ;[021f] 0d
                    ld      hl,($848b)                      ;[0220] 2a 8b 84
                    nop                                     ;[0223] 00
                    inc     hl                              ;[0224] 23
                    inc     a                               ;[0225] 3c
                    jr      z,$01ad                         ;[0226] 28 85
                    cpl                                     ;[0228] 2f
                    adc     (hl)                            ;[0229] 8e
                    add     c                               ;[022a] 81
                    add     b                               ;[022b] 80
                    ld      hl,$4020                        ;[022c] 21 20 40
                    ld      e,l                             ;[022f] 5d
                    dec     hl                              ;[0230] 2b
                    add     a                               ;[0231] 87
                    adc     b                               ;[0232] 88
                    nop                                     ;[0233] 00
                    inc     h                               ;[0234] 24
                    ld      e,h                             ;[0235] 5c
                    daa                                     ;[0236] 27
                    adc     d                               ;[0237] 8a
                    adc     a                               ;[0238] 8f
                    jp      z,$b58d                         ;[0239] ca 8d b5
                    or      h                               ;[023c] b4
                    sub     a                               ;[023d] 97
                    adc     (hl)                            ;[023e] 8e
                    sub     l                               ;[023f] 95
                    add     h                               ;[0240] 84
                    cp      l                               ;[0241] bd
                    call    z,$b9b1                         ;[0242] cc b1 b9
                    dec     de                              ;[0245] 1b
                    adc     e                               ;[0246] 8b
                    adc     h                               ;[0247] 8c
                    dec     d                               ;[0248] 15
                    nop                                     ;[0249] 00
                    nop                                     ;[024a] 00
                    nop                                     ;[024b] 00
                    nop                                     ;[024c] 00
                    nop                                     ;[024d] 00
                    ld      bc,$0000                        ;[024e] 01 00 00
                    add     a                               ;[0251] 87
                    adc     d                               ;[0252] 8a
                    or      e                               ;[0253] b3
                    sbc     h                               ;[0254] 9c
                    add     hl,bc                           ;[0255] 09
                    cp      e                               ;[0256] bb
                    adc     c                               ;[0257] 89
                    cp      h                               ;[0258] bc
                    add     c                               ;[0259] 81
                    sbc     l                               ;[025a] 9d
                    push    hl                              ;[025b] e5
                    cp      d                               ;[025c] ba
                    ld      a,(bc)                          ;[025d] 0a
                    adc     b                               ;[025e] 88
                    or      d                               ;[025f] b2
                    ld      a,a                             ;[0260] 7f
                    sub     d                               ;[0261] 92
                    sub     c                               ;[0262] 91
                    xor     a                               ;[0263] af
                    sbc     b                               ;[0264] 98
                    ex      af,af'                          ;[0265] 08
                    add     b                               ;[0266] 80
                    adc     a                               ;[0267] 8f
                    sub     e                               ;[0268] 93
                    jp      m,$9e94                         ;[0269] fa 94 9e
                    rst     $18                             ;[026c] df
                    cp      a                               ;[026d] bf
                    ret     po                              ;[026e] e0
                    ld      sp,hl                           ;[026f] f9
                    add     e                               ;[0270] 83
                    push    af                              ;[0271] f5
                    call    p,$e1a0                         ;[0272] f4 a0 e1
                    nop                                     ;[0275] 00
                    exx                                     ;[0276] d9
                    out     ($00),a                         ;[0277] d3 00
                    nop                                     ;[0279] 00
                    nop                                     ;[027a] 00
                    nop                                     ;[027b] 00
                    nop                                     ;[027c] 00
                    nop                                     ;[027d] 00
                    ld      bc,$0000                        ;[027e] 01 00 00
                    di                                      ;[0281] f3
                    sub     b                               ;[0282] 90
                    sub     (hl)                            ;[0283] 96
                    ex      (sp),hl                         ;[0284] e3
                    nop                                     ;[0285] 00
                    defb      $dd                             ;[0286] dd
                    jp      nc,$f7c6                        ;[0287] d2 c6 f7
                    or      $db                             ;[028a] f6 db
                    jp      po,$d800                        ;[028c] e2 00 d8
                    rlc     b                               ;[028f] cb 00
                    ret     m                               ;[0291] f8
                    sbc     $c1                             ;[0292] de c1
                    call    po,$d700                        ;[0294] e4 00 d7
                    ret                                     ;[0297] c9

                    add     d                               ;[0298] 82
                    jp      po,$e3e1                        ;[0299] e2 e1 e3
                    call    po,$e0df                        ;[029c] e4 df e0
                    rst     $10                             ;[029f] d7
                    defb    $dd                             ;[02a0] dd
                    exx                                     ;[02a1] d9
                    ret     c                               ;[02a2] d8
                    rst     $30                             ;[02a3] f7
                    push    af                              ;[02a4] f5
                    di                                      ;[02a5] f3
                    ret     m                               ;[02a6] f8
                    rst     $30                             ;[02a7] f7
                    ld      sp,hl                           ;[02a8] f9
                    sbc     l                               ;[02a9] 9d
                    or      $f4                             ;[02aa] f6 f4
                    sbc     $e5                             ;[02ac] de e5
                    jp      m,$8080                         ;[02ae] fa 80 80
                    add     b                               ;[02b1] 80
                    cp      b                               ;[02b2] b8
                    cp      b                               ;[02b3] b8
                    add     b                               ;[02b4] 80
                    cp      b                               ;[02b5] b8
                    cp      b                               ;[02b6] b8
                    add     b                               ;[02b7] 80
                    add     a                               ;[02b8] 87
                    add     b                               ;[02b9] 80
                    cp      a                               ;[02ba] bf
                    cp      b                               ;[02bb] b8
                    add     a                               ;[02bc] 87
                    cp      b                               ;[02bd] b8
                    cp      a                               ;[02be] bf
                    add     a                               ;[02bf] 87
                    add     b                               ;[02c0] 80
                    add     a                               ;[02c1] 87
                    cp      b                               ;[02c2] b8
                    cp      a                               ;[02c3] bf
                    add     b                               ;[02c4] 80
                    cp      a                               ;[02c5] bf
                    cp      b                               ;[02c6] b8
                    add     a                               ;[02c7] 87
                    add     a                               ;[02c8] 87
                    add     a                               ;[02c9] 87
                    cp      a                               ;[02ca] bf
                    cp      a                               ;[02cb] bf
                    add     a                               ;[02cc] 87
                    cp      a                               ;[02cd] bf
                    cp      a                               ;[02ce] bf
                    ld      (hl),d                          ;[02cf] 72
                    ld      (bc),a                          ;[02d0] 02
                    ld      c,a                             ;[02d1] 4f
                    ld      (bc),a                          ;[02d2] 02
                    ld      l,$02                           ;[02d3] 2e 02
                    ld      c,$02                           ;[02d5] 0e 02
                    pop     af                              ;[02d7] f1
                    ld      bc,$01d5                        ;[02d8] 01 d5 01
                    or      a                               ;[02db] b7
                    ld      bc,$019e                        ;[02dc] 01 9e 01
                    add     (hl)                            ;[02df] 86
                    ld      bc,$0170                        ;[02e0] 01 70 01
                    ld      e,e                             ;[02e3] 5b
                    ld      bc,$0148                        ;[02e4] 01 48 01
                    dec     (hl)                            ;[02e7] 35
                    ld      bc,$0123                        ;[02e8] 01 23 01
                    inc     de                              ;[02eb] 13
                    ld      bc,$0103                        ;[02ec] 01 03 01
                    call    p,$e600                         ;[02ef] f4 00 e6
                    nop                                     ;[02f2] 00
                    exx                                     ;[02f3] d9
                    nop                                     ;[02f4] 00
                    call    $c100                           ;[02f5] cd 00 c1
                    nop                                     ;[02f8] 00
                    or      (hl)                            ;[02f9] b6
                    nop                                     ;[02fa] 00
                    xor     e                               ;[02fb] ab
                    nop                                     ;[02fc] 00
                    and     c                               ;[02fd] a1
                    nop                                     ;[02fe] 00
                    sbc     b                               ;[02ff] 98
                    nop                                     ;[0300] 00
                    adc     a                               ;[0301] 8f
                    nop                                     ;[0302] 00
                    add     a                               ;[0303] 87
                    nop                                     ;[0304] 00
                    ld      a,a                             ;[0305] 7f
                    nop                                     ;[0306] 00
                    ld      a,b                             ;[0307] 78
                    nop                                     ;[0308] 00
                    ld      (hl),b                          ;[0309] 70
                    nop                                     ;[030a] 00
                    ld      l,d                             ;[030b] 6a
                    nop                                     ;[030c] 00
                    ld      b,a                             ;[030d] 47
                    ld      a,($783c)                       ;[030e] 3a 3c 78
                    ld      hl,($7820)                      ;[0311] 2a 20 78
                    ld      (hl),a                          ;[0314] 77
                    ld      a,b                             ;[0315] 78
                    ret                                     ;[0316] c9

                    ld      bc,$0020                        ;[0317] 01 20 00
                    or      a                               ;[031a] b7
                    sbc     hl,bc                           ;[031b] ed 42
                    ld      ($7820),hl                      ;[031d] 22 20 78
                    ret                                     ;[0320] c9

                    ld      bc,$0302                        ;[0321] 01 02 03
                    inc     b                               ;[0324] 04
                    ld      b,$08                           ;[0325] 06 08
                    inc     c                               ;[0327] 0c
                    djnz    $0342                           ;[0328] 10 18
                    push    bc                              ;[032a] c5
                    ld      c,a                             ;[032b] 4f
                    call    $79c1                           ;[032c] cd c1 79
                    ld      a,($789c)                       ;[032f] 3a 9c 78
                    or      a                               ;[0332] b7
                    ld      a,c                             ;[0333] 79
                    pop     bc                              ;[0334] c1
                    jp      m,$3b54                         ;[0335] fa 54 3b
                    jr      nz,$039c                        ;[0338] 20 62
                    
;********************************************************************************
;  CHARACTER OUTPUT SUBROUTINE
;A routine which outputs a single character to the video display is located at 033A Hex. The code for the
;character to be displayed must be in the A register, while the character will be displayed on the screen at the
;position corresponding to the current value of the cursor pointer. 
; WE: A - character to diplay at current cursor position All registers are preserved.
SYS_CHAR_TO_SCREEN_SAVE
    push    de               ; zachowanie rejestru DE               ;[033a] d5
    push    af               ; zachowanie rejestru AF               ;[033b] f5
    push    bc               ; zachowanie rejestru BC               ;[033c] c5
    push    hl               ; zachowanie rejestru HL               ;[033d] e5
    call    $308b                           ;[033e] cd 8b 30
    pop     hl               ; przywrócenie rejestru HL             ;[0341] e1
    pop     bc               ; przywrócenie rejestru BC             ;[0342] c1
    nop                      ;                                      ;[0343] 00
    nop                      ;                                      ;[0344] 00
    pop     af               ; przywrócenie rejestru AF             ;[0345] f1
    pop     de               ; przywrócenie rejestru DE             ;[0346] d1
    ret                      ; EXIT() ---------------               ;[0347] c9

                    ld      a,($783d)                       ;[0348] 3a 3d 78
                    and     $08                             ;[034b] e6 08
                    ld      a,($7820)                       ;[034d] 3a 20 78
                    jr      z,$0355                         ;[0350] 28 03
                    rrca                                    ;[0352] 0f
                    and     $1f                             ;[0353] e6 1f
                    and     $1f                             ;[0355] e6 1f
                    ret                                     ;[0357] c9

                    call    $79c4                           ;[0358] cd c4 79
    push    de                  ; store DE                      ;[035b] d5
    call    KEYS_READ_DEVICE    ; read keys, returns key pressed in A                ;[035c] cd 2b 00
    pop     de                  ; restore DE                                         ;[035f] d1
    ret     ; returns with A = key pressed or 0 if none                              ;[0360] c9

                    ld      a,(bc)                          ;[0361] 0a
                    dec     bc                              ;[0362] 0b
                    inc     c                               ;[0363] 0c
                    inc     c                               ;[0364] 0c
                    dec     c                               ;[0365] 0d
                    ld      c,$0f                           ;[0366] 0e 0f
                    rrca                                    ;[0368] 0f
                    djnz    $037c                           ;[0369] 10 11
                    ld      (de),a                          ;[036b] 12
                    inc     de                              ;[036c] 13
                    dec     d                               ;[036d] 15
                    ld      d,$17                           ;[036e] 16 17
                    add     hl,de                           ;[0370] 19
                    ld      a,(de)                          ;[0371] 1a
                    inc     e                               ;[0372] 1c
                    dec     e                               ;[0373] 1d
                    rra                                     ;[0374] 1f
                    ld      hl,$2523                        ;[0375] 21 23 25
                    daa                                     ;[0378] 27
                    add     hl,hl                           ;[0379] 29
                    inc     l                               ;[037a] 2c
                    ld      l,$31                           ;[037b] 2e 31
                    inc     (hl)                            ;[037d] 34
                    dec     (hl)                            ;[037e] 35
                    ld      a,($4b4f)                       ;[037f] 3a 4f 4b
                    dec     c                               ;[0382] 0d
                    nop                                     ;[0383] 00
                    ld      b,l                             ;[0384] 45
                    ld      d,d                             ;[0385] 52
                    ld      d,d                             ;[0386] 52
                    ld      c,a                             ;[0387] 4f
                    ld      d,d                             ;[0388] 52
                    dec     c                               ;[0389] 0d
                    nop                                     ;[038a] 00
                    xor     a                               ;[038b] af
                    ld      ($789c),a                       ;[038c] 32 9c 78
                    ld      a,($789b)                       ;[038f] 3a 9b 78
                    or      a                               ;[0392] b7
                    ret     z                               ;[0393] c8
                    ld      a,$0d                           ;[0394] 3e 0d
                    push    de                              ;[0396] d5
                    call    $039c                           ;[0397] cd 9c 03
                    pop     de                              ;[039a] d1
                    ret                                     ;[039b] c9

                    push    af                              ;[039c] f5
                    push    de                              ;[039d] d5
                    push    bc                              ;[039e] c5
                    ld      c,a                             ;[039f] 4f
                    ld      e,$00                           ;[03a0] 1e 00
                    cp      $0c                             ;[03a2] fe 0c
                    jr      z,$03b6                         ;[03a4] 28 10
                    cp      $0a                             ;[03a6] fe 0a
                    jr      nz,$03ad                        ;[03a8] 20 03
                    ld      a,$0d                           ;[03aa] 3e 0d
                    ld      c,a                             ;[03ac] 4f
                    cp      $0d                             ;[03ad] fe 0d
                    jr      z,$03b6                         ;[03af] 28 05
                    ld      a,($789b)                       ;[03b1] 3a 9b 78
                    inc     a                               ;[03b4] 3c
                    ld      e,a                             ;[03b5] 5f
                    ld      a,e                             ;[03b6] 7b
                    ld      ($789b),a                       ;[03b7] 32 9b 78
                    ld      a,c                             ;[03ba] 79
                    call    $003b                           ;[03bb] cd 3b 00
                    pop     bc                              ;[03be] c1
                    pop     de                              ;[03bf] d1
                    pop     af                              ;[03c0] f1
                    ret                                     ;[03c1] c9

;*********************************************************************************
; READ DEVICE
; WE: de - device struct address
;     b - requested device ?? command/flags : 01 - read, 02 - ...., 04 - .....
READ_DEVICE
    push    hl          ; save HL                              ;[03c2] e5
    push    ix          ; save IX                              ;[03c3] dd e5
    push    de          ; de - device struc address            ;[03c5] d5
    pop     ix          ; ix - device structure                ;[03c6] dd e1
    push    de          ; save DE                              ;[03c8] d5
    ld      hl,DEVICE_EXECUTE_EXIT     ; exit/return address      ;[03c9] 21 dd 03
    push    hl          ; now RET will jump to local Exit      ;[03cc] e5
    ld      c,a         ; save A in C (in case will be needed) ;[03cd] 4f
    ld      a,(de)      ; device type                          ;[03ce] 1a
    and     b           ; check bits (supported?)              ;[03cf] a0
    cp      b           ; NZ -> bit(s) set                     ;[03d0] b8
    jp      nz,$7833    ; checked - jump                    ;[03d1] c2 33 78
                    cp      $02                             ;[03d4] fe 02
                    ld      l,(ix+$01)                      ;[03d6] dd 6e 01
                    ld      h,(ix+$02)                      ;[03d9] dd 66 02
                    jp      (hl)                            ;[03dc] e9
DEVICE_EXECUTE_EXIT                    
                    pop     de                              ;[03dd] d1
                    pop     ix                              ;[03de] dd e1
                    pop     hl                              ;[03e0] e1
                    pop     bc                              ;[03e1] c1
                    ret                                     ;[03e2] c9

                    ld      hl,$7839                        ;[03e3] 21 39 78
                    set     5,(hl)                          ;[03e6] cb ee
                    ld      hl,($7820)                      ;[03e8] 2a 20 78
                    call    $0053                           ;[03eb] cd 53 00
                    ld      a,h                             ;[03ee] 7c
                    cp      $71                             ;[03ef] fe 71
                    jr      nz,$0403                        ;[03f1] 20 10
                    ld      a,l                             ;[03f3] 7d
                    cp      $e0                             ;[03f4] fe e0
                    jr      nz,$0403                        ;[03f6] 20 0b
                    ld      a,($7ad7)                       ;[03f8] 3a d7 7a
                    or      a                               ;[03fb] b7
                    jr      nz,$0403                        ;[03fc] 20 05
                    ld      a,$0d                           ;[03fe] 3e 0d
                    call    $308b                           ;[0400] cd 8b 30
                    ld      b,c                             ;[0403] 41
                    push    bc                              ;[0404] c5
                    ld      hl,$7839                        ;[0405] 21 39 78
                    res     0,(hl)                          ;[0408] cb 86
                    res     2,(hl)                          ;[040a] cb 96
                    bit     0,(hl)                          ;[040c] cb 46
                    jr      z,$040c                         ;[040e] 28 fc
                    ld      a,($78a6)                       ;[0410] 3a a6 78
                    ld      c,a                             ;[0413] 4f
                    xor     a                               ;[0414] af
                    ld      ($78a6),a                       ;[0415] 32 a6 78
                    ld      b,a                             ;[0418] 47
                    ld      hl,($7820)                      ;[0419] 2a 20 78
                    sbc     hl,bc                           ;[041c] ed 42
                    ld      ($7820),hl                      ;[041e] 22 20 78
                    ld      de,$79e8                        ;[0421] 11 e8 79
                    pop     bc                              ;[0424] c1
                    ld      hl,$7839                        ;[0425] 21 39 78
                    bit     4,(hl)                          ;[0428] cb 66
                    ld      hl,($7820)                      ;[042a] 2a 20 78
                    jr      z,$0471                         ;[042d] 28 42
                    push    bc                              ;[042f] c5
                    push    hl                              ;[0430] e5
                    call    $33a8                           ;[0431] cd a8 33
                    pop     hl                              ;[0434] e1
                    pop     bc                              ;[0435] c1
                    or      a                               ;[0436] b7
                    jr      nz,$0441                        ;[0437] 20 08
                    ld      a,l                             ;[0439] 7d
                    sub     $20                             ;[043a] d6 20
                    ld      l,a                             ;[043c] 6f
                    ld      a,h                             ;[043d] 7c
                    sbc     $00                             ;[043e] de 00
                    ld      h,a                             ;[0440] 67
                    ld      c,b                             ;[0441] 48
                    ld      a,(de)                          ;[0442] 1a
                    cp      (hl)                            ;[0443] be
                    jr      nz,$044d                        ;[0444] 20 07
                    inc     hl                              ;[0446] 23
                    inc     de                              ;[0447] 13
                    djnz    $0442                           ;[0448] 10 f8
                    push    bc                              ;[044a] c5
                    jr      $0451                           ;[044b] 18 04
                    ld      bc,$0000                        ;[044d] 01 00 00
                    push    bc                              ;[0450] c5
                    push    hl                              ;[0451] e5
                    call    $33a8                           ;[0452] cd a8 33
                    pop     hl                              ;[0455] e1
                    pop     bc                              ;[0456] c1
                    push    bc                              ;[0457] c5
                    cp      $80                             ;[0458] fe 80
                    jr      z,$0466                         ;[045a] 28 0a
                    ld      a,$40                           ;[045c] 3e 40
                    sub     c                               ;[045e] 91
                    ld      b,a                             ;[045f] 47
                    pop     de                              ;[0460] d1
                    ld      e,$00                           ;[0461] 1e 00
                    push    de                              ;[0463] d5
                    jr      $046b                           ;[0464] 18 05
                    ld      b,$20                           ;[0466] 06 20
                    ld      hl,($7820)                      ;[0468] 2a 20 78
                    ld      de,$79e8                        ;[046b] 11 e8 79
                    jp      $3ea8                           ;[046e] c3 a8 3e
                    ld      bc,$0000                        ;[0471] 01 00 00
                    push    bc                              ;[0474] c5
                    push    hl                              ;[0475] e5
                    call    $33a8                           ;[0476] cd a8 33
                    pop     hl                              ;[0479] e1
                    cp      $80                             ;[047a] fe 80
                    jr      z,$048c                         ;[047c] 28 0e
                    cp      $81                             ;[047e] fe 81
                    jr      z,$0488                         ;[0480] 28 06
                    ld      bc,$0020                        ;[0482] 01 20 00
                    or      a                               ;[0485] b7
                    sbc     hl,bc                           ;[0486] ed 42
                    ld      b,$40                           ;[0488] 06 40
                    jr      $048e                           ;[048a] 18 02
                    ld      b,$20                           ;[048c] 06 20
                    ld      a,($7818)                       ;[048e] 3a 18 78
                    or      a                               ;[0491] b7
                    jp      z,$3e40                         ;[0492] ca 40 3e
                    ld      a,(hl)                          ;[0495] 7e
                    cp      $40                             ;[0496] fe 40
                    jp      c,$04ae                         ;[0498] da ae 04
                    pop     bc                              ;[049b] c1
                    ld      de,$04a4                        ;[049c] 11 a4 04
                    push    de                              ;[049f] d5
                    push    bc                              ;[04a0] c5
                    jp      $0502                           ;[04a1] c3 02 05
                    ret     c                               ;[04a4] d8
                    ld      hl,$3e1a                        ;[04a5] 21 1a 3e
                    call    SYS_STR_TO_DEVICE                           ;[04a8] cd a7 28
                    jp      $03e3                           ;[04ab] c3 e3 03
                    cp      $22                             ;[04ae] fe 22
                    jr      nz,$04e3                        ;[04b0] 20 31
                    ld      (de),a                          ;[04b2] 12
                    inc     hl                              ;[04b3] 23
                    inc     de                              ;[04b4] 13
                    dec     b                               ;[04b5] 05
                    jr      z,$04ee                         ;[04b6] 28 36
                    ld      a,(hl)                          ;[04b8] 7e
                    cp      $40                             ;[04b9] fe 40
                    jp      c,$04c9                         ;[04bb] da c9 04
                    cp      $80                             ;[04be] fe 80
                    jp      c,$04c5                         ;[04c0] da c5 04
                    and     $8f                             ;[04c3] e6 8f
                    or      $80                             ;[04c5] f6 80
                    jr      $04dc                           ;[04c7] 18 13
                    cp      $22                             ;[04c9] fe 22
                    jr      nz,$04d6                        ;[04cb] 20 09
                    push    hl                              ;[04cd] e5
                    ld      hl,$7839                        ;[04ce] 21 39 78
                    bit     4,(hl)                          ;[04d1] cb 66
                    pop     hl                              ;[04d3] e1
                    jr      z,$04e3                         ;[04d4] 28 0d
                    bit     5,a                             ;[04d6] cb 6f
                    jr      nz,$04dc                        ;[04d8] 20 02
                    or      $40                             ;[04da] f6 40
                    ld      (de),a                          ;[04dc] 12
                    inc     hl                              ;[04dd] 23
                    inc     de                              ;[04de] 13
                    djnz    $04b8                           ;[04df] 10 d7
                    jr      $04ee                           ;[04e1] 18 0b
                    bit     5,a                             ;[04e3] cb 6f
                    jr      nz,$04e9                        ;[04e5] 20 02
                    or      $40                             ;[04e7] f6 40
                    ld      (de),a                          ;[04e9] 12
                    inc     hl                              ;[04ea] 23
                    inc     de                              ;[04eb] 13
                    djnz    $0495                           ;[04ec] 10 a7
                    dec     de                              ;[04ee] 1b
                    ld      a,d                             ;[04ef] 7a
                    cp      $79                             ;[04f0] fe 79
                    jr      nz,$04fa                        ;[04f2] 20 06
                    ld      a,e                             ;[04f4] 7b
                    cp      $e8                             ;[04f5] fe e8
                    jp      c,$04ff                         ;[04f7] da ff 04
                    ld      a,(de)                          ;[04fa] 1a
                    cp      $20                             ;[04fb] fe 20
                    jr      z,$04ee                         ;[04fd] 28 ef
                    inc     de                              ;[04ff] 13
                    xor     a                               ;[0500] af
                    ld      (de),a                          ;[0501] 12
                    call    $33a8                           ;[0502] cd a8 33
                    ld      hl,($7820)                      ;[0505] 2a 20 78
                    cp      $81                             ;[0508] fe 81
                    call    $0053                           ;[050a] cd 53 00
                    jr      nz,$0513                        ;[050d] 20 04
                    xor     a                               ;[050f] af
                    call    $308b                           ;[0510] cd 8b 30
                    xor     a                               ;[0513] af
                    call    $308b                           ;[0514] cd 8b 30
                    ld      a,($7838)                       ;[0517] 3a 38 78
                    and     $fd                             ;[051a] e6 fd
                    ld      ($7838),a                       ;[051c] 32 38 78
                    ld      hl,$7839                        ;[051f] 21 39 78
                    bit     2,(hl)                          ;[0522] cb 56
                    jr      z,$052b                         ;[0524] 28 05
                    ld      a,$01                           ;[0526] 3e 01
                    scf                                     ;[0528] 37
                    jr      $052c                           ;[0529] 18 01
                    xor     a                               ;[052b] af
                    ld      hl,$7839                        ;[052c] 21 39 78
                    res     4,(hl)                          ;[052f] cb a6
                    ld      hl,$79e8                        ;[0531] 21 e8 79
                    pop     bc                              ;[0534] c1
                    push    af                              ;[0535] f5
                    add     hl,bc                           ;[0536] 09
                    jp      $3e29                           ;[0537] c3 29 3e
                    ld      a,($7aaf)                       ;[053a] 3a af 7a
                    or      a                               ;[053d] b7
                    jr      nz,$053a                        ;[053e] 20 fa
                    ld      b,$40                           ;[0540] 06 40
                    ld      hl,$79e8                        ;[0542] 21 e8 79
                    ld      a,$20                           ;[0545] 3e 20
                    ld      (hl),a                          ;[0547] 77
                    inc     hl                              ;[0548] 23
                    djnz    $0547                           ;[0549] 10 fc
                    xor     a                               ;[054b] af
                    ld      (hl),a                          ;[054c] 77
                    call    $33a8                           ;[054d] cd a8 33
                    or      a                               ;[0550] b7
                    ld      a,($78a6)                       ;[0551] 3a a6 78
                    jr      nz,$0558                        ;[0554] 20 02
                    add     $20                             ;[0556] c6 20
                    ld      c,a                             ;[0558] 4f
                    xor     a                               ;[0559] af
                    ld      b,a                             ;[055a] 47
                    ld      hl,($7820)                      ;[055b] 2a 20 78
                    sbc     hl,bc                           ;[055e] ed 42
                    ld      de,$79e8                        ;[0560] 11 e8 79
                    push    bc                              ;[0563] c5
                    ldir                                    ;[0564] ed b0
                    pop     bc                              ;[0566] c1
                    ld      hl,$7839                        ;[0567] 21 39 78
                    set     4,(hl)                          ;[056a] cb e6
                    call    $03e3                           ;[056c] cd e3 03
                    ret                                     ;[056f] c9

                    ld      d,d                             ;[0570] 52
                    ld      d,l                             ;[0571] 55
                    ld      c,(hl)                          ;[0572] 4e
                    nop                                     ;[0573] 00
                    call    nz,$3233                        ;[0574] c4 33 32
                    call    $1aa3                           ;[0577] cd a3 1a
                    call    $17d8                           ;[057a] cd d8 17
                    call    $190d                           ;[057d] cd 0d 19
                    jp      z,$125a                         ;[0580] ca 5a 12
                    call    $1f49                           ;[0583] cd 49 1f
                    jr      c,$05a0                         ;[0586] 38 18
                    rst     $28                             ;[0588] ef
                    ld      a,($0438)                       ;[0589] 3a 38 04
                    defb    $dd                             ;[058c] dd
                    
                    
;PRINTER DRIVER
; To send a character to the printer, load the chracter's ASCII code into the C register 
; and call the driver. After printing, the character code will be returned in both 
; the A and C registers. 
; All other registers are disturbed. 
; For example to print the letter 'A' (ASCII code 97 decimal), you would use:
;   LD C,97         ;set up code in C register
;   CALL 058DH      ;& call printer driver
;A line feed character (OAH) is automatically inserted after a carriage return (ODH). 
; If the driver is called with a null byte in the C register, it will simply 
; check the printer status and return with bit 0 of the A register either set
; or cleared. The routine does check for a BREAK key depression, and if one is detected, 
; it will return with the carry flag set.
; WE: C - znak do druku
;     IX - adres struktury bloku
PRINTER_PRINT_CHAR:
    ld      a,c             ; a - znak do wydrukowania                      ;[058d] 79
    or      a               ; gdy 0 to tylko sprawdzenie statusu            ;[058e] b7
    jr      z,PRINTER_GET_STATUS_2      ; get status                        ;[058f] 28 33
; --- A - znak do wydruku != 0
    cp      $0b             ; czy znak to 0b  (FF - form feed)              ;[0591] fe 0b
    jr      z,PRINTER_FORM_FEED_2       ; tak -  wysuń do następnej strony  ;[0593] 28 0a
; --- A - znak != 0b
    cp      $0c             ; czy znak to 0c  (wydruk ciągły?)              ;[0595] fe 0c
    jr      nz,$05ad        ; nie - drukuj normalnie                        ;[0597] 20 14
; --- A - znak do wydruku to 0c
    xor     a               ; zerowanie                                     ;[0599] af
    or      (ix+$03)        ; linii na strone 0                             ;[059a] dd b6 03
    jr      z,$05ad         ; drukuj znak z c                               ;[059d] 28 0e
; --- A - 0b 
PRINTER_FORM_FEED_2                    
    ld      a,(ix+$03)      ; ilość linii na stronie                        ;[059f] dd 7e 03
    sub     (ix+$04)        ; odejmij ilośc już wydrukowanych               ;[05a2] dd 96 04
    ld      b,a             ; b - ilość pustych lini do wydruku             ;[05a5] 47
PRINTER_EMPTY_LINE_2
    call    SYS_PRINT_CRLF  ; drukuj pustą linię                            ;[05a6] cd e2 3a
    djnz    PRINTER_EMPTY_LINE_2    ; drukuj puste linie                    ;[05a9] 10 fb
    jr      PRINTER_END_NEWPAGE_2   ; powrót z wyzerowanie licznika linii   ;[05ab] 18 12

; --- A,C - znak do druku
                    call    $3ab6                           ;[05ad] cd b6 3a
    ld      a,c             ; a - znak który był wydrukowany                ;[05b0] 79
    cp      $0d             ; czy było to LF                                ;[05b1] fe 0d
    ret     nz              ; nie - powrót                                  ;[05b3] c0
; --- wydrukowano LF - zwiększ ilośc wydrukowanych linii
    inc     (ix+$04)        ; zwiększ ilość linii                           ;[05b4] dd 34 04
    ld      a,(ix+$04)      ; a - ile już wydrukowano                       ;[05b7] dd 7e 04
    cp      (ix+$03)        ; czy tyle ile jest zdefiniowane na stronę      ;[05ba] dd be 03
    ld      a,c             ; a - znak wydrukowany                          ;[05bd] 79
    ret     nz              ; nie - powrót                                  ;[05be] c0
PRINTER_END_NEWPAGE_2    
    ld      (ix+$04),0      ; zeruj ilość wydrukowanych linii                ;[05bf] dd 36
    ret     ;---------------  powrót                                         ;[05c3] c9
PRINTER_GET_STATUS_2
    in      a,($00)         ; odczyt portu drukarki                     ;[05c4] db 00
    and     $01             ; bit 0 - BUSY/READY                        ;[05c6] e6 01
    ret     ;---------------  powrót                                    ;[05c8] c9

                    push    bc                              ;[05c9] c5
                    push    hl                              ;[05ca] e5
                    ld      b,$04                           ;[05cb] 06 04
                    ld      hl,$7ad2                        ;[05cd] 21 d2 7a
                    ld      (hl),a                          ;[05d0] 77
                    inc     hl                              ;[05d1] 23
                    djnz    $05d0                           ;[05d2] 10 fc
                    pop     hl                              ;[05d4] e1
                    pop     bc                              ;[05d5] c1
                    ret                                     ;[05d6] c9

                    ld      hl,$7838                        ;[05d7] 21 38 78
                    bit     2,(hl)                          ;[05da] cb 56
                    jr      z,$05f3                         ;[05dc] 28 15
                    ld      d,a                             ;[05de] 57
                    ld      a,($783a)                       ;[05df] 3a 3a 78
                    or      a                               ;[05e2] b7
                    jr      z,$05f4                         ;[05e3] 28 0f
                    inc     a                               ;[05e5] 3c
                    ld      ($783a),a                       ;[05e6] 32 3a 78
                    cp      $2a                             ;[05e9] fe 2a
                    jr      z,$05ef                         ;[05eb] 28 02
                    xor     a                               ;[05ed] af
                    ret                                     ;[05ee] c9

                    res     2,(hl)                          ;[05ef] cb 96
                    xor     a                               ;[05f1] af
                    ret                                     ;[05f2] c9

                    ld      d,a                             ;[05f3] 57
                    ld      hl,$7838                        ;[05f4] 21 38 78
                    ld      a,(hl)                          ;[05f7] 7e
                    and     $18                             ;[05f8] e6 18
                    jr      nz,$0607                        ;[05fa] 20 0b
                    set     3,(hl)                          ;[05fc] cb de
                    xor     a                               ;[05fe] af
                    ld      ($7837),a                       ;[05ff] 32 37 78
                    ld      a,d                             ;[0602] 7a
                    ld      ($7836),a                       ;[0603] 32 36 78
                    ret                                     ;[0606] c9

                    bit     4,(hl)                          ;[0607] cb 66
                    jr      nz,$0635                        ;[0609] 20 2a
                    ld      a,($7836)                       ;[060b] 3a 36 78
                    cp      d                               ;[060e] ba
                    jr      nz,$0632                        ;[060f] 20 21
                    ld      bc,($7842)                      ;[0611] ed 4b 42 78
                    ld      hl,($7844)                      ;[0615] 2a 44 78
                    ld      a,e                             ;[0618] 7b
                    call    $2f35                           ;[0619] cd 35 2f
                    cp      d                               ;[061c] ba
                    jp      z,$2fd7                         ;[061d] ca d7 2f
                    cp      $00                             ;[0620] fe 00
                    jp      z,$2fd7                         ;[0622] ca d7 2f
                    ld      hl,$7838                        ;[0625] 21 38 78
                    set     3,(hl)                          ;[0628] cb de
                    set     4,(hl)                          ;[062a] cb e6
                    res     2,(hl)                          ;[062c] cb 96
                    ld      ($7837),a                       ;[062e] 32 37 78
                    ret                                     ;[0631] c9

                    ld      a,d                             ;[0632] 7a
                    jr      $0625                           ;[0633] 18 f0
                    ld      a,($7836)                       ;[0635] 3a 36 78
                    cp      d                               ;[0638] ba
                    jr      z,$0643                         ;[0639] 28 08
                    ld      a,($7837)                       ;[063b] 3a 37 78
                    cp      d                               ;[063e] ba
                    jr      z,$0643                         ;[063f] 28 02
                    xor     a                               ;[0641] af
                    ret                                     ;[0642] c9

                    ld      bc,($7842)                      ;[0643] ed 4b 42 78
                    ld      hl,($7844)                      ;[0647] 2a 44 78
                    ld      a,e                             ;[064a] 7b
                    call    $2f35                           ;[064b] cd 35 2f
                    cp      d                               ;[064e] ba
                    jr      z,$0656                         ;[064f] 28 05
                    cp      $00                             ;[0651] fe 00
                    jp      nz,$2fd7                        ;[0653] c2 d7 2f
                    ld      hl,$7838                        ;[0656] 21 38 78
                    set     3,(hl)                          ;[0659] cb de
                    res     4,(hl)                          ;[065b] cb a6
                    ld      a,($7836)                       ;[065d] 3a 36 78
                    cp      d                               ;[0660] ba
                    jr      nz,$0668                        ;[0661] 20 05
                    xor     a                               ;[0663] af
                    ld      ($7837),a                       ;[0664] 32 37 78
                    ret                                     ;[0667] c9

                    ld      a,($7837)                       ;[0668] 3a 37 78
                    ld      ($7836),a                       ;[066b] 32 36 78
                    jr      $0663                           ;[066e] 18 f3
                    set     2,(ix+$09)                      ;[0670] dd cb 09 d6

;*******************************************************************************
; Procedura inicjalizacji komputera.
; Od procedury SYS_RESET rózni sie tylko tym, że nie zeruje sprzętowego rejestru IO_LATCH
SYS_INIT_VARS
                    nop                                     ;[0674] 00
                    nop                                     ;[0675] 00
                    ld      hl,$06d2                        ;[0676] 21 d2 06
                    ld      de,$7800                        ;[0679] 11 00 78
                    ld      bc,$0036                        ;[067c] 01 36 00
                    ldir                                    ;[067f] ed b0
                    dec     a                               ;[0681] 3d
                    dec     a                               ;[0682] 3d
                    jr      nz,$0676                        ;[0683] 20 f1
                    ld      b,$27                           ;[0685] 06 27
                    ld      (de),a                          ;[0687] 12
                    inc     de                              ;[0688] 13
                    djnz    $0687                           ;[0689] 10 fc
                    jp      $0075                           ;[068b] c3 75 00
                    ld      hl,$4000                        ;[068e] 21 00 40
                    call    $06a4                           ;[0691] cd a4 06
                    ld      hl,$6000                        ;[0694] 21 00 60
                    call    $06a4                           ;[0697] cd a4 06
                    ld      hl,$8000                        ;[069a] 21 00 80
                    call    $06a4                           ;[069d] cd a4 06
                    ei                                      ;[06a0] fb
                    jp      $1a19                           ;[06a1] c3 19 1a
                    ld      a,$aa                           ;[06a4] 3e aa
                    cp      (hl)                            ;[06a6] be
                    inc     hl                              ;[06a7] 23
                    ret     nz                              ;[06a8] c0
                    cpl                                     ;[06a9] 2f
                    cp      (hl)                            ;[06aa] be
                    inc     hl                              ;[06ab] 23
                    ret     nz                              ;[06ac] c0
                    ld      a,$e7                           ;[06ad] 3e e7
                    cp      (hl)                            ;[06af] be
                    inc     hl                              ;[06b0] 23
                    ret     nz                              ;[06b1] c0
                    cpl                                     ;[06b2] 2f
                    cp      (hl)                            ;[06b3] be
                    inc     hl                              ;[06b4] 23
                    ret     nz                              ;[06b5] c0
                    ei                                      ;[06b6] fb
                    jp      (hl)                            ;[06b7] e9
                    ld      c,$02                           ;[06b8] 0e 02
                    call    $1a59                           ;[06ba] cd 59 1a
                    call    $34b8                           ;[06bd] cd b8 34
                    call    $18e3                           ;[06c0] cd e3 18
                    jr      z,$0685                         ;[06c3] 28 c0
                    rst     $28                             ;[06c5] ef
                    inc     l                               ;[06c6] 2c
                    jr      z,$06dd                         ;[06c7] 28 14
                    call    $34f1                           ;[06c9] cd f1 34
                    ld      bc,$1a18                        ;[06cc] 01 18 1a
                    jp      $19ae                           ;[06cf] c3 ae 19
                    jp      $1c96                           ;[06d2] c3 96 1c
                    jp      $1d78                           ;[06d5] c3 78 1d
                    jp      $1c90                           ;[06d8] c3 90 1c
                    jp      $25d9                           ;[06db] c3 d9 25
                    ret                                     ;[06de] c9

                    nop                                     ;[06df] 00
                    nop                                     ;[06e0] 00
                    ret                                     ;[06e1] c9

                    nop                                     ;[06e2] 00
                    nop                                     ;[06e3] 00
                    ei                                      ;[06e4] fb
                    ret                                     ;[06e5] c9

                    nop                                     ;[06e6] 00
                    ld      bc,$2ef4                        ;[06e7] 01 f4 2e 
                    nop                                     ;[06ea] 00
                    nop                                     ;[06eb] 00
                    nop                                     ;[06ec] 00
                    ld      c,e                             ;[06ed] 4b
                    ld      c,c                             ;[06ee] 49
                    nop                                     ;[06ef] 00
                    nop                                     ;[06f0] 00
                    nop                                     ;[06f1] 00
                    nop                                     ;[06f2] 00
                    ld      (hl),b                          ;[06f3] 70
                    nop                                     ;[06f4] 00
                    nop                                     ;[06f5] 00
                    nop                                     ;[06f6] 00
                    ld      b,$8d                           ;[06f7] 06 8d
                    dec     b                               ;[06f9] 05
                    ld      b,e                             ;[06fa] 43
                    nop                                     ;[06fb] 00
                    nop                                     ;[06fc] 00
                    ld      d,b                             ;[06fd] 50
                    ld      d,d                             ;[06fe] 52
                    jp      $5000                           ;[06ff] c3 00 50
                    rst     $00                             ;[0702] c7
                    nop                                     ;[0703] 00
                    nop                                     ;[0704] 00
                    ld      a,$00                           ;[0705] 3e 00
                    ret                                     ;[0707] c9

                    ld      hl,$1380                        ;[0708] 21 80 13
                    call    $09c2                           ;[070b] cd c2 09
                    jr      $0716                           ;[070e] 18 06
                    call    $09c2                           ;[0710] cd c2 09
                    call    $0982                           ;[0713] cd 82 09
                    ld      a,b                             ;[0716] 78
                    or      a                               ;[0717] b7
                    ret     z                               ;[0718] c8
                    ld      a,($7924)                       ;[0719] 3a 24 79
                    or      a                               ;[071c] b7
                    jp      z,$09b4                         ;[071d] ca b4 09
                    sub     b                               ;[0720] 90
                    jr      nc,$072f                        ;[0721] 30 0c
                    cpl                                     ;[0723] 2f
                    inc     a                               ;[0724] 3c
                    ex      de,hl                           ;[0725] eb
                    call    $09a4                           ;[0726] cd a4 09
                    ex      de,hl                           ;[0729] eb
                    call    $09b4                           ;[072a] cd b4 09
                    pop     bc                              ;[072d] c1
                    pop     de                              ;[072e] d1
                    cp      $19                             ;[072f] fe 19
                    ret     nc                              ;[0731] d0
                    push    af                              ;[0732] f5
                    call    $09df                           ;[0733] cd df 09
                    ld      h,a                             ;[0736] 67
                    pop     af                              ;[0737] f1
                    call    $07d7                           ;[0738] cd d7 07
                    or      h                               ;[073b] b4
                    ld      hl,$7921                        ;[073c] 21 21 79
                    jp      p,$0754                         ;[073f] f2 54 07
                    call    $07b7                           ;[0742] cd b7 07
                    jp      nc,$0796                        ;[0745] d2 96 07
                    inc     hl                              ;[0748] 23
                    inc     (hl)                            ;[0749] 34
                    jp      z,$07b2                         ;[074a] ca b2 07
                    ld      l,$01                           ;[074d] 2e 01
                    call    $07eb                           ;[074f] cd eb 07
                    jr      $0796                           ;[0752] 18 42
                    xor     a                               ;[0754] af
                    sub     b                               ;[0755] 90
                    ld      b,a                             ;[0756] 47
                    ld      a,(hl)                          ;[0757] 7e
                    sbc     e                               ;[0758] 9b
                    ld      e,a                             ;[0759] 5f
                    inc     hl                              ;[075a] 23
                    ld      a,(hl)                          ;[075b] 7e
                    sbc     d                               ;[075c] 9a
                    ld      d,a                             ;[075d] 57
                    inc     hl                              ;[075e] 23
                    ld      a,(hl)                          ;[075f] 7e
                    sbc     c                               ;[0760] 99
                    ld      c,a                             ;[0761] 4f
                    call    c,$07c3                         ;[0762] dc c3 07
                    ld      l,b                             ;[0765] 68
                    ld      h,e                             ;[0766] 63
                    xor     a                               ;[0767] af
                    ld      b,a                             ;[0768] 47
                    ld      a,c                             ;[0769] 79
                    or      a                               ;[076a] b7
                    jr      nz,$0785                        ;[076b] 20 18
                    ld      c,d                             ;[076d] 4a
                    ld      d,h                             ;[076e] 54
                    ld      h,l                             ;[076f] 65
                    ld      l,a                             ;[0770] 6f
                    ld      a,b                             ;[0771] 78
                    sub     $08                             ;[0772] d6 08
                    cp      $e0                             ;[0774] fe e0
                    jr      nz,$0768                        ;[0776] 20 f0
                    xor     a                               ;[0778] af
                    ld      ($7924),a                       ;[0779] 32 24 79
                    ret                                     ;[077c] c9

                    dec     b                               ;[077d] 05
                    add     hl,hl                           ;[077e] 29
                    ld      a,d                             ;[077f] 7a
                    rla                                     ;[0780] 17
                    ld      d,a                             ;[0781] 57
                    ld      a,c                             ;[0782] 79
                    adc     a                               ;[0783] 8f
                    ld      c,a                             ;[0784] 4f
                    jp      p,$077d                         ;[0785] f2 7d 07
                    ld      a,b                             ;[0788] 78
                    ld      e,h                             ;[0789] 5c
                    ld      b,l                             ;[078a] 45
                    or      a                               ;[078b] b7
                    jr      z,$0796                         ;[078c] 28 08
                    ld      hl,$7924                        ;[078e] 21 24 79
                    add     (hl)                            ;[0791] 86
                    ld      (hl),a                          ;[0792] 77
                    jr      nc,$0778                        ;[0793] 30 e3
                    ret     z                               ;[0795] c8
                    ld      a,b                             ;[0796] 78
                    ld      hl,$7924                        ;[0797] 21 24 79
                    or      a                               ;[079a] b7
                    call    m,$07a8                         ;[079b] fc a8 07
                    ld      b,(hl)                          ;[079e] 46
                    inc     hl                              ;[079f] 23
                    ld      a,(hl)                          ;[07a0] 7e
                    and     $80                             ;[07a1] e6 80
                    xor     c                               ;[07a3] a9
                    ld      c,a                             ;[07a4] 4f
                    jp      $09b4                           ;[07a5] c3 b4 09
                    inc     e                               ;[07a8] 1c
                    ret     nz                              ;[07a9] c0
                    inc     d                               ;[07aa] 14
                    ret     nz                              ;[07ab] c0
                    inc     c                               ;[07ac] 0c
                    ret     nz                              ;[07ad] c0
                    ld      c,$80                           ;[07ae] 0e 80
                    inc     (hl)                            ;[07b0] 34
                    ret     nz                              ;[07b1] c0
                    ld      e,$0a                           ;[07b2] 1e 0a
                    jp      $19a2                           ;[07b4] c3 a2 19
                    ld      a,(hl)                          ;[07b7] 7e
                    add     e                               ;[07b8] 83
                    ld      e,a                             ;[07b9] 5f
                    inc     hl                              ;[07ba] 23
                    ld      a,(hl)                          ;[07bb] 7e
                    adc     d                               ;[07bc] 8a
                    ld      d,a                             ;[07bd] 57
                    inc     hl                              ;[07be] 23
                    ld      a,(hl)                          ;[07bf] 7e
                    adc     c                               ;[07c0] 89
                    ld      c,a                             ;[07c1] 4f
                    ret                                     ;[07c2] c9

                    ld      hl,$7925                        ;[07c3] 21 25 79
                    ld      a,(hl)                          ;[07c6] 7e
                    cpl                                     ;[07c7] 2f
                    ld      (hl),a                          ;[07c8] 77
                    xor     a                               ;[07c9] af
                    ld      l,a                             ;[07ca] 6f
                    sub     b                               ;[07cb] 90
                    ld      b,a                             ;[07cc] 47
                    ld      a,l                             ;[07cd] 7d
                    sbc     e                               ;[07ce] 9b
                    ld      e,a                             ;[07cf] 5f
                    ld      a,l                             ;[07d0] 7d
                    sbc     d                               ;[07d1] 9a
                    ld      d,a                             ;[07d2] 57
                    ld      a,l                             ;[07d3] 7d
                    sbc     c                               ;[07d4] 99
                    ld      c,a                             ;[07d5] 4f
                    ret                                     ;[07d6] c9

                    ld      b,$00                           ;[07d7] 06 00
                    sub     $08                             ;[07d9] d6 08
                    jr      c,$07e4                         ;[07db] 38 07
                    ld      b,e                             ;[07dd] 43
                    ld      e,d                             ;[07de] 5a
                    ld      d,c                             ;[07df] 51
                    ld      c,$00                           ;[07e0] 0e 00
                    jr      $07d9                           ;[07e2] 18 f5
                    add     $09                             ;[07e4] c6 09
                    ld      l,a                             ;[07e6] 6f
                    xor     a                               ;[07e7] af
                    dec     l                               ;[07e8] 2d
                    ret     z                               ;[07e9] c8
                    ld      a,c                             ;[07ea] 79
                    rra                                     ;[07eb] 1f
                    ld      c,a                             ;[07ec] 4f
                    ld      a,d                             ;[07ed] 7a
                    rra                                     ;[07ee] 1f
                    ld      d,a                             ;[07ef] 57
                    ld      a,e                             ;[07f0] 7b
                    rra                                     ;[07f1] 1f
                    ld      e,a                             ;[07f2] 5f
                    ld      a,b                             ;[07f3] 78
                    rra                                     ;[07f4] 1f
                    ld      b,a                             ;[07f5] 47
                    jr      $07e7                           ;[07f6] 18 ef
                    nop                                     ;[07f8] 00
                    nop                                     ;[07f9] 00
                    nop                                     ;[07fa] 00
                    add     c                               ;[07fb] 81
                    inc     bc                              ;[07fc] 03
                    xor     d                               ;[07fd] aa
                    ld      d,(hl)                          ;[07fe] 56
                    add     hl,de                           ;[07ff] 19
                    add     b                               ;[0800] 80
                    pop     af                              ;[0801] f1
                    ld      ($8076),hl                      ;[0802] 22 76 80
                    ld      b,l                             ;[0805] 45
                    xor     d                               ;[0806] aa
                    jr      c,$078b                         ;[0807] 38 82


;*********************************************************************************************************************
; LOG
;BAS_CODE_LOG        equ     $df
MATH_S_LOG_ACC:
                    call    $0955                           ;[0809] cd 55 09
                    or      a                               ;[080c] b7
                    jp      pe,$1e4a                        ;[080d] ea 4a 1e
                    ld      hl,$7924                        ;[0810] 21 24 79
                    ld      a,(hl)                          ;[0813] 7e
                    ld      bc,$8035                        ;[0814] 01 35 80
                    ld      de,$04f3                        ;[0817] 11 f3 04
                    sub     b                               ;[081a] 90
                    push    af                              ;[081b] f5
                    ld      (hl),b                          ;[081c] 70
                    push    de                              ;[081d] d5
                    push    bc                              ;[081e] c5
                    call    $0716                           ;[081f] cd 16 07
                    pop     bc                              ;[0822] c1
                    pop     de                              ;[0823] d1
                    inc     b                               ;[0824] 04
                    call    $08a2                           ;[0825] cd a2 08
                    ld      hl,$07f8                        ;[0828] 21 f8 07
                    call    $0710                           ;[082b] cd 10 07
                    ld      hl,$07fc                        ;[082e] 21 fc 07
                    call    $149a                           ;[0831] cd 9a 14
                    ld      bc,$8080                        ;[0834] 01 80 80
                    ld      de,$0000                        ;[0837] 11 00 00
                    call    $0716                           ;[083a] cd 16 07
                    pop     af                              ;[083d] f1
                    call    $0f89                           ;[083e] cd 89 0f
                    ld      bc,$8031                        ;[0841] 01 31 80
                    ld      de,$7218                        ;[0844] 11 18 72
                    call    $0955                           ;[0847] cd 55 09
                    ret     z                               ;[084a] c8
                    ld      l,$00                           ;[084b] 2e 00
                    call    $0914                           ;[084d] cd 14 09
                    ld      a,c                             ;[0850] 79
                    ld      ($794f),a                       ;[0851] 32 4f 79
                    ex      de,hl                           ;[0854] eb
                    ld      ($7950),hl                      ;[0855] 22 50 79
                    ld      bc,$0000                        ;[0858] 01 00 00
                    ld      d,b                             ;[085b] 50
                    ld      e,b                             ;[085c] 58
                    ld      hl,$0765                        ;[085d] 21 65 07
                    push    hl                              ;[0860] e5
                    ld      hl,$0869                        ;[0861] 21 69 08
                    push    hl                              ;[0864] e5
                    push    hl                              ;[0865] e5
                    ld      hl,$7921                        ;[0866] 21 21 79
                    ld      a,(hl)                          ;[0869] 7e
                    inc     hl                              ;[086a] 23
                    or      a                               ;[086b] b7
                    jr      z,$0892                         ;[086c] 28 24
                    push    hl                              ;[086e] e5
                    ld      l,$08                           ;[086f] 2e 08
                    rra                                     ;[0871] 1f
                    ld      h,a                             ;[0872] 67
                    ld      a,c                             ;[0873] 79
                    jr      nc,$0881                        ;[0874] 30 0b
                    push    hl                              ;[0876] e5
                    ld      hl,($7950)                      ;[0877] 2a 50 79
                    add     hl,de                           ;[087a] 19
                    ex      de,hl                           ;[087b] eb
                    pop     hl                              ;[087c] e1
                    ld      a,($794f)                       ;[087d] 3a 4f 79
                    adc     c                               ;[0880] 89
                    rra                                     ;[0881] 1f
                    ld      c,a                             ;[0882] 4f
                    ld      a,d                             ;[0883] 7a
                    rra                                     ;[0884] 1f
                    ld      d,a                             ;[0885] 57
                    ld      a,e                             ;[0886] 7b
                    rra                                     ;[0887] 1f
                    ld      e,a                             ;[0888] 5f
                    ld      a,b                             ;[0889] 78
                    rra                                     ;[088a] 1f
                    ld      b,a                             ;[088b] 47
                    dec     l                               ;[088c] 2d
                    ld      a,h                             ;[088d] 7c
                    jr      nz,$0871                        ;[088e] 20 e1
                    pop     hl                              ;[0890] e1
                    ret                                     ;[0891] c9

                    ld      b,e                             ;[0892] 43
                    ld      e,d                             ;[0893] 5a
                    ld      d,c                             ;[0894] 51
                    ld      c,a                             ;[0895] 4f
                    ret                                     ;[0896] c9

                    call    $09a4                           ;[0897] cd a4 09
                    ld      hl,$0dd8                        ;[089a] 21 d8 0d
                    call    $09b1                           ;[089d] cd b1 09
                    pop     bc                              ;[08a0] c1
                    pop     de                              ;[08a1] d1
                    call    $0955                           ;[08a2] cd 55 09
                    jp      z,$199a                         ;[08a5] ca 9a 19
                    ld      l,$ff                           ;[08a8] 2e ff
                    call    $0914                           ;[08aa] cd 14 09
                    inc     (hl)                            ;[08ad] 34
                    inc     (hl)                            ;[08ae] 34
                    dec     hl                              ;[08af] 2b
                    ld      a,(hl)                          ;[08b0] 7e
                    ld      ($7889),a                       ;[08b1] 32 89 78
                    dec     hl                              ;[08b4] 2b
                    ld      a,(hl)                          ;[08b5] 7e
                    ld      ($7885),a                       ;[08b6] 32 85 78
                    dec     hl                              ;[08b9] 2b
                    ld      a,(hl)                          ;[08ba] 7e
                    ld      ($7881),a                       ;[08bb] 32 81 78
                    ld      b,c                             ;[08be] 41
                    ex      de,hl                           ;[08bf] eb
                    xor     a                               ;[08c0] af
                    ld      c,a                             ;[08c1] 4f
                    ld      d,a                             ;[08c2] 57
                    ld      e,a                             ;[08c3] 5f
                    ld      ($788c),a                       ;[08c4] 32 8c 78
                    push    hl                              ;[08c7] e5
                    push    bc                              ;[08c8] c5
                    ld      a,l                             ;[08c9] 7d
                    call    $7880                           ;[08ca] cd 80 78
                    sbc     $00                             ;[08cd] de 00
                    ccf                                     ;[08cf] 3f
                    jr      nc,$08d9                        ;[08d0] 30 07
                    ld      ($788c),a                       ;[08d2] 32 8c 78
                    pop     af                              ;[08d5] f1
                    pop     af                              ;[08d6] f1
                    scf                                     ;[08d7] 37
                    jp      nc,$e1c1                        ;[08d8] d2 c1 e1
                    ld      a,c                             ;[08db] 79
                    inc     a                               ;[08dc] 3c
                    dec     a                               ;[08dd] 3d
                    rra                                     ;[08de] 1f
                    jp      m,$0797                         ;[08df] fa 97 07
                    rla                                     ;[08e2] 17
                    ld      a,e                             ;[08e3] 7b
                    rla                                     ;[08e4] 17
                    ld      e,a                             ;[08e5] 5f
                    ld      a,d                             ;[08e6] 7a
                    rla                                     ;[08e7] 17
                    ld      d,a                             ;[08e8] 57
                    ld      a,c                             ;[08e9] 79
                    rla                                     ;[08ea] 17
                    ld      c,a                             ;[08eb] 4f
                    add     hl,hl                           ;[08ec] 29
                    ld      a,b                             ;[08ed] 78
                    rla                                     ;[08ee] 17
                    ld      b,a                             ;[08ef] 47
                    ld      a,($788c)                       ;[08f0] 3a 8c 78
                    rla                                     ;[08f3] 17
                    ld      ($788c),a                       ;[08f4] 32 8c 78
                    ld      a,c                             ;[08f7] 79
                    or      d                               ;[08f8] b2
                    or      e                               ;[08f9] b3
                    jr      nz,$08c7                        ;[08fa] 20 cb
                    push    hl                              ;[08fc] e5
                    ld      hl,$7924                        ;[08fd] 21 24 79
                    dec     (hl)                            ;[0900] 35
                    pop     hl                              ;[0901] e1
                    jr      nz,$08c7                        ;[0902] 20 c3
                    jp      $07b2                           ;[0904] c3 b2 07
                    ld      a,$ff                           ;[0907] 3e ff
                    ld      l,$af                           ;[0909] 2e af
                    ld      hl,$792d                        ;[090b] 21 2d 79
                    ld      c,(hl)                          ;[090e] 4e
                    inc     hl                              ;[090f] 23
                    xor     (hl)                            ;[0910] ae
                    ld      b,a                             ;[0911] 47
                    ld      l,$00                           ;[0912] 2e 00
                    ld      a,b                             ;[0914] 78
                    or      a                               ;[0915] b7
                    jr      z,$0937                         ;[0916] 28 1f
                    ld      a,l                             ;[0918] 7d
                    ld      hl,$7924                        ;[0919] 21 24 79
                    xor     (hl)                            ;[091c] ae
                    add     b                               ;[091d] 80
                    ld      b,a                             ;[091e] 47
                    rra                                     ;[091f] 1f
                    xor     b                               ;[0920] a8
                    ld      a,b                             ;[0921] 78
                    jp      p,$0936                         ;[0922] f2 36 09
                    add     $80                             ;[0925] c6 80
                    ld      (hl),a                          ;[0927] 77
                    jp      z,$0890                         ;[0928] ca 90 08
                    call    $09df                           ;[092b] cd df 09
                    ld      (hl),a                          ;[092e] 77
                    dec     hl                              ;[092f] 2b
                    ret                                     ;[0930] c9

                    call    $0955                           ;[0931] cd 55 09
                    cpl                                     ;[0934] 2f
                    pop     hl                              ;[0935] e1
                    or      a                               ;[0936] b7
                    pop     hl                              ;[0937] e1
                    jp      p,$0778                         ;[0938] f2 78 07
                    jp      $07b2                           ;[093b] c3 b2 07
                    call    $09bf                           ;[093e] cd bf 09
                    ld      a,b                             ;[0941] 78
                    or      a                               ;[0942] b7
                    ret     z                               ;[0943] c8
                    add     $02                             ;[0944] c6 02
                    jp      c,$07b2                         ;[0946] da b2 07
                    ld      b,a                             ;[0949] 47
                    call    $0716                           ;[094a] cd 16 07
                    ld      hl,$7924                        ;[094d] 21 24 79
                    inc     (hl)                            ;[0950] 34
                    ret     nz                              ;[0951] c0
                    jp      $07b2                           ;[0952] c3 b2 07
                    ld      a,($7924)                       ;[0955] 3a 24 79
                    or      a                               ;[0958] b7
                    ret     z                               ;[0959] c8
                    ld      a,($7923)                       ;[095a] 3a 23 79
                    cp      $2f                             ;[095d] fe 2f
                    rla                                     ;[095f] 17
                    sbc     a                               ;[0960] 9f
                    ret     nz                              ;[0961] c0
                    inc     a                               ;[0962] 3c
                    ret                                     ;[0963] c9

                    ld      b,$88                           ;[0964] 06 88
                    ld      de,$0000                        ;[0966] 11 00 00
                    ld      hl,$7924                        ;[0969] 21 24 79
                    ld      c,a                             ;[096c] 4f
                    ld      (hl),b                          ;[096d] 70
                    ld      b,$00                           ;[096e] 06 00
                    inc     hl                              ;[0970] 23
                    ld      (hl),$80                        ;[0971] 36 80
                    rla                                     ;[0973] 17
                    jp      $0762                           ;[0974] c3 62 07

 ;*********************************************************************************************************************
; ABS 
;BAS_CODE_ABS        equ     $d9
MATH_ISD_ABS_ACC:

                    call    $0994                           ;[0977] cd 94 09
                    ret     p                               ;[097a] f0
                    rst     $20                             ;[097b] e7
                    jp      m,$0c5b                         ;[097c] fa 5b 0c
                    jp      z,$0af6                         ;[097f] ca f6 0a
                    ld      hl,$7923                        ;[0982] 21 23 79
                    ld      a,(hl)                          ;[0985] 7e
                    xor     $80                             ;[0986] ee 80
                    ld      (hl),a                          ;[0988] 77
                    ret                                     ;[0989] c9

;*********************************************************************************************************************
; SGN
;BAS_CODE_SGN        equ     $d7
MATH_ISD_SGN_ACC:
                    call    $0994                           ;[098a] cd 94 09
                    ld      l,a                             ;[098d] 6f
                    rla                                     ;[098e] 17
                    sbc     a                               ;[098f] 9f
                    ld      h,a                             ;[0990] 67
                    jp      $0a9a                           ;[0991] c3 9a 0a
                    rst     $20                             ;[0994] e7
                    jp      z,$0af6                         ;[0995] ca f6 0a



                    jp      p,$0955                         ;[0998] f2 55 09
                    ld      hl,($7921)                      ;[099b] 2a 21 79
                    ld      a,h                             ;[099e] 7c
                    or      l                               ;[099f] b5
                    ret     z                               ;[09a0] c8
                    ld      a,h                             ;[09a1] 7c
                    jr      $095f                           ;[09a2] 18 bb
                    ex      de,hl                           ;[09a4] eb
                    ld      hl,($7921)                      ;[09a5] 2a 21 79
                    ex      (sp),hl                         ;[09a8] e3
                    push    hl                              ;[09a9] e5
                    ld      hl,($7923)                      ;[09aa] 2a 23 79
                    ex      (sp),hl                         ;[09ad] e3
                    push    hl                              ;[09ae] e5
                    ex      de,hl                           ;[09af] eb
                    ret                                     ;[09b0] c9

                    call    $09c2                           ;[09b1] cd c2 09
                    ex      de,hl                           ;[09b4] eb
                    ld      ($7921),hl                      ;[09b5] 22 21 79
                    ld      h,b                             ;[09b8] 60
                    ld      l,c                             ;[09b9] 69
                    ld      ($7923),hl                      ;[09ba] 22 23 79
                    ex      de,hl                           ;[09bd] eb
                    ret                                     ;[09be] c9

                    ld      hl,$7921                        ;[09bf] 21 21 79
                    ld      e,(hl)                          ;[09c2] 5e
                    inc     hl                              ;[09c3] 23
                    ld      d,(hl)                          ;[09c4] 56
                    inc     hl                              ;[09c5] 23
                    ld      c,(hl)                          ;[09c6] 4e
                    inc     hl                              ;[09c7] 23
                    ld      b,(hl)                          ;[09c8] 46
                    inc     hl                              ;[09c9] 23
                    ret                                     ;[09ca] c9

                    ld      de,$7921                        ;[09cb] 11 21 79
                    ld      b,$04                           ;[09ce] 06 04
                    jr      SYS_MOVE_DE_HL_B                     ;[09d0] 18 05
                    ex      de,hl                           ;[09d2] eb
                    ld      a,($78af)                       ;[09d3] 3a af 78

;DATA MOVE
;DE=source location. HL=destination location. A=how much to move.
;       LD DE,src
;       LD HL,dst
;       LD A,amt
;       CALL 09D6h
SYS_MOVE_DE_HL_A
                    ld      b,a                             ;[09d6] 47
SYS_MOVE_DE_HL_B         ld      a,(de)                          ;[09d7] 1a
                    ld      (hl),a                          ;[09d8] 77
                    inc     de                              ;[09d9] 13
                    inc     hl                              ;[09da] 23
                    dec     b                               ;[09db] 05
                    jr      nz,SYS_MOVE_DE_HL_B                  ;[09dc] 20 f9
                    ret                                     ;[09de] c9

                    ld      hl,$7923                        ;[09df] 21 23 79
                    ld      a,(hl)                          ;[09e2] 7e
                    rlca                                    ;[09e3] 07
                    scf                                     ;[09e4] 37
                    rra                                     ;[09e5] 1f
                    ld      (hl),a                          ;[09e6] 77
                    ccf                                     ;[09e7] 3f
                    rra                                     ;[09e8] 1f
                    inc     hl                              ;[09e9] 23
                    inc     hl                              ;[09ea] 23
                    ld      (hl),a                          ;[09eb] 77
                    ld      a,c                             ;[09ec] 79
                    rlca                                    ;[09ed] 07
                    scf                                     ;[09ee] 37
                    rra                                     ;[09ef] 1f
                    ld      c,a                             ;[09f0] 4f
                    rra                                     ;[09f1] 1f
                    xor     (hl)                            ;[09f2] ae
                    ret                                     ;[09f3] c9

                    ld      hl,$7927                        ;[09f4] 21 27 79
                    ld      de,$09d2                        ;[09f7] 11 d2 09
                    jr      $0a02                           ;[09fa] 18 06
                    ld      hl,$7927                        ;[09fc] 21 27 79
                    ld      de,$09d3                        ;[09ff] 11 d3 09
                    push    de                              ;[0a02] d5
                    ld      de,$7921                        ;[0a03] 11 21 79
                    rst     $20                             ;[0a06] e7
                    ret     c                               ;[0a07] d8
                    ld      de,$791d                        ;[0a08] 11 1d 79
                    ret                                     ;[0a0b] c9

                    ld      a,b                             ;[0a0c] 78
                    or      a                               ;[0a0d] b7
                    jp      z,$0955                         ;[0a0e] ca 55 09
                    ld      hl,$095e                        ;[0a11] 21 5e 09
                    push    hl                              ;[0a14] e5
                    call    $0955                           ;[0a15] cd 55 09
                    ld      a,c                             ;[0a18] 79
                    ret     z                               ;[0a19] c8
                    ld      hl,$7923                        ;[0a1a] 21 23 79
                    xor     (hl)                            ;[0a1d] ae
                    ld      a,c                             ;[0a1e] 79
                    ret     m                               ;[0a1f] f8
                    call    $0a26                           ;[0a20] cd 26 0a
                    rra                                     ;[0a23] 1f
                    xor     c                               ;[0a24] a9
                    ret                                     ;[0a25] c9

                    inc     hl                              ;[0a26] 23
                    ld      a,b                             ;[0a27] 78
                    cp      (hl)                            ;[0a28] be
                    ret     nz                              ;[0a29] c0
                    dec     hl                              ;[0a2a] 2b
                    ld      a,c                             ;[0a2b] 79
                    cp      (hl)                            ;[0a2c] be
                    ret     nz                              ;[0a2d] c0
                    dec     hl                              ;[0a2e] 2b
                    ld      a,d                             ;[0a2f] 7a
                    cp      (hl)                            ;[0a30] be
                    ret     nz                              ;[0a31] c0
                    dec     hl                              ;[0a32] 2b
                    ld      a,e                             ;[0a33] 7b
                    sub     (hl)                            ;[0a34] 96
                    ret     nz                              ;[0a35] c0
                    pop     hl                              ;[0a36] e1
                    pop     hl                              ;[0a37] e1
                    ret                                     ;[0a38] c9

                    ld      a,d                             ;[0a39] 7a
                    xor     h                               ;[0a3a] ac
                    ld      a,h                             ;[0a3b] 7c
                    jp      m,$095f                         ;[0a3c] fa 5f 09
                    cp      d                               ;[0a3f] ba
                    jp      nz,$0960                        ;[0a40] c2 60 09
                    ld      a,l                             ;[0a43] 7d
                    sub     e                               ;[0a44] 93
                    jp      nz,$0960                        ;[0a45] c2 60 09
                    ret                                     ;[0a48] c9

                    ld      hl,$7927                        ;[0a49] 21 27 79
                    call    $09d3                           ;[0a4c] cd d3 09
                    ld      de,$792e                        ;[0a4f] 11 2e 79
                    ld      a,(de)                          ;[0a52] 1a
                    or      a                               ;[0a53] b7
                    jp      z,$0955                         ;[0a54] ca 55 09
                    ld      hl,$095e                        ;[0a57] 21 5e 09
                    push    hl                              ;[0a5a] e5
                    call    $0955                           ;[0a5b] cd 55 09
                    dec     de                              ;[0a5e] 1b
                    ld      a,(de)                          ;[0a5f] 1a
                    ld      c,a                             ;[0a60] 4f
                    ret     z                               ;[0a61] c8
                    ld      hl,$7923                        ;[0a62] 21 23 79
                    xor     (hl)                            ;[0a65] ae
                    ld      a,c                             ;[0a66] 79
                    ret     m                               ;[0a67] f8
                    inc     de                              ;[0a68] 13
                    inc     hl                              ;[0a69] 23
                    ld      b,$08                           ;[0a6a] 06 08
                    ld      a,(de)                          ;[0a6c] 1a
                    sub     (hl)                            ;[0a6d] 96
                    jp      nz,$0a23                        ;[0a6e] c2 23 0a
                    dec     de                              ;[0a71] 1b
                    dec     hl                              ;[0a72] 2b
                    dec     b                               ;[0a73] 05
                    jr      nz,$0a6c                        ;[0a74] 20 f6
                    pop     bc                              ;[0a76] c1
                    ret                                     ;[0a77] c9

                    call    $0a4f                           ;[0a78] cd 4f 0a
                    jp      nz,$095e                        ;[0a7b] c2 5e 09
                    ret                                     ;[0a7e] c9


;*********************************************************************************************************************
; CINT
;BAS_CODE_CINT        equ     $ef
MATH_ISD_CINT_ACC:
                    rst     $20                             ;[0a7f] e7
                    ld      hl,($7921)                      ;[0a80] 2a 21 79
                    ret     m                               ;[0a83] f8
                    jp      z,$0af6                         ;[0a84] ca f6 0a
                    call    nc,$0ab9                        ;[0a87] d4 b9 0a
                    ld      hl,$07b2                        ;[0a8a] 21 b2 07
                    push    hl                              ;[0a8d] e5
                    ld      a,($7924)                       ;[0a8e] 3a 24 79
                    cp      $90                             ;[0a91] fe 90
                    jr      nc,$0aa3                        ;[0a93] 30 0e
                    call    $0afb                           ;[0a95] cd fb 0a
                    ex      de,hl                           ;[0a98] eb
                    pop     de                              ;[0a99] d1
                    ld      ($7921),hl                      ;[0a9a] 22 21 79
                    ld      a,$02                           ;[0a9d] 3e 02
                    ld      ($78af),a                       ;[0a9f] 32 af 78
                    ret                                     ;[0aa2] c9

                    ld      bc,$9080                        ;[0aa3] 01 80 90
                    ld      de,$0000                        ;[0aa6] 11 00 00
                    call    $0a0c                           ;[0aa9] cd 0c 0a
                    ret     nz                              ;[0aac] c0
                    ld      h,c                             ;[0aad] 61
                    ld      l,d                             ;[0aae] 6a
                    jr      $0a99                           ;[0aaf] 18 e8


;*********************************************************************************************************************
; CSNG
;BAS_CODE_CSNG        equ     $f0
MATH_ISD_CSNG_ACC:
                    rst     $20                             ;[0ab1] e7
                    ret     po                              ;[0ab2] e0
                    jp      m,$0acc                         ;[0ab3] fa cc 0a
                    jp      z,$0af6                         ;[0ab6] ca f6 0a
                    call    $09bf                           ;[0ab9] cd bf 09
                    call    $0aef                           ;[0abc] cd ef 0a
                    ld      a,b                             ;[0abf] 78
                    or      a                               ;[0ac0] b7
                    ret     z                               ;[0ac1] c8
                    call    $09df                           ;[0ac2] cd df 09
                    ld      hl,$7920                        ;[0ac5] 21 20 79
                    ld      b,(hl)                          ;[0ac8] 46
                    jp      $0796                           ;[0ac9] c3 96 07
                    ld      hl,($7921)                      ;[0acc] 2a 21 79
                    call    $0aef                           ;[0acf] cd ef 0a
                    ld      a,h                             ;[0ad2] 7c
                    ld      d,l                             ;[0ad3] 55
                    ld      e,$00                           ;[0ad4] 1e 00
                    ld      b,$90                           ;[0ad6] 06 90
                    jp      $0969                           ;[0ad8] c3 69 09


;*********************************************************************************************************************
; CDBL
;BAS_CODE_CDBL        equ     $f1
MATH_ISD_CDBL_ACC:
                    rst     $20                             ;[0adb] e7
                    ret     nc                              ;[0adc] d0
                    jp      z,$0af6                         ;[0add] ca f6 0a
                    call    m,$0acc                         ;[0ae0] fc cc 0a
                    ld      hl,$0000                        ;[0ae3] 21 00 00
                    ld      ($791d),hl                      ;[0ae6] 22 1d 79
                    ld      ($791f),hl                      ;[0ae9] 22 1f 79
                    ld      a,$08                           ;[0aec] 3e 08
                    ld      bc,$043e                        ;[0aee] 01 3e 04
                    jp      $0a9f                           ;[0af1] c3 9f 0a
                    rst     $20                             ;[0af4] e7
                    ret     z                               ;[0af5] c8
                    ld      e,$18                           ;[0af6] 1e 18
                    jp      $19a2                           ;[0af8] c3 a2 19
                    ld      b,a                             ;[0afb] 47
                    ld      c,a                             ;[0afc] 4f
                    ld      d,a                             ;[0afd] 57
                    ld      e,a                             ;[0afe] 5f
                    or      a                               ;[0aff] b7
                    ret     z                               ;[0b00] c8
                    push    hl                              ;[0b01] e5
                    call    $09bf                           ;[0b02] cd bf 09
                    call    $09df                           ;[0b05] cd df 09
                    xor     (hl)                            ;[0b08] ae
                    ld      h,a                             ;[0b09] 67
                    call    m,$0b1f                         ;[0b0a] fc 1f 0b
                    ld      a,$98                           ;[0b0d] 3e 98
                    sub     b                               ;[0b0f] 90
                    call    $07d7                           ;[0b10] cd d7 07
                    ld      a,h                             ;[0b13] 7c
                    rla                                     ;[0b14] 17
                    call    c,$07a8                         ;[0b15] dc a8 07
                    ld      b,$00                           ;[0b18] 06 00
                    call    c,$07c3                         ;[0b1a] dc c3 07
                    pop     hl                              ;[0b1d] e1
                    ret                                     ;[0b1e] c9

                    dec     de                              ;[0b1f] 1b
                    ld      a,d                             ;[0b20] 7a
                    and     e                               ;[0b21] a3
                    inc     a                               ;[0b22] 3c
                    ret     nz                              ;[0b23] c0
                    dec     bc                              ;[0b24] 0b
                    ret                                     ;[0b25] c9


;*********************************************************************************************************************
; FIX
;BAS_CODE_FIX        equ     $f2
MATH_ISD_FIX_ACC:
                    rst     $20                             ;[0b26] e7
                    ret     m                               ;[0b27] f8
                    call    $0955                           ;[0b28] cd 55 09
                    jp      p,MATH_ISD_INT_ACC                  ;[0b2b] f2 37 0b
                    call    $0982                           ;[0b2e] cd 82 09
                    call    MATH_ISD_INT_ACC                           ;[0b31] cd 37 0b
                    jp      $097b                           ;[0b34] c3 7b 09


;*********************************************************************************************************************
; INT
;BAS_CODE_INT        equ     $d8
MATH_ISD_INT_ACC:
                    rst     $20                             ;[0b37] e7
                    ret     m                               ;[0b38] f8
                    jr      nc,$0b59                        ;[0b39] 30 1e
                    jr      z,$0af6                         ;[0b3b] 28 b9
                    call    $0a8e                           ;[0b3d] cd 8e 0a
                    ld      hl,$7924                        ;[0b40] 21 24 79
                    ld      a,(hl)                          ;[0b43] 7e
                    cp      $98                             ;[0b44] fe 98
                    ld      a,($7921)                       ;[0b46] 3a 21 79
                    ret     nc                              ;[0b49] d0
                    ld      a,(hl)                          ;[0b4a] 7e
                    call    $0afb                           ;[0b4b] cd fb 0a
                    ld      (hl),$98                        ;[0b4e] 36 98
                    ld      a,e                             ;[0b50] 7b
                    push    af                              ;[0b51] f5
                    ld      a,c                             ;[0b52] 79
                    rla                                     ;[0b53] 17
                    call    $0762                           ;[0b54] cd 62 07
                    pop     af                              ;[0b57] f1
                    ret                                     ;[0b58] c9

                    ld      hl,$7924                        ;[0b59] 21 24 79
                    ld      a,(hl)                          ;[0b5c] 7e
                    cp      $90                             ;[0b5d] fe 90
                    jp      c,MATH_ISD_CINT_ACC                         ;[0b5f] da 7f 0a
                    jr      nz,$0b78                        ;[0b62] 20 14
                    ld      c,a                             ;[0b64] 4f
                    dec     hl                              ;[0b65] 2b
                    ld      a,(hl)                          ;[0b66] 7e
                    xor     $80                             ;[0b67] ee 80
                    ld      b,$06                           ;[0b69] 06 06
                    dec     hl                              ;[0b6b] 2b
                    or      (hl)                            ;[0b6c] b6
                    dec     b                               ;[0b6d] 05
                    jr      nz,$0b6b                        ;[0b6e] 20 fb
                    or      a                               ;[0b70] b7
                    ld      hl,$8000                        ;[0b71] 21 00 80
                    jp      z,$0a9a                         ;[0b74] ca 9a 0a
                    ld      a,c                             ;[0b77] 79
                    cp      $b8                             ;[0b78] fe b8
                    ret     nc                              ;[0b7a] d0
                    push    af                              ;[0b7b] f5
                    call    $09bf                           ;[0b7c] cd bf 09
                    call    $09df                           ;[0b7f] cd df 09
                    xor     (hl)                            ;[0b82] ae
                    dec     hl                              ;[0b83] 2b
                    ld      (hl),$b8                        ;[0b84] 36 b8
                    push    af                              ;[0b86] f5
                    call    m,$0ba0                         ;[0b87] fc a0 0b
                    ld      hl,$7923                        ;[0b8a] 21 23 79
                    ld      a,$b8                           ;[0b8d] 3e b8
                    sub     b                               ;[0b8f] 90
                    call    $0d69                           ;[0b90] cd 69 0d
                    pop     af                              ;[0b93] f1
                    call    m,$0d20                         ;[0b94] fc 20 0d
                    xor     a                               ;[0b97] af
                    ld      ($791c),a                       ;[0b98] 32 1c 79
                    pop     af                              ;[0b9b] f1
                    ret     nc                              ;[0b9c] d0
                    jp      $0cd8                           ;[0b9d] c3 d8 0c
                    ld      hl,$791d                        ;[0ba0] 21 1d 79
                    ld      a,(hl)                          ;[0ba3] 7e
                    dec     (hl)                            ;[0ba4] 35
                    or      a                               ;[0ba5] b7
                    inc     hl                              ;[0ba6] 23
                    jr      z,$0ba3                         ;[0ba7] 28 fa
                    ret                                     ;[0ba9] c9

                    push    hl                              ;[0baa] e5
                    ld      hl,$0000                        ;[0bab] 21 00 00
                    ld      a,b                             ;[0bae] 78
                    or      c                               ;[0baf] b1
                    jr      z,$0bc4                         ;[0bb0] 28 12
                    ld      a,$10                           ;[0bb2] 3e 10
                    add     hl,hl                           ;[0bb4] 29
                    jp      c,$273d                         ;[0bb5] da 3d 27
                    ex      de,hl                           ;[0bb8] eb
                    add     hl,hl                           ;[0bb9] 29
                    ex      de,hl                           ;[0bba] eb
                    jr      nc,$0bc1                        ;[0bbb] 30 04
                    add     hl,bc                           ;[0bbd] 09
                    jp      c,$273d                         ;[0bbe] da 3d 27
                    dec     a                               ;[0bc1] 3d
                    jr      nz,$0bb4                        ;[0bc2] 20 f0
                    ex      de,hl                           ;[0bc4] eb
                    pop     hl                              ;[0bc5] e1
                    ret                                     ;[0bc6] c9
;HL=DE-HL
;Subtract HL from DE. Result in HL.
;   LD HL,20
;   LD DE,100
;   CALL 0BC7h
MATH_I_SUB_DE_HL
                    ld      a,h                             ;[0bc7] 7c
                    rla                                     ;[0bc8] 17
                    sbc     a                               ;[0bc9] 9f
                    ld      b,a                             ;[0bca] 47
                    call    $0c51                           ;[0bcb] cd 51 0c
                    ld      a,c                             ;[0bce] 79
                    sbc     b                               ;[0bcf] 98
                    jr      $0bd5                           ;[0bd0] 18 03
;HL=DE+HL
;Add HL to DE. Result in HL.
; ??? Subtract HL from DE. Result in HL.
;   LD HL,20
;   LD DE,100
;   CALL 0BD2h
MATH_I_ADD_DE_HL
                    ld      a,h                             ;[0bd2] 7c
                    rla                                     ;[0bd3] 17
                    sbc     a                               ;[0bd4] 9f
                    ld      b,a                             ;[0bd5] 47
                    push    hl                              ;[0bd6] e5
                    ld      a,d                             ;[0bd7] 7a
                    rla                                     ;[0bd8] 17
                    sbc     a                               ;[0bd9] 9f
                    add     hl,de                           ;[0bda] 19
                    adc     b                               ;[0bdb] 88
                    rrca                                    ;[0bdc] 0f
                    xor     h                               ;[0bdd] ac
                    jp      p,$0a99                         ;[0bde] f2 99 0a
                    push    bc                              ;[0be1] c5
                    ex      de,hl                           ;[0be2] eb
                    call    $0acf                           ;[0be3] cd cf 0a
                    pop     af                              ;[0be6] f1
                    pop     hl                              ;[0be7] e1
                    call    $09a4                           ;[0be8] cd a4 09
                    ex      de,hl                           ;[0beb] eb
                    call    $0c6b                           ;[0bec] cd 6b 0c
                    jp      $0f8f                           ;[0bef] c3 8f 0f

;HL=DE*HL
;Multiply HL by DE. Result in HL.
; ??? Subtract HL from DE. Result in HL.
;   LD HL,20
;   LD DE,100
;   CALL 0BF2h
MATH_I_MUL_DE_HL
                    ld      a,h                             ;[0bf2] 7c
                    or      l                               ;[0bf3] b5
                    jp      z,$0a9a                         ;[0bf4] ca 9a 0a
                    push    hl                              ;[0bf7] e5
                    push    de                              ;[0bf8] d5
                    call    $0c45                           ;[0bf9] cd 45 0c
                    push    bc                              ;[0bfc] c5
                    ld      b,h                             ;[0bfd] 44
                    ld      c,l                             ;[0bfe] 4d
                    ld      hl,$0000                        ;[0bff] 21 00 00
                    ld      a,$10                           ;[0c02] 3e 10
                    add     hl,hl                           ;[0c04] 29
                    jr      c,$0c26                         ;[0c05] 38 1f
                    ex      de,hl                           ;[0c07] eb
                    add     hl,hl                           ;[0c08] 29
                    ex      de,hl                           ;[0c09] eb
                    jr      nc,$0c10                        ;[0c0a] 30 04
                    add     hl,bc                           ;[0c0c] 09
                    jp      c,$0c26                         ;[0c0d] da 26 0c
                    dec     a                               ;[0c10] 3d
                    jr      nz,$0c04                        ;[0c11] 20 f1
                    pop     bc                              ;[0c13] c1
                    pop     de                              ;[0c14] d1
                    ld      a,h                             ;[0c15] 7c
                    or      a                               ;[0c16] b7
                    jp      m,$0c1f                         ;[0c17] fa 1f 0c
                    pop     de                              ;[0c1a] d1
                    ld      a,b                             ;[0c1b] 78
                    jp      $0c4d                           ;[0c1c] c3 4d 0c
                    xor     $80                             ;[0c1f] ee 80
                    or      l                               ;[0c21] b5
                    jr      z,$0c37                         ;[0c22] 28 13
                    ex      de,hl                           ;[0c24] eb
                    ld      bc,$e1c1                        ;[0c25] 01 c1 e1
                    call    $0acf                           ;[0c28] cd cf 0a
                    pop     hl                              ;[0c2b] e1
                    call    $09a4                           ;[0c2c] cd a4 09
                    call    $0acf                           ;[0c2f] cd cf 0a
                    pop     bc                              ;[0c32] c1
                    pop     de                              ;[0c33] d1
                    jp      $0847                           ;[0c34] c3 47 08
                    ld      a,b                             ;[0c37] 78
                    or      a                               ;[0c38] b7
                    pop     bc                              ;[0c39] c1
                    jp      m,$0a9a                         ;[0c3a] fa 9a 0a
                    push    de                              ;[0c3d] d5
                    call    $0acf                           ;[0c3e] cd cf 0a
                    pop     de                              ;[0c41] d1
                    jp      $0982                           ;[0c42] c3 82 09
                    ld      a,h                             ;[0c45] 7c
                    xor     d                               ;[0c46] aa
                    ld      b,a                             ;[0c47] 47
                    call    $0c4c                           ;[0c48] cd 4c 0c
                    ex      de,hl                           ;[0c4b] eb
                    ld      a,h                             ;[0c4c] 7c
                    or      a                               ;[0c4d] b7
                    jp      p,$0a9a                         ;[0c4e] f2 9a 0a
                    xor     a                               ;[0c51] af
                    ld      c,a                             ;[0c52] 4f
                    sub     l                               ;[0c53] 95
                    ld      l,a                             ;[0c54] 6f
                    ld      a,c                             ;[0c55] 79
                    sbc     h                               ;[0c56] 9c
                    ld      h,a                             ;[0c57] 67
                    jp      $0a9a                           ;[0c58] c3 9a 0a
                    ld      hl,($7921)                      ;[0c5b] 2a 21 79
                    call    $0c51                           ;[0c5e] cd 51 0c
                    ld      a,h                             ;[0c61] 7c
                    xor     $80                             ;[0c62] ee 80
                    or      l                               ;[0c64] b5
                    ret     nz                              ;[0c65] c0
                    ex      de,hl                           ;[0c66] eb
                    call    $0aef                           ;[0c67] cd ef 0a
                    xor     a                               ;[0c6a] af
                    ld      b,$98                           ;[0c6b] 06 98
                    jp      $0969                           ;[0c6d] c3 69 09
                    ld      hl,$792d                        ;[0c70] 21 2d 79
                    ld      a,(hl)                          ;[0c73] 7e
                    xor     $80                             ;[0c74] ee 80
                    ld      (hl),a                          ;[0c76] 77
                    ld      hl,$792e                        ;[0c77] 21 2e 79
                    ld      a,(hl)                          ;[0c7a] 7e
                    or      a                               ;[0c7b] b7
                    ret     z                               ;[0c7c] c8
                    ld      b,a                             ;[0c7d] 47
                    dec     hl                              ;[0c7e] 2b
                    ld      c,(hl)                          ;[0c7f] 4e
                    ld      de,$7924                        ;[0c80] 11 24 79
                    ld      a,(de)                          ;[0c83] 1a
                    or      a                               ;[0c84] b7
                    jp      z,$09f4                         ;[0c85] ca f4 09
                    sub     b                               ;[0c88] 90
                    jr      nc,$0ca1                        ;[0c89] 30 16
                    cpl                                     ;[0c8b] 2f
                    inc     a                               ;[0c8c] 3c
                    push    af                              ;[0c8d] f5
                    ld      c,$08                           ;[0c8e] 0e 08
                    inc     hl                              ;[0c90] 23
                    push    hl                              ;[0c91] e5
                    ld      a,(de)                          ;[0c92] 1a
                    ld      b,(hl)                          ;[0c93] 46
                    ld      (hl),a                          ;[0c94] 77
                    ld      a,b                             ;[0c95] 78
                    ld      (de),a                          ;[0c96] 12
                    dec     de                              ;[0c97] 1b
                    dec     hl                              ;[0c98] 2b
                    dec     c                               ;[0c99] 0d
                    jr      nz,$0c92                        ;[0c9a] 20 f6
                    pop     hl                              ;[0c9c] e1
                    ld      b,(hl)                          ;[0c9d] 46
                    dec     hl                              ;[0c9e] 2b
                    ld      c,(hl)                          ;[0c9f] 4e
                    pop     af                              ;[0ca0] f1
                    cp      $39                             ;[0ca1] fe 39
                    ret     nc                              ;[0ca3] d0
                    push    af                              ;[0ca4] f5
                    call    $09df                           ;[0ca5] cd df 09
                    inc     hl                              ;[0ca8] 23
                    ld      (hl),$00                        ;[0ca9] 36 00
                    ld      b,a                             ;[0cab] 47
                    pop     af                              ;[0cac] f1
                    ld      hl,$792d                        ;[0cad] 21 2d 79
                    call    $0d69                           ;[0cb0] cd 69 0d
                    ld      a,($7926)                       ;[0cb3] 3a 26 79
                    ld      ($791c),a                       ;[0cb6] 32 1c 79
                    ld      a,b                             ;[0cb9] 78
                    or      a                               ;[0cba] b7
                    jp      p,$0ccf                         ;[0cbb] f2 cf 0c
                    call    $0d33                           ;[0cbe] cd 33 0d
                    jp      nc,$0d0e                        ;[0cc1] d2 0e 0d
                    ex      de,hl                           ;[0cc4] eb
                    inc     (hl)                            ;[0cc5] 34
                    jp      z,$07b2                         ;[0cc6] ca b2 07
                    call    $0d90                           ;[0cc9] cd 90 0d
                    jp      $0d0e                           ;[0ccc] c3 0e 0d
                    call    $0d45                           ;[0ccf] cd 45 0d
                    ld      hl,$7925                        ;[0cd2] 21 25 79
                    call    c,$0d57                         ;[0cd5] dc 57 0d
                    xor     a                               ;[0cd8] af
                    ld      b,a                             ;[0cd9] 47
                    ld      a,($7923)                       ;[0cda] 3a 23 79
                    or      a                               ;[0cdd] b7
                    jr      nz,$0cfe                        ;[0cde] 20 1e
                    ld      hl,$791c                        ;[0ce0] 21 1c 79
                    ld      c,$08                           ;[0ce3] 0e 08
                    ld      d,(hl)                          ;[0ce5] 56
                    ld      (hl),a                          ;[0ce6] 77
                    ld      a,d                             ;[0ce7] 7a
                    inc     hl                              ;[0ce8] 23
                    dec     c                               ;[0ce9] 0d
                    jr      nz,$0ce5                        ;[0cea] 20 f9
                    ld      a,b                             ;[0cec] 78
                    sub     $08                             ;[0ced] d6 08
                    cp      $c0                             ;[0cef] fe c0
                    jr      nz,$0cd9                        ;[0cf1] 20 e6
                    jp      $0778                           ;[0cf3] c3 78 07
                    dec     b                               ;[0cf6] 05
                    ld      hl,$791c                        ;[0cf7] 21 1c 79
                    call    $0d97                           ;[0cfa] cd 97 0d
                    or      a                               ;[0cfd] b7
                    jp      p,$0cf6                         ;[0cfe] f2 f6 0c
                    ld      a,b                             ;[0d01] 78
                    or      a                               ;[0d02] b7
                    jr      z,$0d0e                         ;[0d03] 28 09
                    ld      hl,$7924                        ;[0d05] 21 24 79
                    add     (hl)                            ;[0d08] 86
                    ld      (hl),a                          ;[0d09] 77
                    jp      nc,$0778                        ;[0d0a] d2 78 07
                    ret     z                               ;[0d0d] c8
                    ld      a,($791c)                       ;[0d0e] 3a 1c 79
                    or      a                               ;[0d11] b7
                    call    m,$0d20                         ;[0d12] fc 20 0d
                    ld      hl,$7925                        ;[0d15] 21 25 79
                    ld      a,(hl)                          ;[0d18] 7e
                    and     $80                             ;[0d19] e6 80
                    dec     hl                              ;[0d1b] 2b
                    dec     hl                              ;[0d1c] 2b
                    xor     (hl)                            ;[0d1d] ae
                    ld      (hl),a                          ;[0d1e] 77
                    ret                                     ;[0d1f] c9

                    ld      hl,$791d                        ;[0d20] 21 1d 79
                    ld      b,$07                           ;[0d23] 06 07
                    inc     (hl)                            ;[0d25] 34
                    ret     nz                              ;[0d26] c0
                    inc     hl                              ;[0d27] 23
                    dec     b                               ;[0d28] 05
                    jr      nz,$0d25                        ;[0d29] 20 fa
                    inc     (hl)                            ;[0d2b] 34
                    jp      z,$07b2                         ;[0d2c] ca b2 07
                    dec     hl                              ;[0d2f] 2b
                    ld      (hl),$80                        ;[0d30] 36 80
                    ret                                     ;[0d32] c9

                    ld      hl,$7927                        ;[0d33] 21 27 79
                    ld      de,$791d                        ;[0d36] 11 1d 79
                    ld      c,$07                           ;[0d39] 0e 07
                    xor     a                               ;[0d3b] af
                    ld      a,(de)                          ;[0d3c] 1a
                    adc     (hl)                            ;[0d3d] 8e
                    ld      (de),a                          ;[0d3e] 12
                    inc     de                              ;[0d3f] 13
                    inc     hl                              ;[0d40] 23
                    dec     c                               ;[0d41] 0d
                    jr      nz,$0d3c                        ;[0d42] 20 f8
                    ret                                     ;[0d44] c9

                    ld      hl,$7927                        ;[0d45] 21 27 79
                    ld      de,$791d                        ;[0d48] 11 1d 79
                    ld      c,$07                           ;[0d4b] 0e 07
                    xor     a                               ;[0d4d] af
                    ld      a,(de)                          ;[0d4e] 1a
                    sbc     (hl)                            ;[0d4f] 9e
                    ld      (de),a                          ;[0d50] 12
                    inc     de                              ;[0d51] 13
                    inc     hl                              ;[0d52] 23
                    dec     c                               ;[0d53] 0d
                    jr      nz,$0d4e                        ;[0d54] 20 f8
                    ret                                     ;[0d56] c9

                    ld      a,(hl)                          ;[0d57] 7e
                    cpl                                     ;[0d58] 2f
                    ld      (hl),a                          ;[0d59] 77
                    ld      hl,$791c                        ;[0d5a] 21 1c 79
                    ld      b,$08                           ;[0d5d] 06 08
                    xor     a                               ;[0d5f] af
                    ld      c,a                             ;[0d60] 4f
                    ld      a,c                             ;[0d61] 79
                    sbc     (hl)                            ;[0d62] 9e
                    ld      (hl),a                          ;[0d63] 77
                    inc     hl                              ;[0d64] 23
                    dec     b                               ;[0d65] 05
                    jr      nz,$0d61                        ;[0d66] 20 f9
                    ret                                     ;[0d68] c9

                    ld      (hl),c                          ;[0d69] 71
                    push    hl                              ;[0d6a] e5
                    sub     $08                             ;[0d6b] d6 08
                    jr      c,$0d7d                         ;[0d6d] 38 0e
                    pop     hl                              ;[0d6f] e1
                    push    hl                              ;[0d70] e5
                    ld      de,$0800                        ;[0d71] 11 00 08
                    ld      c,(hl)                          ;[0d74] 4e
                    ld      (hl),e                          ;[0d75] 73
                    ld      e,c                             ;[0d76] 59
                    dec     hl                              ;[0d77] 2b
                    dec     d                               ;[0d78] 15
                    jr      nz,$0d74                        ;[0d79] 20 f9
                    jr      $0d6b                           ;[0d7b] 18 ee
                    add     $09                             ;[0d7d] c6 09
                    ld      d,a                             ;[0d7f] 57
                    xor     a                               ;[0d80] af
                    pop     hl                              ;[0d81] e1
                    dec     d                               ;[0d82] 15
                    ret     z                               ;[0d83] c8
                    push    hl                              ;[0d84] e5
                    ld      e,$08                           ;[0d85] 1e 08
                    ld      a,(hl)                          ;[0d87] 7e
                    rra                                     ;[0d88] 1f
                    ld      (hl),a                          ;[0d89] 77
                    dec     hl                              ;[0d8a] 2b
                    dec     e                               ;[0d8b] 1d
                    jr      nz,$0d87                        ;[0d8c] 20 f9
                    jr      $0d80                           ;[0d8e] 18 f0
                    ld      hl,$7923                        ;[0d90] 21 23 79
                    ld      d,$01                           ;[0d93] 16 01
                    jr      $0d84                           ;[0d95] 18 ed
                    ld      c,$08                           ;[0d97] 0e 08
                    ld      a,(hl)                          ;[0d99] 7e
                    rla                                     ;[0d9a] 17
                    ld      (hl),a                          ;[0d9b] 77
                    inc     hl                              ;[0d9c] 23
                    dec     c                               ;[0d9d] 0d
                    jr      nz,$0d99                        ;[0d9e] 20 f9
                    ret                                     ;[0da0] c9

                    call    $0955                           ;[0da1] cd 55 09
                    ret     z                               ;[0da4] c8
                    call    $090a                           ;[0da5] cd 0a 09
                    call    $0e39                           ;[0da8] cd 39 0e
                    ld      (hl),c                          ;[0dab] 71
                    inc     de                              ;[0dac] 13
                    ld      b,$07                           ;[0dad] 06 07
                    ld      a,(de)                          ;[0daf] 1a
                    inc     de                              ;[0db0] 13
                    or      a                               ;[0db1] b7
                    push    de                              ;[0db2] d5
                    jr      z,$0dcc                         ;[0db3] 28 17
                    ld      c,$08                           ;[0db5] 0e 08
                    push    bc                              ;[0db7] c5
                    rra                                     ;[0db8] 1f
                    ld      b,a                             ;[0db9] 47
                    call    c,$0d33                         ;[0dba] dc 33 0d
                    call    $0d90                           ;[0dbd] cd 90 0d
                    ld      a,b                             ;[0dc0] 78
                    pop     bc                              ;[0dc1] c1
                    dec     c                               ;[0dc2] 0d
                    jr      nz,$0db7                        ;[0dc3] 20 f2
                    pop     de                              ;[0dc5] d1
                    dec     b                               ;[0dc6] 05
                    jr      nz,$0daf                        ;[0dc7] 20 e6
                    jp      $0cd8                           ;[0dc9] c3 d8 0c
                    ld      hl,$7923                        ;[0dcc] 21 23 79
                    call    $0d70                           ;[0dcf] cd 70 0d
                    jr      $0dc5                           ;[0dd2] 18 f1
                    nop                                     ;[0dd4] 00
                    nop                                     ;[0dd5] 00
                    nop                                     ;[0dd6] 00
                    nop                                     ;[0dd7] 00
                    nop                                     ;[0dd8] 00
                    nop                                     ;[0dd9] 00
                    jr      nz,$0d60                        ;[0dda] 20 84
                    ld      de,$0dd4                        ;[0ddc] 11 d4 0d
                    ld      hl,$7927                        ;[0ddf] 21 27 79
                    call    $09d3                           ;[0de2] cd d3 09
                    ld      a,($792e)                       ;[0de5] 3a 2e 79
                    or      a                               ;[0de8] b7
                    jp      z,$199a                         ;[0de9] ca 9a 19
                    call    $0907                           ;[0dec] cd 07 09
                    inc     (hl)                            ;[0def] 34
                    inc     (hl)                            ;[0df0] 34
                    call    $0e39                           ;[0df1] cd 39 0e
                    ld      hl,$7951                        ;[0df4] 21 51 79
                    ld      (hl),c                          ;[0df7] 71
                    ld      b,c                             ;[0df8] 41
                    ld      de,$794a                        ;[0df9] 11 4a 79
                    ld      hl,$7927                        ;[0dfc] 21 27 79
                    call    $0d4b                           ;[0dff] cd 4b 0d
                    ld      a,(de)                          ;[0e02] 1a
                    sbc     c                               ;[0e03] 99
                    ccf                                     ;[0e04] 3f
                    jr      c,$0e12                         ;[0e05] 38 0b
                    ld      de,$794a                        ;[0e07] 11 4a 79
                    ld      hl,$7927                        ;[0e0a] 21 27 79
                    call    $0d39                           ;[0e0d] cd 39 0d
                    xor     a                               ;[0e10] af
                    jp      c,$0412                         ;[0e11] da 12 04
                    ld      a,($7923)                       ;[0e14] 3a 23 79
                    inc     a                               ;[0e17] 3c
                    dec     a                               ;[0e18] 3d
                    rra                                     ;[0e19] 1f
                    jp      m,$0d11                         ;[0e1a] fa 11 0d
                    rla                                     ;[0e1d] 17
                    ld      hl,$791d                        ;[0e1e] 21 1d 79
                    ld      c,$07                           ;[0e21] 0e 07
                    call    $0d99                           ;[0e23] cd 99 0d
                    ld      hl,$794a                        ;[0e26] 21 4a 79
                    call    $0d97                           ;[0e29] cd 97 0d
                    ld      a,b                             ;[0e2c] 78
                    or      a                               ;[0e2d] b7
                    jr      nz,$0df9                        ;[0e2e] 20 c9
                    ld      hl,$7924                        ;[0e30] 21 24 79
                    dec     (hl)                            ;[0e33] 35
                    jr      nz,$0df9                        ;[0e34] 20 c3
                    jp      $07b2                           ;[0e36] c3 b2 07
                    ld      a,c                             ;[0e39] 79
                    ld      ($792d),a                       ;[0e3a] 32 2d 79
                    dec     hl                              ;[0e3d] 2b
                    ld      de,$7950                        ;[0e3e] 11 50 79
                    ld      bc,$0700                        ;[0e41] 01 00 07
                    ld      a,(hl)                          ;[0e44] 7e
                    ld      (de),a                          ;[0e45] 12
                    ld      (hl),c                          ;[0e46] 71
                    dec     de                              ;[0e47] 1b
                    dec     hl                              ;[0e48] 2b
                    dec     b                               ;[0e49] 05
                    jr      nz,$0e44                        ;[0e4a] 20 f8
                    ret                                     ;[0e4c] c9

                    call    $09fc                           ;[0e4d] cd fc 09
                    ex      de,hl                           ;[0e50] eb
                    dec     hl                              ;[0e51] 2b
                    ld      a,(hl)                          ;[0e52] 7e
                    or      a                               ;[0e53] b7
                    ret     z                               ;[0e54] c8
                    add     $02                             ;[0e55] c6 02
                    jp      c,$07b2                         ;[0e57] da b2 07
                    ld      (hl),a                          ;[0e5a] 77
                    push    hl                              ;[0e5b] e5
                    call    $0c77                           ;[0e5c] cd 77 0c
                    pop     hl                              ;[0e5f] e1
                    inc     (hl)                            ;[0e60] 34
                    ret     nz                              ;[0e61] c0
                    jp      $07b2                           ;[0e62] c3 b2 07
                    call    $0778                           ;[0e65] cd 78 07
                    call    $0aec                           ;[0e68] cd ec 0a
                    or      $af                             ;[0e6b] f6 af
                    ex      de,hl                           ;[0e6d] eb
                    ld      bc,$00ff                        ;[0e6e] 01 ff 00
                    ld      h,b                             ;[0e71] 60
                    ld      l,b                             ;[0e72] 68
                    call    z,$0a9a                         ;[0e73] cc 9a 0a
                    ex      de,hl                           ;[0e76] eb
                    ld      a,(hl)                          ;[0e77] 7e
                    cp      $2d                             ;[0e78] fe 2d
                    push    af                              ;[0e7a] f5
                    jp      z,$0e83                         ;[0e7b] ca 83 0e
                    cp      $2b                             ;[0e7e] fe 2b
                    jr      z,$0e83                         ;[0e80] 28 01
                    dec     hl                              ;[0e82] 2b
                    rst     $10                             ;[0e83] d7
                    jp      c,$0f29                         ;[0e84] da 29 0f
                    cp      $2e                             ;[0e87] fe 2e
                    jp      z,$0ee4                         ;[0e89] ca e4 0e
                    cp      $45                             ;[0e8c] fe 45
                    jr      z,$0ea4                         ;[0e8e] 28 14
                    cp      $25                             ;[0e90] fe 25
                    jp      z,$0eee                         ;[0e92] ca ee 0e
                    cp      $23                             ;[0e95] fe 23
                    jp      z,$0ef5                         ;[0e97] ca f5 0e
                    cp      $21                             ;[0e9a] fe 21
                    jp      z,$0ef6                         ;[0e9c] ca f6 0e
                    cp      $44                             ;[0e9f] fe 44
                    jr      nz,$0ec7                        ;[0ea1] 20 24
                    or      a                               ;[0ea3] b7
                    call    $0efb                           ;[0ea4] cd fb 0e
                    push    hl                              ;[0ea7] e5
                    ld      hl,$0ebd                        ;[0ea8] 21 bd 0e
                    ex      (sp),hl                         ;[0eab] e3
                    rst     $10                             ;[0eac] d7
                    dec     d                               ;[0ead] 15
                    cp      $ce                             ;[0eae] fe ce
                    ret     z                               ;[0eb0] c8
                    cp      $2d                             ;[0eb1] fe 2d
                    ret     z                               ;[0eb3] c8
                    inc     d                               ;[0eb4] 14
                    cp      $cd                             ;[0eb5] fe cd
                    ret     z                               ;[0eb7] c8
                    cp      $2b                             ;[0eb8] fe 2b
                    ret     z                               ;[0eba] c8
                    dec     hl                              ;[0ebb] 2b
                    pop     af                              ;[0ebc] f1
                    rst     $10                             ;[0ebd] d7
                    jp      c,$0f94                         ;[0ebe] da 94 0f
                    inc     d                               ;[0ec1] 14
                    jr      nz,$0ec7                        ;[0ec2] 20 03
                    xor     a                               ;[0ec4] af
                    sub     e                               ;[0ec5] 93
                    ld      e,a                             ;[0ec6] 5f
                    push    hl                              ;[0ec7] e5
                    ld      a,e                             ;[0ec8] 7b
                    sub     b                               ;[0ec9] 90
                    call    p,$0f0a                         ;[0eca] f4 0a 0f
                    call    m,$0f18                         ;[0ecd] fc 18 0f
                    jr      nz,$0eca                        ;[0ed0] 20 f8
                    pop     hl                              ;[0ed2] e1
                    pop     af                              ;[0ed3] f1
                    push    hl                              ;[0ed4] e5
                    call    z,$097b                         ;[0ed5] cc 7b 09
                    pop     hl                              ;[0ed8] e1
                    rst     $20                             ;[0ed9] e7
                    ret     pe                              ;[0eda] e8
                    push    hl                              ;[0edb] e5
                    ld      hl,$0890                        ;[0edc] 21 90 08
                    push    hl                              ;[0edf] e5
                    call    $0aa3                           ;[0ee0] cd a3 0a
                    ret                                     ;[0ee3] c9

                    rst     $20                             ;[0ee4] e7
                    inc     c                               ;[0ee5] 0c
                    jr      nz,$0ec7                        ;[0ee6] 20 df
                    call    c,$0efb                         ;[0ee8] dc fb 0e
                    jp      $0e83                           ;[0eeb] c3 83 0e
                    rst     $20                             ;[0eee] e7
                    jp      p,$1997                         ;[0eef] f2 97 19
                    inc     hl                              ;[0ef2] 23
                    jr      $0ec7                           ;[0ef3] 18 d2
                    or      a                               ;[0ef5] b7
                    call    $0efb                           ;[0ef6] cd fb 0e
                    jr      $0ef2                           ;[0ef9] 18 f7
                    push    hl                              ;[0efb] e5
                    push    de                              ;[0efc] d5
                    push    bc                              ;[0efd] c5
                    push    af                              ;[0efe] f5
                    call    z,MATH_ISD_CSNG_ACC                         ;[0eff] cc b1 0a
                    pop     af                              ;[0f02] f1
                    call    nz,MATH_ISD_CDBL_ACC                       ;[0f03] c4 db 0a
                    pop     bc                              ;[0f06] c1
                    pop     de                              ;[0f07] d1
                    pop     hl                              ;[0f08] e1
                    ret                                     ;[0f09] c9

                    ret     z                               ;[0f0a] c8
                    push    af                              ;[0f0b] f5
                    rst     $20                             ;[0f0c] e7
                    push    af                              ;[0f0d] f5
                    call    po,$093e                        ;[0f0e] e4 3e 09
                    pop     af                              ;[0f11] f1
                    call    pe,$0e4d                        ;[0f12] ec 4d 0e
                    pop     af                              ;[0f15] f1
                    dec     a                               ;[0f16] 3d
                    ret                                     ;[0f17] c9

                    push    de                              ;[0f18] d5
                    push    hl                              ;[0f19] e5
                    push    af                              ;[0f1a] f5
                    rst     $20                             ;[0f1b] e7
                    push    af                              ;[0f1c] f5
                    call    po,$0897                        ;[0f1d] e4 97 08
                    pop     af                              ;[0f20] f1
                    call    pe,$0ddc                        ;[0f21] ec dc 0d
                    pop     af                              ;[0f24] f1
                    pop     hl                              ;[0f25] e1
                    pop     de                              ;[0f26] d1
                    inc     a                               ;[0f27] 3c
                    ret                                     ;[0f28] c9

                    push    de                              ;[0f29] d5
                    ld      a,b                             ;[0f2a] 78
                    adc     c                               ;[0f2b] 89
                    ld      b,a                             ;[0f2c] 47
                    push    bc                              ;[0f2d] c5
                    push    hl                              ;[0f2e] e5
                    ld      a,(hl)                          ;[0f2f] 7e
                    sub     $30                             ;[0f30] d6 30
                    push    af                              ;[0f32] f5
                    rst     $20                             ;[0f33] e7
                    jp      p,$0f5d                         ;[0f34] f2 5d 0f
                    ld      hl,($7921)                      ;[0f37] 2a 21 79
                    ld      de,$0ccd                        ;[0f3a] 11 cd 0c
                    rst     $18                             ;[0f3d] df
                    jr      nc,$0f59                        ;[0f3e] 30 19
                    ld      d,h                             ;[0f40] 54
                    ld      e,l                             ;[0f41] 5d
                    add     hl,hl                           ;[0f42] 29
                    add     hl,hl                           ;[0f43] 29
                    add     hl,de                           ;[0f44] 19
                    add     hl,hl                           ;[0f45] 29
                    pop     af                              ;[0f46] f1
                    ld      c,a                             ;[0f47] 4f
                    add     hl,bc                           ;[0f48] 09
                    ld      a,h                             ;[0f49] 7c
                    or      a                               ;[0f4a] b7
                    jp      m,$0f57                         ;[0f4b] fa 57 0f
                    ld      ($7921),hl                      ;[0f4e] 22 21 79
                    pop     hl                              ;[0f51] e1
                    pop     bc                              ;[0f52] c1
                    pop     de                              ;[0f53] d1
                    jp      $0e83                           ;[0f54] c3 83 0e
                    ld      a,c                             ;[0f57] 79
                    push    af                              ;[0f58] f5
                    call    $0acc                           ;[0f59] cd cc 0a
                    scf                                     ;[0f5c] 37
                    jr      nc,$0f77                        ;[0f5d] 30 18
                    ld      bc,$9474                        ;[0f5f] 01 74 94
                    ld      de,$2400                        ;[0f62] 11 00 24
                    call    $0a0c                           ;[0f65] cd 0c 0a
                    jp      p,$0f74                         ;[0f68] f2 74 0f
                    call    $093e                           ;[0f6b] cd 3e 09
                    pop     af                              ;[0f6e] f1
                    call    $0f89                           ;[0f6f] cd 89 0f
                    jr      $0f51                           ;[0f72] 18 dd
                    call    $0ae3                           ;[0f74] cd e3 0a
                    call    $0e4d                           ;[0f77] cd 4d 0e
                    call    $09fc                           ;[0f7a] cd fc 09
                    pop     af                              ;[0f7d] f1
                    call    $0964                           ;[0f7e] cd 64 09
                    call    $0ae3                           ;[0f81] cd e3 0a
                    call    $0c77                           ;[0f84] cd 77 0c
                    jr      $0f51                           ;[0f87] 18 c8
                    call    $09a4                           ;[0f89] cd a4 09
                    call    $0964                           ;[0f8c] cd 64 09
                    pop     bc                              ;[0f8f] c1
                    pop     de                              ;[0f90] d1
                    jp      $0716                           ;[0f91] c3 16 07
                    ld      a,e                             ;[0f94] 7b
                    cp      $0a                             ;[0f95] fe 0a
                    jr      nc,$0fa2                        ;[0f97] 30 09
                    rlca                                    ;[0f99] 07
                    rlca                                    ;[0f9a] 07
                    add     e                               ;[0f9b] 83
                    rlca                                    ;[0f9c] 07
                    add     (hl)                            ;[0f9d] 86
                    sub     $30                             ;[0f9e] d6 30
                    ld      e,a                             ;[0fa0] 5f
                    jp      m,$321e                         ;[0fa1] fa 1e 32
                    jp      $0ebd                           ;[0fa4] c3 bd 0e
                    push    hl                              ;[0fa7] e5
                    ld      hl,$1924                        ;[0fa8] 21 24 19
                    call    SYS_STR_TO_DEVICE                           ;[0fab] cd a7 28
                    pop     hl                              ;[0fae] e1

;OUTPUT HL
;Display HL value on the screen.
;   LD HL,20000
;   CALL 0FAFh
; Displays "20000" pn the screen
SYS_DISPLAY_HL      call    $0a9a                           ;[0faf] cd 9a 0a
                    xor     a                               ;[0fb2] af
                    call    $1034                           ;[0fb3] cd 34 10
                    or      (hl)                            ;[0fb6] b6
                    call    $0fd9                           ;[0fb7] cd d9 0f
                    jp      $28a6                           ;[0fba] c3 a6 28
                    xor     a                               ;[0fbd] af
                    call    $1034                           ;[0fbe] cd 34 10
                    and     $08                             ;[0fc1] e6 08
                    jr      z,$0fc7                         ;[0fc3] 28 02
                    ld      (hl),$2b                        ;[0fc5] 36 2b
                    ex      de,hl                           ;[0fc7] eb
                    call    $0994                           ;[0fc8] cd 94 09
                    ex      de,hl                           ;[0fcb] eb
                    jp      p,$0fd9                         ;[0fcc] f2 d9 0f
                    ld      (hl),$2d                        ;[0fcf] 36 2d
                    push    bc                              ;[0fd1] c5
                    push    hl                              ;[0fd2] e5
                    call    $097b                           ;[0fd3] cd 7b 09
                    pop     hl                              ;[0fd6] e1
                    pop     bc                              ;[0fd7] c1
                    or      h                               ;[0fd8] b4
                    inc     hl                              ;[0fd9] 23
                    ld      (hl),$30                        ;[0fda] 36 30
                    ld      a,($78d8)                       ;[0fdc] 3a d8 78
                    ld      d,a                             ;[0fdf] 57
                    rla                                     ;[0fe0] 17
                    ld      a,($78af)                       ;[0fe1] 3a af 78
                    jp      c,$109a                         ;[0fe4] da 9a 10
                    jp      z,$1092                         ;[0fe7] ca 92 10
                    cp      $04                             ;[0fea] fe 04
                    jp      nc,$103d                        ;[0fec] d2 3d 10
                    ld      bc,$0000                        ;[0fef] 01 00 00
                    call    $132f                           ;[0ff2] cd 2f 13
                    ld      hl,$7930                        ;[0ff5] 21 30 79
                    ld      b,(hl)                          ;[0ff8] 46
                    ld      c,$20                           ;[0ff9] 0e 20
                    ld      a,($78d8)                       ;[0ffb] 3a d8 78
                    ld      e,a                             ;[0ffe] 5f
                    and     $20                             ;[0fff] e6 20
                    jr      z,$100a                         ;[1001] 28 07
                    ld      a,b                             ;[1003] 78
                    cp      c                               ;[1004] b9
                    ld      c,$2a                           ;[1005] 0e 2a
                    jr      nz,$100a                        ;[1007] 20 01
                    ld      b,c                             ;[1009] 41
                    ld      (hl),c                          ;[100a] 71
                    rst     $10                             ;[100b] d7
                    jr      z,$1022                         ;[100c] 28 14
                    cp      $45                             ;[100e] fe 45
                    jr      z,$1022                         ;[1010] 28 10
                    cp      $44                             ;[1012] fe 44
                    jr      z,$1022                         ;[1014] 28 0c
                    cp      $30                             ;[1016] fe 30
                    jr      z,$100a                         ;[1018] 28 f0
                    cp      $2c                             ;[101a] fe 2c
                    jr      z,$100a                         ;[101c] 28 ec
                    cp      $2e                             ;[101e] fe 2e
                    jr      nz,$1025                        ;[1020] 20 03
                    dec     hl                              ;[1022] 2b
                    ld      (hl),$30                        ;[1023] 36 30
                    ld      a,e                             ;[1025] 7b
                    and     $10                             ;[1026] e6 10
                    jr      z,$102d                         ;[1028] 28 03
                    dec     hl                              ;[102a] 2b
                    ld      (hl),$24                        ;[102b] 36 24
                    ld      a,e                             ;[102d] 7b
                    and     $04                             ;[102e] e6 04
                    ret     nz                              ;[1030] c0
                    dec     hl                              ;[1031] 2b
                    ld      (hl),b                          ;[1032] 70
                    ret                                     ;[1033] c9

                    ld      ($78d8),a                       ;[1034] 32 d8 78
                    ld      hl,$7930                        ;[1037] 21 30 79
                    ld      (hl),$20                        ;[103a] 36 20
                    ret                                     ;[103c] c9

                    cp      $05                             ;[103d] fe 05
                    push    hl                              ;[103f] e5
                    sbc     $00                             ;[1040] de 00
                    rla                                     ;[1042] 17
                    ld      d,a                             ;[1043] 57
                    inc     d                               ;[1044] 14
                    call    $1201                           ;[1045] cd 01 12
                    ld      bc,$0300                        ;[1048] 01 00 03
                    add     d                               ;[104b] 82
                    jp      m,$1057                         ;[104c] fa 57 10
                    inc     d                               ;[104f] 14
                    cp      d                               ;[1050] ba
                    jr      nc,$1057                        ;[1051] 30 04
                    inc     a                               ;[1053] 3c
                    ld      b,a                             ;[1054] 47
                    ld      a,$02                           ;[1055] 3e 02
                    sub     $02                             ;[1057] d6 02
                    pop     hl                              ;[1059] e1
                    push    af                              ;[105a] f5
                    call    $1291                           ;[105b] cd 91 12
                    ld      (hl),$30                        ;[105e] 36 30
                    call    z,$09c9                         ;[1060] cc c9 09
                    call    $12a4                           ;[1063] cd a4 12
                    dec     hl                              ;[1066] 2b
                    ld      a,(hl)                          ;[1067] 7e
                    cp      $30                             ;[1068] fe 30
                    jr      z,$1066                         ;[106a] 28 fa
                    cp      $2e                             ;[106c] fe 2e
                    call    nz,$09c9                        ;[106e] c4 c9 09
                    pop     af                              ;[1071] f1
                    jr      z,$1093                         ;[1072] 28 1f
                    push    af                              ;[1074] f5
                    rst     $20                             ;[1075] e7
                    ld      a,$22                           ;[1076] 3e 22
                    adc     a                               ;[1078] 8f
                    ld      (hl),a                          ;[1079] 77
                    inc     hl                              ;[107a] 23
                    pop     af                              ;[107b] f1
                    ld      (hl),$2b                        ;[107c] 36 2b
                    jp      p,$1085                         ;[107e] f2 85 10
                    ld      (hl),$2d                        ;[1081] 36 2d
                    cpl                                     ;[1083] 2f
                    inc     a                               ;[1084] 3c
                    ld      b,$2f                           ;[1085] 06 2f
                    inc     b                               ;[1087] 04
                    sub     $0a                             ;[1088] d6 0a
                    jr      nc,$1087                        ;[108a] 30 fb
                    add     $3a                             ;[108c] c6 3a
                    inc     hl                              ;[108e] 23
                    ld      (hl),b                          ;[108f] 70
                    inc     hl                              ;[1090] 23
                    ld      (hl),a                          ;[1091] 77
                    inc     hl                              ;[1092] 23
                    ld      (hl),$00                        ;[1093] 36 00
                    ex      de,hl                           ;[1095] eb
                    ld      hl,$7930                        ;[1096] 21 30 79
                    ret                                     ;[1099] c9

                    inc     hl                              ;[109a] 23
                    push    bc                              ;[109b] c5
                    cp      $04                             ;[109c] fe 04
                    ld      a,d                             ;[109e] 7a
                    jp      nc,$1109                        ;[109f] d2 09 11
                    rra                                     ;[10a2] 1f
                    jp      c,$11a3                         ;[10a3] da a3 11
                    ld      bc,$0603                        ;[10a6] 01 03 06
                    call    $1289                           ;[10a9] cd 89 12
                    pop     de                              ;[10ac] d1
                    ld      a,d                             ;[10ad] 7a
                    sub     $05                             ;[10ae] d6 05
                    call    p,$1269                         ;[10b0] f4 69 12
                    call    $132f                           ;[10b3] cd 2f 13
                    ld      a,e                             ;[10b6] 7b
                    or      a                               ;[10b7] b7
                    call    z,$092f                         ;[10b8] cc 2f 09
                    dec     a                               ;[10bb] 3d
                    call    p,$1269                         ;[10bc] f4 69 12
                    push    hl                              ;[10bf] e5
                    call    $0ff5                           ;[10c0] cd f5 0f
                    pop     hl                              ;[10c3] e1
                    jr      z,$10c8                         ;[10c4] 28 02
                    ld      (hl),b                          ;[10c6] 70
                    inc     hl                              ;[10c7] 23
                    ld      (hl),$00                        ;[10c8] 36 00
                    ld      hl,$792f                        ;[10ca] 21 2f 79
                    inc     hl                              ;[10cd] 23
                    ld      a,($78f3)                       ;[10ce] 3a f3 78
                    sub     l                               ;[10d1] 95
                    sub     d                               ;[10d2] 92
                    ret     z                               ;[10d3] c8
                    ld      a,(hl)                          ;[10d4] 7e
                    cp      $20                             ;[10d5] fe 20
                    jr      z,$10cd                         ;[10d7] 28 f4
                    cp      $2a                             ;[10d9] fe 2a
                    jr      z,$10cd                         ;[10db] 28 f0
                    dec     hl                              ;[10dd] 2b
                    push    hl                              ;[10de] e5
                    push    af                              ;[10df] f5
                    ld      bc,$10df                        ;[10e0] 01 df 10
                    push    bc                              ;[10e3] c5
                    rst     $10                             ;[10e4] d7
                    cp      $2d                             ;[10e5] fe 2d
                    ret     z                               ;[10e7] c8
                    cp      $2b                             ;[10e8] fe 2b
                    ret     z                               ;[10ea] c8
                    cp      $24                             ;[10eb] fe 24
                    ret     z                               ;[10ed] c8
                    pop     bc                              ;[10ee] c1
                    cp      $30                             ;[10ef] fe 30
                    jr      nz,$1102                        ;[10f1] 20 0f
                    inc     hl                              ;[10f3] 23
                    rst     $10                             ;[10f4] d7
                    jr      nc,$1102                        ;[10f5] 30 0b
                    dec     hl                              ;[10f7] 2b
                    ld      bc,$772b                        ;[10f8] 01 2b 77
                    pop     af                              ;[10fb] f1
                    jr      z,$10f9                         ;[10fc] 28 fb
                    pop     bc                              ;[10fe] c1
                    jp      $10ce                           ;[10ff] c3 ce 10
                    pop     af                              ;[1102] f1
                    jr      z,$1102                         ;[1103] 28 fd
                    pop     hl                              ;[1105] e1
                    ld      (hl),$25                        ;[1106] 36 25
                    ret                                     ;[1108] c9

                    push    hl                              ;[1109] e5
                    rra                                     ;[110a] 1f
                    jp      c,$11aa                         ;[110b] da aa 11
                    jr      z,$1124                         ;[110e] 28 14
                    ld      de,$1384                        ;[1110] 11 84 13
                    call    $0a49                           ;[1113] cd 49 0a
                    ld      d,$10                           ;[1116] 16 10
                    jp      m,$1132                         ;[1118] fa 32 11
                    pop     hl                              ;[111b] e1
                    pop     bc                              ;[111c] c1
                    call    $0fbd                           ;[111d] cd bd 0f
                    dec     hl                              ;[1120] 2b
                    ld      (hl),$25                        ;[1121] 36 25
                    ret                                     ;[1123] c9

                    ld      bc,$b60e                        ;[1124] 01 0e b6
                    ld      de,$1bca                        ;[1127] 11 ca 1b
                    call    $0a0c                           ;[112a] cd 0c 0a
                    jp      p,$111b                         ;[112d] f2 1b 11
                    ld      d,$06                           ;[1130] 16 06
                    call    $0955                           ;[1132] cd 55 09
                    call    nz,$1201                        ;[1135] c4 01 12
                    pop     hl                              ;[1138] e1
                    pop     bc                              ;[1139] c1
                    jp      m,$1157                         ;[113a] fa 57 11
                    push    bc                              ;[113d] c5
                    ld      e,a                             ;[113e] 5f
                    ld      a,b                             ;[113f] 78
                    sub     d                               ;[1140] 92
                    sub     e                               ;[1141] 93
                    call    p,$1269                         ;[1142] f4 69 12
                    call    $127d                           ;[1145] cd 7d 12
                    call    $12a4                           ;[1148] cd a4 12
                    or      e                               ;[114b] b3
                    call    nz,$1277                        ;[114c] c4 77 12
                    or      e                               ;[114f] b3
                    call    nz,$1291                        ;[1150] c4 91 12
                    pop     de                              ;[1153] d1
                    jp      $10b6                           ;[1154] c3 b6 10
                    ld      e,a                             ;[1157] 5f
                    ld      a,c                             ;[1158] 79
                    or      a                               ;[1159] b7
                    call    nz,$0f16                        ;[115a] c4 16 0f
                    add     e                               ;[115d] 83
                    jp      m,$1162                         ;[115e] fa 62 11
                    xor     a                               ;[1161] af
                    push    bc                              ;[1162] c5
                    push    af                              ;[1163] f5
                    call    m,$0f18                         ;[1164] fc 18 0f
                    jp      m,$1164                         ;[1167] fa 64 11
                    pop     bc                              ;[116a] c1
                    ld      a,e                             ;[116b] 7b
                    sub     b                               ;[116c] 90
                    pop     bc                              ;[116d] c1
                    ld      e,a                             ;[116e] 5f
                    add     d                               ;[116f] 82
                    ld      a,b                             ;[1170] 78
                    jp      m,$117f                         ;[1171] fa 7f 11
                    sub     d                               ;[1174] 92
                    sub     e                               ;[1175] 93
                    call    p,$1269                         ;[1176] f4 69 12
                    push    bc                              ;[1179] c5
                    call    $127d                           ;[117a] cd 7d 12
                    jr      $1190                           ;[117d] 18 11
                    call    $1269                           ;[117f] cd 69 12
                    ld      a,c                             ;[1182] 79
                    call    $1294                           ;[1183] cd 94 12
                    ld      c,a                             ;[1186] 4f
                    xor     a                               ;[1187] af
                    sub     d                               ;[1188] 92
                    sub     e                               ;[1189] 93
                    call    $1269                           ;[118a] cd 69 12
                    push    bc                              ;[118d] c5
                    ld      b,a                             ;[118e] 47
                    ld      c,a                             ;[118f] 4f
                    call    $12a4                           ;[1190] cd a4 12
                    pop     bc                              ;[1193] c1
                    or      c                               ;[1194] b1
                    jr      nz,$119a                        ;[1195] 20 03
                    ld      hl,($78f3)                      ;[1197] 2a f3 78
                    add     e                               ;[119a] 83
                    dec     a                               ;[119b] 3d
                    call    p,$1269                         ;[119c] f4 69 12
                    ld      d,b                             ;[119f] 50
                    jp      $10bf                           ;[11a0] c3 bf 10
                    push    hl                              ;[11a3] e5
                    push    de                              ;[11a4] d5
                    call    $0acc                           ;[11a5] cd cc 0a
                    pop     de                              ;[11a8] d1
                    xor     a                               ;[11a9] af
                    jp      z,$11b0                         ;[11aa] ca b0 11
                    ld      e,$10                           ;[11ad] 1e 10
                    ld      bc,$061e                        ;[11af] 01 1e 06
                    call    $0955                           ;[11b2] cd 55 09
                    scf                                     ;[11b5] 37
                    call    nz,$1201                        ;[11b6] c4 01 12
                    pop     hl                              ;[11b9] e1
                    pop     bc                              ;[11ba] c1
                    push    af                              ;[11bb] f5
                    ld      a,c                             ;[11bc] 79
                    or      a                               ;[11bd] b7
                    push    af                              ;[11be] f5
                    call    nz,$0f16                        ;[11bf] c4 16 0f
                    add     b                               ;[11c2] 80
                    ld      c,a                             ;[11c3] 4f
                    ld      a,d                             ;[11c4] 7a
                    and     $04                             ;[11c5] e6 04
                    cp      $01                             ;[11c7] fe 01
                    sbc     a                               ;[11c9] 9f
                    ld      d,a                             ;[11ca] 57
                    add     c                               ;[11cb] 81
                    ld      c,a                             ;[11cc] 4f
                    sub     e                               ;[11cd] 93
                    push    af                              ;[11ce] f5
                    push    bc                              ;[11cf] c5
                    call    m,$0f18                         ;[11d0] fc 18 0f
                    jp      m,$11d0                         ;[11d3] fa d0 11
                    pop     bc                              ;[11d6] c1
                    pop     af                              ;[11d7] f1
                    push    bc                              ;[11d8] c5
                    push    af                              ;[11d9] f5
                    jp      m,$11de                         ;[11da] fa de 11
                    xor     a                               ;[11dd] af
                    cpl                                     ;[11de] 2f
                    inc     a                               ;[11df] 3c
                    add     b                               ;[11e0] 80
                    inc     a                               ;[11e1] 3c
                    add     d                               ;[11e2] 82
                    ld      b,a                             ;[11e3] 47
                    ld      c,$00                           ;[11e4] 0e 00
                    call    $12a4                           ;[11e6] cd a4 12
                    pop     af                              ;[11e9] f1
                    call    p,$1271                         ;[11ea] f4 71 12
                    pop     bc                              ;[11ed] c1
                    pop     af                              ;[11ee] f1
                    call    z,$092f                         ;[11ef] cc 2f 09
                    pop     af                              ;[11f2] f1
                    jr      c,$11f8                         ;[11f3] 38 03
                    add     e                               ;[11f5] 83
                    sub     b                               ;[11f6] 90
                    sub     d                               ;[11f7] 92
                    push    bc                              ;[11f8] c5
                    call    $1074                           ;[11f9] cd 74 10
                    ex      de,hl                           ;[11fc] eb
                    pop     de                              ;[11fd] d1
                    jp      $10bf                           ;[11fe] c3 bf 10
                    push    de                              ;[1201] d5
                    xor     a                               ;[1202] af
                    push    af                              ;[1203] f5
                    rst     $20                             ;[1204] e7
                    jp      po,$1222                        ;[1205] e2 22 12
                    ld      a,($7924)                       ;[1208] 3a 24 79
                    cp      $91                             ;[120b] fe 91
                    jp      nc,$1222                        ;[120d] d2 22 12
                    ld      de,$1364                        ;[1210] 11 64 13
                    ld      hl,$7927                        ;[1213] 21 27 79
                    call    $09d3                           ;[1216] cd d3 09
                    call    $0da1                           ;[1219] cd a1 0d
                    pop     af                              ;[121c] f1
                    sub     $0a                             ;[121d] d6 0a
                    push    af                              ;[121f] f5
                    jr      $1208                           ;[1220] 18 e6
                    call    $124f                           ;[1222] cd 4f 12
                    rst     $20                             ;[1225] e7
                    jp      pe,$1234                        ;[1226] ea 34 12
                    ld      bc,$9143                        ;[1229] 01 43 91
                    ld      de,$4ff9                        ;[122c] 11 f9 4f
                    call    $0a0c                           ;[122f] cd 0c 0a
                    jr      $123a                           ;[1232] 18 06
                    ld      de,$136c                        ;[1234] 11 6c 13
                    call    $0a49                           ;[1237] cd 49 0a
                    jp      p,$124c                         ;[123a] f2 4c 12
                    pop     af                              ;[123d] f1
                    call    $0f0b                           ;[123e] cd 0b 0f
                    push    af                              ;[1241] f5
                    jr      $1225                           ;[1242] 18 e1
                    pop     af                              ;[1244] f1
                    call    $0f18                           ;[1245] cd 18 0f
                    push    af                              ;[1248] f5
                    call    $124f                           ;[1249] cd 4f 12
                    pop     af                              ;[124c] f1
                    pop     de                              ;[124d] d1
                    ret                                     ;[124e] c9

                    rst     $20                             ;[124f] e7
                    jp      pe,$125e                        ;[1250] ea 5e 12
                    ld      bc,$9474                        ;[1253] 01 74 94
                    ld      de,$23f8                        ;[1256] 11 f8 23
                    call    $0a0c                           ;[1259] cd 0c 0a
                    jr      $1264                           ;[125c] 18 06
                    ld      de,$1374                        ;[125e] 11 74 13
                    call    $0a49                           ;[1261] cd 49 0a
                    pop     hl                              ;[1264] e1
                    jp      p,$1244                         ;[1265] f2 44 12
                    jp      (hl)                            ;[1268] e9
                    or      a                               ;[1269] b7
                    ret     z                               ;[126a] c8
                    dec     a                               ;[126b] 3d
                    ld      (hl),$30                        ;[126c] 36 30
                    inc     hl                              ;[126e] 23
                    jr      $126a                           ;[126f] 18 f9
                    jr      nz,$1277                        ;[1271] 20 04
                    ret     z                               ;[1273] c8
                    call    $1291                           ;[1274] cd 91 12
                    ld      (hl),$30                        ;[1277] 36 30
                    inc     hl                              ;[1279] 23
                    dec     a                               ;[127a] 3d
                    jr      $1273                           ;[127b] 18 f6
                    ld      a,e                             ;[127d] 7b
                    add     d                               ;[127e] 82
                    inc     a                               ;[127f] 3c
                    ld      b,a                             ;[1280] 47
                    inc     a                               ;[1281] 3c
                    sub     $03                             ;[1282] d6 03
                    jr      nc,$1282                        ;[1284] 30 fc
                    add     $05                             ;[1286] c6 05
                    ld      c,a                             ;[1288] 4f
                    ld      a,($78d8)                       ;[1289] 3a d8 78
                    and     $40                             ;[128c] e6 40
                    ret     nz                              ;[128e] c0
                    ld      c,a                             ;[128f] 4f
                    ret                                     ;[1290] c9

                    dec     b                               ;[1291] 05
                    jr      nz,$129c                        ;[1292] 20 08
                    ld      (hl),$2e                        ;[1294] 36 2e
                    ld      ($78f3),hl                      ;[1296] 22 f3 78
                    inc     hl                              ;[1299] 23
                    ld      c,b                             ;[129a] 48
                    ret                                     ;[129b] c9

                    dec     c                               ;[129c] 0d
                    ret     nz                              ;[129d] c0
                    ld      (hl),$2c                        ;[129e] 36 2c
                    inc     hl                              ;[12a0] 23
                    ld      c,$03                           ;[12a1] 0e 03
                    ret                                     ;[12a3] c9

                    push    de                              ;[12a4] d5
                    rst     $20                             ;[12a5] e7
                    jp      po,$12ea                        ;[12a6] e2 ea 12
                    push    bc                              ;[12a9] c5
                    push    hl                              ;[12aa] e5
                    call    $09fc                           ;[12ab] cd fc 09
                    ld      hl,$137c                        ;[12ae] 21 7c 13
                    call    $09f7                           ;[12b1] cd f7 09
                    call    $0c77                           ;[12b4] cd 77 0c
                    xor     a                               ;[12b7] af
                    call    $0b7b                           ;[12b8] cd 7b 0b
                    pop     hl                              ;[12bb] e1
                    pop     bc                              ;[12bc] c1
                    ld      de,$138c                        ;[12bd] 11 8c 13
                    ld      a,$0a                           ;[12c0] 3e 0a
                    call    $1291                           ;[12c2] cd 91 12
                    push    bc                              ;[12c5] c5
                    push    af                              ;[12c6] f5
                    push    hl                              ;[12c7] e5
                    push    de                              ;[12c8] d5
                    ld      b,$2f                           ;[12c9] 06 2f
                    inc     b                               ;[12cb] 04
                    pop     hl                              ;[12cc] e1
                    push    hl                              ;[12cd] e5
                    call    $0d48                           ;[12ce] cd 48 0d
                    jr      nc,$12cb                        ;[12d1] 30 f8
                    pop     hl                              ;[12d3] e1
                    call    $0d36                           ;[12d4] cd 36 0d
                    ex      de,hl                           ;[12d7] eb
                    pop     hl                              ;[12d8] e1
                    ld      (hl),b                          ;[12d9] 70
                    inc     hl                              ;[12da] 23
                    pop     af                              ;[12db] f1
                    pop     bc                              ;[12dc] c1
                    dec     a                               ;[12dd] 3d
                    jr      nz,$12c2                        ;[12de] 20 e2
                    push    bc                              ;[12e0] c5
                    push    hl                              ;[12e1] e5
                    ld      hl,$791d                        ;[12e2] 21 1d 79
                    call    $09b1                           ;[12e5] cd b1 09
                    jr      $12f6                           ;[12e8] 18 0c
                    push    bc                              ;[12ea] c5
                    push    hl                              ;[12eb] e5
                    call    $0708                           ;[12ec] cd 08 07
                    inc     a                               ;[12ef] 3c
                    call    $0afb                           ;[12f0] cd fb 0a
                    call    $09b4                           ;[12f3] cd b4 09
                    pop     hl                              ;[12f6] e1
                    pop     bc                              ;[12f7] c1
                    xor     a                               ;[12f8] af
                    ld      de,$13d2                        ;[12f9] 11 d2 13
                    ccf                                     ;[12fc] 3f
                    call    $1291                           ;[12fd] cd 91 12
                    push    bc                              ;[1300] c5
                    push    af                              ;[1301] f5
                    push    hl                              ;[1302] e5
                    push    de                              ;[1303] d5
                    call    $09bf                           ;[1304] cd bf 09
                    pop     hl                              ;[1307] e1
                    ld      b,$2f                           ;[1308] 06 2f
                    inc     b                               ;[130a] 04
                    ld      a,e                             ;[130b] 7b
                    sub     (hl)                            ;[130c] 96
                    ld      e,a                             ;[130d] 5f
                    inc     hl                              ;[130e] 23
                    ld      a,d                             ;[130f] 7a
                    sbc     (hl)                            ;[1310] 9e
                    ld      d,a                             ;[1311] 57
                    inc     hl                              ;[1312] 23
                    ld      a,c                             ;[1313] 79
                    sbc     (hl)                            ;[1314] 9e
                    ld      c,a                             ;[1315] 4f
                    dec     hl                              ;[1316] 2b
                    dec     hl                              ;[1317] 2b
                    jr      nc,$130a                        ;[1318] 30 f0
                    call    $07b7                           ;[131a] cd b7 07
                    inc     hl                              ;[131d] 23
                    call    $09b4                           ;[131e] cd b4 09
                    ex      de,hl                           ;[1321] eb
                    pop     hl                              ;[1322] e1
                    ld      (hl),b                          ;[1323] 70
                    inc     hl                              ;[1324] 23
                    pop     af                              ;[1325] f1
                    pop     bc                              ;[1326] c1
                    jr      c,$12fc                         ;[1327] 38 d3
                    inc     de                              ;[1329] 13
                    inc     de                              ;[132a] 13
                    ld      a,$04                           ;[132b] 3e 04
                    jr      $1335                           ;[132d] 18 06
                    push    de                              ;[132f] d5
                    ld      de,$13d8                        ;[1330] 11 d8 13
                    ld      a,$05                           ;[1333] 3e 05
                    call    $1291                           ;[1335] cd 91 12
                    push    bc                              ;[1338] c5
                    push    af                              ;[1339] f5
                    push    hl                              ;[133a] e5
                    ex      de,hl                           ;[133b] eb
                    ld      c,(hl)                          ;[133c] 4e
                    inc     hl                              ;[133d] 23
                    ld      b,(hl)                          ;[133e] 46
                    push    bc                              ;[133f] c5
                    inc     hl                              ;[1340] 23
                    ex      (sp),hl                         ;[1341] e3
                    ex      de,hl                           ;[1342] eb
                    ld      hl,($7921)                      ;[1343] 2a 21 79
                    ld      b,$2f                           ;[1346] 06 2f
                    inc     b                               ;[1348] 04
                    ld      a,l                             ;[1349] 7d
                    sub     e                               ;[134a] 93
                    ld      l,a                             ;[134b] 6f
                    ld      a,h                             ;[134c] 7c
                    sbc     d                               ;[134d] 9a
                    ld      h,a                             ;[134e] 67
                    jr      nc,$1348                        ;[134f] 30 f7
                    add     hl,de                           ;[1351] 19
                    ld      ($7921),hl                      ;[1352] 22 21 79
                    pop     de                              ;[1355] d1
                    pop     hl                              ;[1356] e1
                    ld      (hl),b                          ;[1357] 70
                    inc     hl                              ;[1358] 23
                    pop     af                              ;[1359] f1
                    pop     bc                              ;[135a] c1
                    dec     a                               ;[135b] 3d
                    jr      nz,$1335                        ;[135c] 20 d7
                    call    $1291                           ;[135e] cd 91 12
                    ld      (hl),a                          ;[1361] 77
                    pop     de                              ;[1362] d1
                    ret                                     ;[1363] c9

                    nop                                     ;[1364] 00
                    nop                                     ;[1365] 00
                    nop                                     ;[1366] 00
                    nop                                     ;[1367] 00
                    ld      sp,hl                           ;[1368] f9
                    ld      (bc),a                          ;[1369] 02
                    dec     d                               ;[136a] 15
                    and     d                               ;[136b] a2
                    defb    $fd                             ;[136c] fd 
                    rst     $38                             ;[136d] ff
                    sbc     a                               ;[136e] 9f
                    ld      sp,$5fa9                        ;[136f] 31 a9 5f
                    ld      h,e                             ;[1372] 63
                    or      d                               ;[1373] b2
                    cp      $ff                             ;[1374] fe ff
                    inc     bc                              ;[1376] 03
                    cp      a                               ;[1377] bf
                    ret                                     ;[1378] c9

                    dec     de                              ;[1379] 1b
                    ld      c,$b6                           ;[137a] 0e b6
                    nop                                     ;[137c] 00
                    nop                                     ;[137d] 00
                    nop                                     ;[137e] 00
                    nop                                     ;[137f] 00
                    nop                                     ;[1380] 00
                    nop                                     ;[1381] 00
                    nop                                     ;[1382] 00
                    add     b                               ;[1383] 80
                    nop                                     ;[1384] 00
                    nop                                     ;[1385] 00
                    inc     b                               ;[1386] 04
                    cp      a                               ;[1387] bf
                    ret                                     ;[1388] c9

                    dec     de                              ;[1389] 1b
                    ld      c,$b6                           ;[138a] 0e b6
                    nop                                     ;[138c] 00
                    add     b                               ;[138d] 80
                    add     $a4                             ;[138e] c6 a4
                    ld      a,(hl)                          ;[1390] 7e
                    adc     l                               ;[1391] 8d
                    inc     bc                              ;[1392] 03
                    nop                                     ;[1393] 00
                    ld      b,b                             ;[1394] 40
                    ld      a,d                             ;[1395] 7a
                    djnz    $138b                           ;[1396] 10 f3
                    ld      e,d                             ;[1398] 5a
                    nop                                     ;[1399] 00
                    nop                                     ;[139a] 00
                    and     b                               ;[139b] a0
                    ld      (hl),d                          ;[139c] 72
                    ld      c,(hl)                          ;[139d] 4e
                    jr      $13a9                           ;[139e] 18 09
                    nop                                     ;[13a0] 00
                    nop                                     ;[13a1] 00
                    djnz    $1349                           ;[13a2] 10 a5
                    call    nc,$00e8                        ;[13a4] d4 e8 00
                    nop                                     ;[13a7] 00
                    nop                                     ;[13a8] 00
                    ret     pe                              ;[13a9] e8
                    halt                                    ;[13aa] 76
                    ld      c,b                             ;[13ab] 48
                    rla                                     ;[13ac] 17
                    nop                                     ;[13ad] 00
                    nop                                     ;[13ae] 00
                    nop                                     ;[13af] 00
                    call    po,$540b                        ;[13b0] e4 0b 54
                    ld      (bc),a                          ;[13b3] 02
                    nop                                     ;[13b4] 00
                    nop                                     ;[13b5] 00
                    nop                                     ;[13b6] 00
                    jp      z,$3b9a                         ;[13b7] ca 9a 3b
                    nop                                     ;[13ba] 00
                    nop                                     ;[13bb] 00
                    nop                                     ;[13bc] 00
                    nop                                     ;[13bd] 00
                    pop     hl                              ;[13be] e1
                    push    af                              ;[13bf] f5
                    dec     b                               ;[13c0] 05
                    nop                                     ;[13c1] 00
                    nop                                     ;[13c2] 00
                    nop                                     ;[13c3] 00
                    add     b                               ;[13c4] 80
                    sub     (hl)                            ;[13c5] 96
                    sbc     b                               ;[13c6] 98
                    nop                                     ;[13c7] 00
                    nop                                     ;[13c8] 00
                    nop                                     ;[13c9] 00
                    nop                                     ;[13ca] 00
                    ld      b,b                             ;[13cb] 40
                    ld      b,d                             ;[13cc] 42
                    rrca                                    ;[13cd] 0f
                    nop                                     ;[13ce] 00
                    nop                                     ;[13cf] 00
                    nop                                     ;[13d0] 00
                    nop                                     ;[13d1] 00
                    and     b                               ;[13d2] a0
                    add     (hl)                            ;[13d3] 86
                    ld      bc,$2710                        ;[13d4] 01 10 27
                    nop                                     ;[13d7] 00
                    djnz    $1401                           ;[13d8] 10 27
                    ret     pe                              ;[13da] e8
                    inc     bc                              ;[13db] 03
                    ld      h,h                             ;[13dc] 64
                    nop                                     ;[13dd] 00
                    ld      a,(bc)                          ;[13de] 0a
                    nop                                     ;[13df] 00
                    ld      bc,$2100                        ;[13e0] 01 00 21
                    add     d                               ;[13e3] 82
                    add     hl,bc                           ;[13e4] 09
                    ex      (sp),hl                         ;[13e5] e3
                    jp      (hl)                            ;[13e6] e9


;*********************************************************************************************************************
; SQR
;BAS_CODE_SQL        equ     $dd
MATH_S_SQR_ACC:
                    call    $09a4                           ;[13e7] cd a4 09
                    ld      hl,$1380                        ;[13ea] 21 80 13
                    call    $09b1                           ;[13ed] cd b1 09
                    jr      $13f5                           ;[13f0] 18 03
                    call    MATH_ISD_CSNG_ACC                           ;[13f2] cd b1 0a
                    pop     bc                              ;[13f5] c1
                    pop     de                              ;[13f6] d1
                    call    $0955                           ;[13f7] cd 55 09
                    ld      a,b                             ;[13fa] 78
                    jr      z,MATH_S_EXP_ACC                         ;[13fb] 28 3c
                    jp      p,$1404                         ;[13fd] f2 04 14
                    or      a                               ;[1400] b7
                    jp      z,$199a                         ;[1401] ca 9a 19
                    or      a                               ;[1404] b7
                    jp      z,$0779                         ;[1405] ca 79 07
                    push    de                              ;[1408] d5
                    push    bc                              ;[1409] c5
                    ld      a,c                             ;[140a] 79
                    or      $7f                             ;[140b] f6 7f
                    call    $09bf                           ;[140d] cd bf 09
                    jp      p,$1421                         ;[1410] f2 21 14
                    push    de                              ;[1413] d5
                    push    bc                              ;[1414] c5
                    call    $0b40                           ;[1415] cd 40 0b
                    pop     bc                              ;[1418] c1
                    pop     de                              ;[1419] d1
                    push    af                              ;[141a] f5
                    call    $0a0c                           ;[141b] cd 0c 0a
                    pop     hl                              ;[141e] e1
                    ld      a,h                             ;[141f] 7c
                    rra                                     ;[1420] 1f
                    pop     hl                              ;[1421] e1
                    ld      ($7923),hl                      ;[1422] 22 23 79
                    pop     hl                              ;[1425] e1
                    ld      ($7921),hl                      ;[1426] 22 21 79
                    call    c,$13e2                         ;[1429] dc e2 13
                    call    z,$0982                         ;[142c] cc 82 09
                    push    de                              ;[142f] d5
                    push    bc                              ;[1430] c5
                    call    MATH_S_LOG_ACC                           ;[1431] cd 09 08
                    pop     bc                              ;[1434] c1
                    pop     de                              ;[1435] d1
                    call    $0847                           ;[1436] cd 47 08


;*********************************************************************************************************************
; EXP
;BAS_CODE_EXP        equ     $e0
MATH_S_EXP_ACC:
                    call    $09a4                           ;[1439] cd a4 09
                    ld      bc,$8138                        ;[143c] 01 38 81
                    ld      de,$aa3b                        ;[143f] 11 3b aa
                    call    $0847                           ;[1442] cd 47 08
                    ld      a,($7924)                       ;[1445] 3a 24 79
                    cp      $88                             ;[1448] fe 88
                    jp      nc,$0931                        ;[144a] d2 31 09
                    call    $0b40                           ;[144d] cd 40 0b
                    add     $80                             ;[1450] c6 80
                    add     $02                             ;[1452] c6 02
                    jp      c,$0931                         ;[1454] da 31 09
                    push    af                              ;[1457] f5
                    ld      hl,$07f8                        ;[1458] 21 f8 07
                    call    $070b                           ;[145b] cd 0b 07
                    call    $0841                           ;[145e] cd 41 08
                    pop     af                              ;[1461] f1
                    pop     bc                              ;[1462] c1
                    pop     de                              ;[1463] d1
                    push    af                              ;[1464] f5
                    call    $0713                           ;[1465] cd 13 07
                    call    $0982                           ;[1468] cd 82 09
                    ld      hl,$1479                        ;[146b] 21 79 14
                    call    $14a9                           ;[146e] cd a9 14
                    ld      de,$0000                        ;[1471] 11 00 00
                    pop     bc                              ;[1474] c1
                    ld      c,d                             ;[1475] 4a
                    jp      $0847                           ;[1476] c3 47 08
                    ex      af,af'                          ;[1479] 08
                    ld      b,b                             ;[147a] 40
                    ld      l,$94                           ;[147b] 2e 94
                    ld      (hl),h                          ;[147d] 74
                    ld      (hl),b                          ;[147e] 70
                    ld      c,a                             ;[147f] 4f
                    ld      l,$77                           ;[1480] 2e 77
                    ld      l,(hl)                          ;[1482] 6e
                    ld      (bc),a                          ;[1483] 02
                    adc     b                               ;[1484] 88
                    ld      a,d                             ;[1485] 7a
                    and     $a0                             ;[1486] e6 a0
                    ld      hl,($507c)                      ;[1488] 2a 7c 50
                    xor     d                               ;[148b] aa
                    xor     d                               ;[148c] aa
                    ld      a,(hl)                          ;[148d] 7e
                    rst     $38                             ;[148e] ff
                    rst     $38                             ;[148f] ff
                    ld      a,a                             ;[1490] 7f
                    ld      a,a                             ;[1491] 7f
                    nop                                     ;[1492] 00
                    nop                                     ;[1493] 00
                    add     b                               ;[1494] 80
                    add     c                               ;[1495] 81
                    nop                                     ;[1496] 00
                    nop                                     ;[1497] 00
                    nop                                     ;[1498] 00
                    add     c                               ;[1499] 81
                    call    $09a4                           ;[149a] cd a4 09
                    ld      de,$0c32                        ;[149d] 11 32 0c
                    push    de                              ;[14a0] d5
                    push    hl                              ;[14a1] e5
                    call    $09bf                           ;[14a2] cd bf 09
                    call    $0847                           ;[14a5] cd 47 08
                    pop     hl                              ;[14a8] e1
                    call    $09a4                           ;[14a9] cd a4 09
                    ld      a,(hl)                          ;[14ac] 7e
                    inc     hl                              ;[14ad] 23
                    call    $09b1                           ;[14ae] cd b1 09
                    ld      b,$f1                           ;[14b1] 06 f1
                    pop     bc                              ;[14b3] c1
                    pop     de                              ;[14b4] d1
                    dec     a                               ;[14b5] 3d
                    ret     z                               ;[14b6] c8
                    push    de                              ;[14b7] d5
                    push    bc                              ;[14b8] c5
                    push    af                              ;[14b9] f5
                    push    hl                              ;[14ba] e5
                    call    $0847                           ;[14bb] cd 47 08
                    pop     hl                              ;[14be] e1
                    call    $09c2                           ;[14bf] cd c2 09
                    push    hl                              ;[14c2] e5
                    call    $0716                           ;[14c3] cd 16 07
                    pop     hl                              ;[14c6] e1
                    jr      $14b2                           ;[14c7] 18 e9


;*********************************************************************************************************************
; RND
;BAS_CODE_RND        equ     $de
MATH_ISD_RND_ACC:
                    call    MATH_ISD_CINT_ACC                           ;[14c9] cd 7f 0a
                    ld      a,h                             ;[14cc] 7c
                    or      a                               ;[14cd] b7
                    jp      m,$1e4a                         ;[14ce] fa 4a 1e
                    or      l                               ;[14d1] b5
                    jp      z,$14f0                         ;[14d2] ca f0 14
                    push    hl                              ;[14d5] e5
                    call    $14f0                           ;[14d6] cd f0 14
                    call    $09bf                           ;[14d9] cd bf 09
                    ex      de,hl                           ;[14dc] eb
                    ex      (sp),hl                         ;[14dd] e3
                    push    bc                              ;[14de] c5
                    call    $0acf                           ;[14df] cd cf 0a
                    pop     bc                              ;[14e2] c1
                    pop     de                              ;[14e3] d1
                    call    $0847                           ;[14e4] cd 47 08
                    ld      hl,$07f8                        ;[14e7] 21 f8 07
                    call    $070b                           ;[14ea] cd 0b 07
                    jp      $0b40                           ;[14ed] c3 40 0b
                    ld      hl,$7890                        ;[14f0] 21 90 78
                    push    hl                              ;[14f3] e5
                    ld      de,$0000                        ;[14f4] 11 00 00
                    ld      c,e                             ;[14f7] 4b
                    ld      h,$03                           ;[14f8] 26 03
                    ld      l,$08                           ;[14fa] 2e 08
                    ex      de,hl                           ;[14fc] eb
                    add     hl,hl                           ;[14fd] 29
                    ex      de,hl                           ;[14fe] eb
                    ld      a,c                             ;[14ff] 79
                    rla                                     ;[1500] 17
                    ld      c,a                             ;[1501] 4f
                    ex      (sp),hl                         ;[1502] e3
                    ld      a,(hl)                          ;[1503] 7e
                    rlca                                    ;[1504] 07
                    ld      (hl),a                          ;[1505] 77
                    ex      (sp),hl                         ;[1506] e3
                    jp      nc,$1516                        ;[1507] d2 16 15
                    push    hl                              ;[150a] e5
                    ld      hl,($78aa)                      ;[150b] 2a aa 78
                    add     hl,de                           ;[150e] 19
                    ex      de,hl                           ;[150f] eb
                    ld      a,($78ac)                       ;[1510] 3a ac 78
                    adc     c                               ;[1513] 89
                    ld      c,a                             ;[1514] 4f
                    pop     hl                              ;[1515] e1
                    dec     l                               ;[1516] 2d
                    jp      nz,$14fc                        ;[1517] c2 fc 14
                    ex      (sp),hl                         ;[151a] e3
                    inc     hl                              ;[151b] 23
                    ex      (sp),hl                         ;[151c] e3
                    dec     h                               ;[151d] 25
                    jp      nz,$14fa                        ;[151e] c2 fa 14
                    pop     hl                              ;[1521] e1
                    ld      hl,$b065                        ;[1522] 21 65 b0
                    add     hl,de                           ;[1525] 19
                    ld      ($78aa),hl                      ;[1526] 22 aa 78
                    call    $0aef                           ;[1529] cd ef 0a
                    ld      a,$05                           ;[152c] 3e 05
                    adc     c                               ;[152e] 89
                    ld      ($78ac),a                       ;[152f] 32 ac 78
                    ex      de,hl                           ;[1532] eb
                    ld      b,$80                           ;[1533] 06 80
                    ld      hl,$7925                        ;[1535] 21 25 79
                    ld      (hl),b                          ;[1538] 70
                    dec     hl                              ;[1539] 2b
                    ld      (hl),b                          ;[153a] 70
                    ld      c,a                             ;[153b] 4f
                    ld      b,$00                           ;[153c] 06 00
                    jp      $0765                           ;[153e] c3 65 07


;*********************************************************************************************************************
; COS
;BAS_CODE_COS        equ     $e1
MATH_S_COS_ACC:
                    ld      hl,$158b                        ;[1541] 21 8b 15
                    call    $070b                           ;[1544] cd 0b 07

;*********************************************************************************************************************
; SIN
;BAS_CODE_SIN        equ     $e2
MATH_S_SIN_ACC:
                    call    $09a4                           ;[1547] cd a4 09
                    ld      bc,$8349                        ;[154a] 01 49 83
                    ld      de,$0fdb                        ;[154d] 11 db 0f
                    call    $09b4                           ;[1550] cd b4 09
                    pop     bc                              ;[1553] c1
                    pop     de                              ;[1554] d1
                    call    $08a2                           ;[1555] cd a2 08
                    call    $09a4                           ;[1558] cd a4 09
                    call    $0b40                           ;[155b] cd 40 0b
                    pop     bc                              ;[155e] c1
                    pop     de                              ;[155f] d1
                    call    $0713                           ;[1560] cd 13 07
                    ld      hl,$158f                        ;[1563] 21 8f 15
                    call    $0710                           ;[1566] cd 10 07
                    call    $0955                           ;[1569] cd 55 09
                    scf                                     ;[156c] 37
                    jp      p,$1577                         ;[156d] f2 77 15
                    call    $0708                           ;[1570] cd 08 07
                    call    $0955                           ;[1573] cd 55 09
                    or      a                               ;[1576] b7
                    push    af                              ;[1577] f5
                    call    p,$0982                         ;[1578] f4 82 09
                    ld      hl,$158f                        ;[157b] 21 8f 15
                    call    $070b                           ;[157e] cd 0b 07
                    pop     af                              ;[1581] f1
                    call    nc,$0982                        ;[1582] d4 82 09
                    ld      hl,$1593                        ;[1585] 21 93 15
                    jp      $149a                           ;[1588] c3 9a 14
                    in      a,($0f)                         ;[158b] db 0f
                    ld      c,c                             ;[158d] 49
                    add     c                               ;[158e] 81
                    nop                                     ;[158f] 00
                    nop                                     ;[1590] 00
                    nop                                     ;[1591] 00
                    ld      a,a                             ;[1592] 7f
                    dec     b                               ;[1593] 05
                    cp      d                               ;[1594] ba
                    rst     $10                             ;[1595] d7
                    ld      e,$86                           ;[1596] 1e 86
                    ld      h,h                             ;[1598] 64
                    ld      h,$99                           ;[1599] 26 99
                    add     a                               ;[159b] 87
                    ld      e,b                             ;[159c] 58
                    inc     (hl)                            ;[159d] 34
                    inc     hl                              ;[159e] 23
                    add     a                               ;[159f] 87
                    ret     po                              ;[15a0] e0
                    ld      e,l                             ;[15a1] 5d
                    and     l                               ;[15a2] a5
                    add     (hl)                            ;[15a3] 86
                    jp      c,$490f                         ;[15a4] da 0f 49
                    add     e                               ;[15a7] 83
;*********************************************************************************************************************
; TAN
;BAS_CODE_TAN        equ     $e3
MATH_S_TAN_ACC:
                    call    $09a4                           ;[15a8] cd a4 09
                    call    MATH_S_SIN_ACC                           ;[15ab] cd 47 15
                    pop     bc                              ;[15ae] c1
                    pop     hl                              ;[15af] e1
                    call    $09a4                           ;[15b0] cd a4 09
                    ex      de,hl                           ;[15b3] eb
                    call    $09b4                           ;[15b4] cd b4 09
                    call    MATH_S_COS_ACC                           ;[15b7] cd 41 15
                    jp      $08a0                           ;[15ba] c3 a0 08


;*********************************************************************************************************************
; ATN
;BAS_CODE_ATN        equ     $e4
MATH_S_ATN_ACC:
                    call    $0955                           ;[15bd] cd 55 09
                    call    m,$13e2                         ;[15c0] fc e2 13
                    call    m,$0982                         ;[15c3] fc 82 09
                    ld      a,($7924)                       ;[15c6] 3a 24 79
                    cp      $81                             ;[15c9] fe 81
                    jr      c,$15d9                         ;[15cb] 38 0c
                    ld      bc,$8100                        ;[15cd] 01 00 81
                    ld      d,c                             ;[15d0] 51
                    ld      e,c                             ;[15d1] 59
                    call    $08a2                           ;[15d2] cd a2 08
                    ld      hl,$0710                        ;[15d5] 21 10 07
                    push    hl                              ;[15d8] e5
                    ld      hl,$15e3                        ;[15d9] 21 e3 15
                    call    $149a                           ;[15dc] cd 9a 14
                    ld      hl,$158b                        ;[15df] 21 8b 15
                    ret                                     ;[15e2] c9

                    add     hl,bc                           ;[15e3] 09
                    ld      c,d                             ;[15e4] 4a
                    rst     $10                             ;[15e5] d7
                    dec     sp                              ;[15e6] 3b
                    ld      a,b                             ;[15e7] 78
                    ld      (bc),a                          ;[15e8] 02
                    ld      l,(hl)                          ;[15e9] 6e
                    add     h                               ;[15ea] 84
                    ld      a,e                             ;[15eb] 7b
                    cp      $c1                             ;[15ec] fe c1
                    cpl                                     ;[15ee] 2f
                    ld      a,h                             ;[15ef] 7c
                    ld      (hl),h                          ;[15f0] 74
                    ld      sp,$7d9a                        ;[15f1] 31 9a 7d
                    add     h                               ;[15f4] 84
                    dec     a                               ;[15f5] 3d
                    ld      e,d                             ;[15f6] 5a
                    ld      a,l                             ;[15f7] 7d
                    ret     z                               ;[15f8] c8
                    ld      a,a                             ;[15f9] 7f
                    sub     c                               ;[15fa] 91
                    ld      a,(hl)                          ;[15fb] 7e
                    call    po,$4cbb                        ;[15fc] e4 bb 4c
                    ld      a,(hl)                          ;[15ff] 7e
                    ld      l,h                             ;[1600] 6c
                    xor     d                               ;[1601] aa
                    xor     d                               ;[1602] aa
                    ld      a,a                             ;[1603] 7f
                    nop                                     ;[1604] 00
                    nop                                     ;[1605] 00
                    nop                                     ;[1606] 00
                    add     c                               ;[1607] 81


;*********************************************************************
; Basic Functions Pointers 
; Order from TAB_BASIC_NAMES starting from 'SGN'
;----------------------
; Additional RAM adresses
RAM_JT_CVI    equ     $7952
RAM_JT_CVS    equ     $7958
RAM_JT_CVD    equ     $795e
RAM_JT_EOF    equ     $7961
RAM_JT_LOC    equ     $7964
RAM_JT_LOF    equ     $7967
RAM_JT_MKI    equ     $796a
RAM_JT_MKS    equ     $796d
RAM_JT_MKD    equ     $7970
TAB_BASIC_FUNCPTRS      org     $1608
    defw    MATH_ISD_SGN_ACC, MATH_ISD_INT_ACC, MATH_ISD_ABS_ACC,  BAS_PROC_FRE     ;[1608] 098a 0b37 0977 27d4
    defw    BAS_PROC_INP, BAS_PROC_POS, MATH_S_SQR_ACC,  MATH_ISD_RND_ACC     ;[1610] 2aef 27f5 13e7 14c9
    defw    MATH_S_LOG_ACC, MATH_S_EXP_ACC, MATH_S_COS_ACC,  MATH_S_SIN_ACC     ;[1618] 0809 1439 1541 1547
    defw    MATH_S_TAN_ACC, MATH_S_ATN_ACC, BAS_PROC_PEEK, RAM_JT_CVI       ;[1620] 15a8 15bd 2caa 7952
    defw    RAM_JT_CVS,   RAM_JT_CVD,   RAM_JT_EOF,    RAM_JT_LOC       ;[1628] 7958 795e 7961 7964
    defw    RAM_JT_LOF,   RAM_JT_MKI,   RAM_JT_MKS,    RAM_JT_MKD       ;[1630] 7967 796a 796d 7970
    defw    MATH_ISD_CINT_ACC,MATH_ISD_CSNG_ACC,MATH_ISD_CDBL_ACC, MATH_ISD_FIX_ACC     ;[1638] 0a7f 0ab1 0adb 0b26
    defw    BAS_PROC_LEN, BAS_PROC_STR, BAS_PROC_VAL,  BAS_PROC_ASC     ;[1640] 2a03 2836 2ac5 2a0f
    defw    BAS_PROC_CHR, BAS_PROC_LEFT,BAS_PROC_RIGHT,BAS_PROC_MID     ;[1648] 2a1f 2a61 2a91 2a9a

;*********************************************************************
; Basic Tokens Names
; Every name starts with inverted char (7 bit is set) to recognize
; string boundary. Rest of token's char stored as ASCII chars.
; Empty slots were planned to contain DOS command but never used
; and routines addreses are pointing to place in RAM (jump table).
; These command were marked as name in brackets ie [CMD]
; Doc I found describes some command marked in brackects ie {RESTORE}
; which in fact have routines in ROM ready to use. (May be from VZ 300)
;----------------------
TAB_BASIC_NAMES     org     $1650                           
    defb    128|'E','ND'            ; 80 END           ;[1650] c5 4e 44
    defb    128|'F','OR'            ; 81 FOR           ;[1653] c6 4f 52
    defb    128|'R','ESET'          ; 82 RESET         ;[1656] d2 45 53 45 54
    defb    128|'S','ET'            ; 83 SET           ;[165b] d3 45 54
    defb    128|'C','LS'            ; 84 CLS           ;[165e] c3 4c 53
    defb    128| 1,0,0              ; 85 [CMD]         ;[1661] 81 00 00
    defb    128| 1,0,0,0,0,0        ; 86 {RANDOM}      ;[1664] 81 00 00 00 00 00 
    defb    128|'N','EXT'           ; 87 NEXT          ;[166a] ce 45 58 54
    defb    128|'D','ATA'           ; 88 DATA          ;[166e] c4 41 54 41
    defb    128|'I','NPUT'          ; 89 INPUT         ;[1672] c9 4e 50 55 54
    defb    128|'D','IM'            ; 8a DIM           ;[1677] c4 49 4d 
    defb    128|'R','EAD'           ; 8b READ          ;[167a] d2 45 41 44
    defb    128|'L','ET'            ; 8c LET           ;[167e] cc 45 54
    defb    128|'G','OTO'           ; 8d GOTO          ;[1681] c7 4f 54 4f
    defb    128|'R','UN'            ; 8e RUN           ;[1685] d2 55 4e
    defb    128|'I','F'             ; 8f IF            ;[1688] c9 46
    defb    128|'R','ESTORE'        ; 90 RESTORE       ;[168a] d2 45 53 54 4f 52 45
    defb    128|'G','OSUB'          ; 91 GOSUB         ;[1691] c7 4f 53 55 42
    defb    128|'R','ETURN'         ; 92 RETURN        ;[1696] d2 45 54 55 52 4e
    defb    128|'R','EM'            ; 93 REM           ;[169c] d2 45 4d
    defb    128|'S','TOP'           ; 94 STOP          ;[169f] d3 54 4f 50
    defb    128|'E','LSE'           ; 95 ELSE          ;[16a3] c5 4c 53 45
    defb    128|'C','OPY'           ; 96 COPY          ;[16a7] c3 4f 50 59
    defb    128|'C','OLOR'          ; 97 COLOR         ;[16ab] c3 4f 4c 4f 52
    defb    128|'V','ERIFY'         ; 98 VERIFY        ;[16b0] d6 45 52 49 46 59
    defb    128| 1,0,0,0,0,0        ; 99 {DEFINT}      ;[16b6] 81 00 00 00 00 00
    defb    128| 1,0,0,0,0,0        ; 9a {DEFSNG}      ;[16bc] 81 00 00 00 00 00
    defb    128| 1,0,0,0,0,0        ; 9b {DEFDBL}      ;[16c2] 81 00 00 00 00 00
    defb    128|'C','RUN'           ; 9c CRUN          ;[16c8] c3 52 55 4e
    defb    128|'M','ODE'           ; 9d MODE          ;[16cc] cd 4f 44 45
    defb    128|'S','OUND'          ; 9e SOUND         ;[16d0] d3 4f 55 4e 44
    defb    128| 1, 0,0,0,0,0       ; 9f {RESUME}      ;[16d5] 81 00 00 00 00 00
    defb    128|'O','UT'            ; a0 OUT           ;[16db] cf 55 54
    defb    128| 1,0                ; a1 {ON}          ;[16de] 81 00
    defb    128| 1,0,0,0            ; a2 [OPEN]        ;[16e0] 81 00 00 00
    defb    128| 1,0,0,0,0          ; a3 [FIELD]       ;[16e4] 81 00 00 00 00
    defb    128| 1,0,0              ; a4 [GET]         ;[16e9] 81 00 00
    defb    128| 1,0,0              ; a5 [PUT]         ;[16ec] 81 00 00
    defb    128| 1,0,0,0,0          ; a6 [CLOSE]       ;[16ef] 81 00 00 00 00
    defb    128| 1,0,0,0            ; a7 [LOAD]        ;[16f4] 81 00 00 00
    defb    128| 1,0,0,0,0          ; a8 [MERGE]       ;[16f8] 81 00 00 00 00
    defb    128| 1,0,0,0            ; a9 [NAME]        ;[16fd] 81 00 00 00
    defb    128| 1,0,0,0            ; aa [KILL]        ;[1701] 81 00 00 00
    defb    128| 1,0,0,0            ; ab [LSET]        ;[1705] 81 00 00 00
    defb    128| 1,0,0,0            ; ac [RSET]        ;[1709] 81 00 00 00
    defb    128| 1,0,0,0            ; ad [SAVE]        ;[170d] 81 00 00 00
    defb    128| 1,0,0,0,0,0        ; ae [SYSTEM]      ;[1711] 81 00 00 00 00 00
    defb    128|'L','PRINT'         ; af LPRINT        ;[1717] cc 50 52 49 4e 54
    defb    128| 1,0,0              ; b0 [DEF]         ;[171d] 81 00 00
    defb    128|'P','OKE'           ; b1 POKE          ;[1720] d0 4f 4b 45
    defb    128|'P','RINT'          ; b2 PRINT         ;[1724] d0 52 49 4e 54
    defb    128|'C','ONT'           ; b3 CONT          ;[1729] c3 4f 4e 54
    defb    128|'L','IST'           ; b4 LIST          ;[172d] cc 49 53 54
    defb    128|'L','LIST'          ; b5 LLIST         ;[1731] cc 4c 49 53 54
    defb    128| 1,0,0,0,0,0        ; b6 {DELETE}      ;[1736] 81 00 00 00 00 00
    defb    128| 1,0,0,0            ; b7 {AUTO}        ;[173c] 81 00 00 00
    defb    128|'C','LEAR'          ; b8 CLEAR         ;[1740] c3 4c 45 41 52
    defb    128|'C','LOAD'          ; b9 CLOAD         ;[1745] c3 4c 4f 41 44
    defb    128|'C','SAVE'          ; ba CSAVE         ;[174a] c3 53 41 56 45
    defb    128|'N','EW'            ; bb NEW           ;[174f] ce 45 57
;----------------------------------------------------------------------------------------------------------------------
    defb    128|'T','AB('           ; bc TAB(          ;[1752] d4 41 42 28
    defb    128|'T','O'             ; bd TO            ;[1756] d4 4f
    defb    128| 1,0                ; be [FN]          ;[1758] 81 00
    defb    128|'U','SING'          ; bf USING         ;[175a] d5 53 49 4e 47
    defb    128| 1,0,0,0,0,0        ; c0 {VARPTR}      ;[175f] 81 00 00 00 00 00
    defb    128|'U','SR'            ; c1 USR           ;[1765] d5 53 52
    defb    128| 1,0,0              ; c2 {ERL}         ;[1768] 81 00 00
    defb    128| 1,0,0              ; c3 {ERR}         ;[176b] 81 00 00
    defb    128| 1,0,0,0,0,0,0      ; c4 {STRING$}     ;[176e] 81 00 00 00 00 00 00
    defb    128| 1,0,0,0,0          ; c5 [INSTR]       ;[1775] 81 00 00 00 00
    defb    128|'P','OINT'          ; c6 POINT         ;[177a] d0 4f 49 4e 54
    defb    128| 1,0,0,0,0          ; c7 [TIME$]       ;[177f] 81 00 00 00 00
    defb    128| 1,0,0              ; c8 {MEM}         ;[1784] 81 00 00
    defb    128|'I','NKEY$'         ; c9 INKEY$        ;[1787] c9 4e 4b 45 59 24
    defb    128|'T','HEN'           ; ca THEN          ;[178d] d4 48 45 4e
    defb    128|'N','OT'            ; cb NOT           ;[1791] ce 4f 54
    defb    128|'S','TEP'           ; cc STEP          ;[1794] d3 54 45 50
    defb    128|'+'                 ; cd +             ;[1798] ab
    defb    128|'-'                 ; ce -             ;[1799] ad
    defb    128|'*'                 ; cf *             ;[179a] aa
    defb    128|'/'                 ; d0 /             ;[179b] af
    defb    128|'^'                 ; d1 ^             ;[179c] de 
    defb    128|'A','ND'            ; d2 AND           ;[179d] c1 4e 44
    defb    128|'O','R'             ; d3 OR            ;[17a0] cf 52
    defb    128|'>'                 ; d4 >             ;[17a2] be
    defb    128|'='                 ; d5 =             ;[17a3] bd
    defb    128|'<'                 ; d6 <             ;[17a4] bc
;----------------------------------------------------------------------------------------------------------------------
    defb    128|'S','GN'            ; d7 SGN           ;[17a5] d3 47 4e
    defb    128|'I','NT'            ; d8 INT           ;[17a8] c9 4e 54
    defb    128|'A','BS'            ; d9 ABS           ;[17ab] c1 42 53
    defb    128| 1,0,0              ; da {FRE}         ;[17ae] 81 00 00
    defb    128|'I','NP'            ; db INP           ;[17b1] c9 4e 50
    defb    128| 1,0,0              ; dc {POS}         ;[17b4] 81 00 00
    defb    128|'S','QR'            ; dd SQR           ;[17b7] d3 51 52
    defb    128|'R','ND'            ; de RND           ;[17ba] d2 4e 44
    defb    128|'L','OG'            ; df LOG           ;[17bd] cc 4f 47
    defb    128|'E','XP'            ; e0 EXP           ;[17c0] c5 58 50
    defb    128|'C','OS'            ; e1 COS           ;[17c3] c3 4f 53
    defb    128|'S','IN'            ; e2 SIN           ;[17c6] d3 49 4e
    defb    128|'T','AN'            ; e3 TAN           ;[17c9] d4 41 4e
    defb    128|'A','TN'            ; e4 ATN           ;[17cc] c1 54 4e
    defb    128|'P','EEK'           ; e5 PEEK          ;[17cf] d0 45 45 4b
    defb    128| 1,0,0              ; e6 [CVI]         ;[17d3] 81 00 00
    defb    128| 1,0,0              ; e7 [CVS]         ;[17d6] 81 00 00
    defb    128| 1,0,0              ; e8 [CVD]         ;[17d9] 81 00 00
    defb    128| 1,0,0              ; e9 [EOF]         ;[17dc] 81 00 00
    defb    128| 1,0,0              ; ea [LOC]         ;[17df] 81 00 00
    defb    128| 1,0,0              ; eb [LOF]         ;[17e2] 81 00 00
    defb    128| 1,0,0,0            ; ec [MKI$]        ;[17e5] 81 00 00 00
    defb    128| 1,0,0,0            ; ed [MKS$]        ;[17e9] 81 00 00 00
    defb    128| 1,0,0,0            ; ee [MKD$]        ;[17ed] 81 00 00 00
    defb    128| 1,0,0,0            ; ef {CINT}        ;[17f1] 81 00 00 00
    defb    128| 1,0,0,0            ; f0 {CSNG}        ;[17f5] 81 00 00 00
    defb    128| 1,0,0,0            ; f1 {CDBL}        ;[17f9] 81 00 00 00
    defb    128| 1,0,0              ; f2 {FIX}         ;[17fd] 81 00 00
    defb    128|'L','EN'            ; f3 LEN           ;[1800] cc 45 4e
    defb    128|'S','TR$'           ; f4 STR$          ;[1803] d3 54 52 24
    defb    128|'V','AL'            ; f5 VAL           ;[1807] d6 41 4c
    defb    128|'A','SC'            ; f6 ASC           ;[180a] c1 53 43
    defb    128|'C','HR$'           ; f7 CHR$          ;[180d] c3 48 52 24
    defb    128|'L','EFT$'          ; f8 LEFT$         ;[1811] cc 45 46 54 24
    defb    128|'R','IGHT$'         ; f9 RIGHT$        ;[1816] d2 49 47 48 54 24
    defb    128|'M','ID$'           ; fa MID$          ;[181c] cd 49 44 24

    defb    128|$27                 ; fb ' (apostrof)  ;[1820] a7
    defb    128| 0                  ; end of table  ;[1821] 80

;*********************************************************************
; Basic Routines Pointers
; Order from TAB_BASIC_NAMES
;----------------------
; Additional adresses used
RAM_JT_CMD  equ $7973
RAM_JT_OPEN  equ $7979
RAM_JT_FIELD  equ $797c  
RAM_JT_GET  equ $797f  
RAM_JT_PUT  equ $7982  
RAM_JT_CLOSE  equ $7985  
RAM_JT_LOAD  equ $7988  
RAM_JT_MERGE  equ $798b  
RAM_JT_NAME  equ $798e  
RAM_JT_KILL  equ $7991  
RAM_JT_LSET  equ $7997  
RAM_JT_RSET  equ $799a  
RAM_JT_SAVE  equ $79a0  
RAM_JT_DEF  equ $795b  
TAB_BASIC_POINTERS  org     $1822    
    defw    BAS_PROC_END,    BAS_PROC_FOR,    BAS_PROC_RESET,  BAS_PROC_SET     ;[1822] 1dae 1ca1 0138 0135
    defw    BAS_PROC_CLS,    RAM_JT_CMD,      UPDATE_RANDOM, BAS_PROC_NEXT    ;[182a] 01c9 7973 01d3 22b6
    defw    BAS_PROC_DATA,   BAS_PROC_INPUT,  BAS_PROC_DIM,    BAS_PROC_READ    ;[1832] 1f05 219a 2608 21ef
    defw    BAS_PROC_LET,    BAS_PROC_GOTO,   BAS_PROC_RUN,    BAS_PROC_IF      ;[183a] 1f21 1ec2 1ea3 2039
    defw    BAS_PROC_RESTORE, BAS_PROC_GOSUB, BAS_PROC_RETURN, BAS_PROC_REM     ;[1842] 1d91 1eb1 1ede 1f07
    defw    BAS_PROC_STOP,   BAS_PROC_ELSE,   BAS_PROC_COPY,   BAS_PROC_COLOR   ;[184a] 1da9 1f07 3912 389d
    defw    BAS_PROC_VERIFY, BAS_PROC_DEFINT, BAS_PROC_DEFSNG, BAS_PROC_DEFDBL  ;[1852] 3738 1e03 1e06 1e09
    defw    BAS_PROC_CRUN,   BAS_PROC_MODE,   BAS_PROC_SOUND,  BAS_PROC_RESUME  ;[185a] 372e 2e63 2bf5 1faf
    defw    BAS_PROC_OUT,    BAS_PROC_ON,     RAM_JT_OPEN,     RAM_JT_FIELD     ;[1862] 2afb 1f6c 7979 797c
    defw    RAM_JT_GET,      RAM_JT_PUT,      RAM_JT_CLOSE,    RAM_JT_LOAD      ;[186a] 797f 7982 7985 7988
    defw    RAM_JT_MERGE,    RAM_JT_NAME,     RAM_JT_KILL,     RAM_JT_LSET      ;[1872] 798b 798e 7991 7997
    defw    RAM_JT_RSET,     RAM_JT_SAVE,     SYS_RESET,       BAS_PROC_LPRINT  ;[187a] 799a 79a0 0000 2067
    defw    RAM_JT_DEF,      BAS_PROC_POKE,   BAS_PROC_PRINT,  BAS_PROC_CONT    ;[1882] 795b 2cb1 206f 1de4
    defw    BAS_PROC_LIST,   BAS_PROC_LLIST,  BAS_PROC_DELETE, BAS_PROC_AUTO    ;[188a] 2b2e 2b29 2bc6 2008
    defw    BAS_PROC_CLEAR,  BAS_PROC_CLOAD,  BAS_PROC_CSAVE,  BAS_PROC_NEW     ;[1892] 1e7a 3656 34a9 1b49
;------------------------------------------------------------------------------------------------------------


                    ld      a,c                             ;[189a] 79
                    ld      a,c                             ;[189b] 79
                    ld      a,h                             ;[189c] 7c
                    ld      a,h                             ;[189d] 7c
                    ld      a,a                             ;[189e] 7f
                    ld      d,b                             ;[189f] 50
                    ld      b,(hl)                          ;[18a0] 46
                    in      a,($0a)                         ;[18a1] db 0a
                    nop                                     ;[18a3] 00
                    nop                                     ;[18a4] 00
                    ld      a,a                             ;[18a5] 7f
                    ld      a,(bc)                          ;[18a6] 0a
                    call    p,$b10a                         ;[18a7] f4 0a b1
                    ld      a,(bc)                          ;[18aa] 0a
                    ld      (hl),a                          ;[18ab] 77
                    inc     c                               ;[18ac] 0c
                    ld      (hl),b                          ;[18ad] 70
                    inc     c                               ;[18ae] 0c
                    and     c                               ;[18af] a1
                    dec     c                               ;[18b0] 0d
                    push    hl                              ;[18b1] e5
                    dec     c                               ;[18b2] 0d
                    ld      a,b                             ;[18b3] 78
                    ld      a,(bc)                          ;[18b4] 0a
                    ld      d,$07                           ;[18b5] 16 07
                    inc     de                              ;[18b7] 13
                    rlca                                    ;[18b8] 07
                    ld      b,a                             ;[18b9] 47
                    ex      af,af'                          ;[18ba] 08
                    and     d                               ;[18bb] a2
                    ex      af,af'                          ;[18bc] 08
                    inc     c                               ;[18bd] 0c
                    ld      a,(bc)                          ;[18be] 0a
                    jp      nc,$c70b                        ;[18bf] d2 0b c7
                    dec     bc                              ;[18c2] 0b
                    jp      p,$900b                         ;[18c3] f2 0b 90
                    inc     h                               ;[18c6] 24
                    add     hl,sp                           ;[18c7] 39
                    ld      a,(bc)                          ;[18c8] 0a
                    ld      c,(hl)                          ;[18c9] 4e
                    ld      b,(hl)                          ;[18ca] 46
                    ld      d,e                             ;[18cb] 53
                    ld      c,(hl)                          ;[18cc] 4e
                    ld      d,d                             ;[18cd] 52
                    ld      b,a                             ;[18ce] 47
                    ld      c,a                             ;[18cf] 4f
                    ld      b,h                             ;[18d0] 44
                    ld      b,(hl)                          ;[18d1] 46
                    ld      b,e                             ;[18d2] 43
                    ld      c,a                             ;[18d3] 4f
                    ld      d,(hl)                          ;[18d4] 56
                    ld      c,a                             ;[18d5] 4f
                    ld      c,l                             ;[18d6] 4d
                    ld      d,l                             ;[18d7] 55
                    ld      c,h                             ;[18d8] 4c
                    ld      b,d                             ;[18d9] 42
                    ld      d,e                             ;[18da] 53
                    ld      b,h                             ;[18db] 44
                    ld      b,h                             ;[18dc] 44
                    cpl                                     ;[18dd] 2f
                    jr      nc,$1929                        ;[18de] 30 49
                    ld      b,h                             ;[18e0] 44
                    ld      d,h                             ;[18e1] 54
                    ld      c,l                             ;[18e2] 4d
                    ld      c,a                             ;[18e3] 4f
                    ld      d,e                             ;[18e4] 53
                    ld      c,h                             ;[18e5] 4c
                    ld      d,e                             ;[18e6] 53
                    ld      d,e                             ;[18e7] 53
                    ld      d,h                             ;[18e8] 54
                    ld      b,e                             ;[18e9] 43
                    ld      c,(hl)                          ;[18ea] 4e
                    ld      c,(hl)                          ;[18eb] 4e
                    ld      d,d                             ;[18ec] 52
                    ld      d,d                             ;[18ed] 52
                    ld      d,a                             ;[18ee] 57
                    ld      d,l                             ;[18ef] 55
                    ld      b,l                             ;[18f0] 45
                    ld      c,l                             ;[18f1] 4d
                    ld      c,a                             ;[18f2] 4f
                    ld      b,(hl)                          ;[18f3] 46
                    ld      b,h                             ;[18f4] 44
                    ld      c,h                             ;[18f5] 4c
                    inc     sp                              ;[18f6] 33
                    sub     $00                             ;[18f7] d6 00
                    ld      l,a                             ;[18f9] 6f
                    ld      a,h                             ;[18fa] 7c
                    sbc     $00                             ;[18fb] de 00
                    ld      h,a                             ;[18fd] 67
                    ld      a,b                             ;[18fe] 78
                    sbc     $00                             ;[18ff] de 00
                    ld      b,a                             ;[1901] 47
                    ld      a,$00                           ;[1902] 3e 00
                    ret                                     ;[1904] c9

                    ld      c,d                             ;[1905] 4a
                    ld      e,$40                           ;[1906] 1e 40
                    and     $4d                             ;[1908] e6 4d
                    in      a,($00)                         ;[190a] db 00
                    ret                                     ;[190c] c9

                    out     ($00),a                         ;[190d] d3 00
                    ret                                     ;[190f] c9

                    nop                                     ;[1910] 00
                    nop                                     ;[1911] 00
                    nop                                     ;[1912] 00
                    nop                                     ;[1913] 00
                    ld      b,b                             ;[1914] 40
                    jr      nc,$1917                        ;[1915] 30 00
                    ld      c,h                             ;[1917] 4c
                    ld      a,e                             ;[1918] 7b
                    cp      $ff                             ;[1919] fe ff
                    jp      (hl)                            ;[191b] e9
                    ld      a,d                             ;[191c] 7a
                    jr      nz,$1964                        ;[191d] 20 45
                    ld      d,d                             ;[191f] 52
                    ld      d,d                             ;[1920] 52
                    ld      c,a                             ;[1921] 4f
                    ld      d,d                             ;[1922] 52
                    nop                                     ;[1923] 00
                    jr      nz,$196f                        ;[1924] 20 49
                    ld      c,(hl)                          ;[1926] 4e
                    jr      nz,$1929                        ;[1927] 20 00
                    ld      d,d                             ;[1929] 52
                    ld      b,l                             ;[192a] 45
                    ld      b,c                             ;[192b] 41
                    ld      b,h                             ;[192c] 44
                    ld      e,c                             ;[192d] 59
                    dec     c                               ;[192e] 0d
                    nop                                     ;[192f] 00
                    ld      b,d                             ;[1930] 42
                    ld      d,d                             ;[1931] 52
                    ld      b,l                             ;[1932] 45
                    ld      b,c                             ;[1933] 41
                    ld      c,e                             ;[1934] 4b
                    nop                                     ;[1935] 00
                    ld      hl,$0004                        ;[1936] 21 04 00
                    add     hl,sp                           ;[1939] 39
                    ld      a,(hl)                          ;[193a] 7e
                    inc     hl                              ;[193b] 23
                    cp      $81                             ;[193c] fe 81
                    ret     nz                              ;[193e] c0
                    ld      c,(hl)                          ;[193f] 4e
                    inc     hl                              ;[1940] 23
                    ld      b,(hl)                          ;[1941] 46
                    inc     hl                              ;[1942] 23
                    push    hl                              ;[1943] e5
                    ld      l,c                             ;[1944] 69
                    ld      h,b                             ;[1945] 60
                    ld      a,d                             ;[1946] 7a
                    or      e                               ;[1947] b3
                    ex      de,hl                           ;[1948] eb
                    jr      z,$194d                         ;[1949] 28 02
                    ex      de,hl                           ;[194b] eb
                    rst     $18                             ;[194c] df
                    ld      bc,$000e                        ;[194d] 01 0e 00
                    pop     hl                              ;[1950] e1
                    ret     z                               ;[1951] c8
                    add     hl,bc                           ;[1952] 09
                    jr      $193a                           ;[1953] 18 e5
                    call    $196c                           ;[1955] cd 6c 19
                    push    bc                              ;[1958] c5
                    ex      (sp),hl                         ;[1959] e3
                    pop     bc                              ;[195a] c1
                    rst     $18                             ;[195b] df
                    ld      a,(hl)                          ;[195c] 7e
                    ld      (bc),a                          ;[195d] 02
                    ret     z                               ;[195e] c8
                    dec     bc                              ;[195f] 0b
                    dec     hl                              ;[1960] 2b
                    jr      $195b                           ;[1961] 18 f8
                    push    hl                              ;[1963] e5
                    ld      hl,($78fd)                      ;[1964] 2a fd 78
                    ld      b,$00                           ;[1967] 06 00
                    add     hl,bc                           ;[1969] 09
                    add     hl,bc                           ;[196a] 09
                    ld      a,$e5                           ;[196b] 3e e5
                    ld      a,$c6                           ;[196d] 3e c6
                    sub     l                               ;[196f] 95
                    ld      l,a                             ;[1970] 6f
                    ld      a,$ff                           ;[1971] 3e ff
                    sbc     h                               ;[1973] 9c
                    jr      c,$197a                         ;[1974] 38 04
                    ld      h,a                             ;[1976] 67
                    add     hl,sp                           ;[1977] 39
                    pop     hl                              ;[1978] e1
                    ret     c                               ;[1979] d8
                    ld      e,$0c                           ;[197a] 1e 0c
                    jr      $19a2                           ;[197c] 18 24
                    ld      hl,($78a2)                      ;[197e] 2a a2 78
                    ld      a,h                             ;[1981] 7c
                    and     l                               ;[1982] a5
                    inc     a                               ;[1983] 3c
                    jr      z,$198e                         ;[1984] 28 08
                    ld      a,($78f2)                       ;[1986] 3a f2 78
                    or      a                               ;[1989] b7
                    ld      e,$22                           ;[198a] 1e 22
                    jr      nz,$19a2                        ;[198c] 20 14
                    jp      $1dc1                           ;[198e] c3 c1 1d
                    ld      hl,($78da)                      ;[1991] 2a da 78
                    ld      ($78a2),hl                      ;[1994] 22 a2 78
                    ld      e,$02                           ;[1997] 1e 02
                    ld      bc,$141e                        ;[1999] 01 1e 14
                    ld      bc,$001e                        ;[199c] 01 1e 00
                    ld      bc,$241e                        ;[199f] 01 1e 24
                    ld      hl,($78a2)                      ;[19a2] 2a a2 78
                    ld      ($78ea),hl                      ;[19a5] 22 ea 78
                    ld      ($78ec),hl                      ;[19a8] 22 ec 78
                    ld      bc,$19b4                        ;[19ab] 01 b4 19
                    ld      hl,($78e8)                      ;[19ae] 2a e8 78
                    jp      $1b9a                           ;[19b1] c3 9a 1b
                    pop     bc                              ;[19b4] c1
                    ld      a,e                             ;[19b5] 7b
                    ld      c,e                             ;[19b6] 4b
                    ld      ($789a),a                       ;[19b7] 32 9a 78
                    ld      hl,($78e6)                      ;[19ba] 2a e6 78
                    ld      ($78ee),hl                      ;[19bd] 22 ee 78
                    ex      de,hl                           ;[19c0] eb
                    ld      hl,($78ea)                      ;[19c1] 2a ea 78
                    ld      a,h                             ;[19c4] 7c
                    and     l                               ;[19c5] a5
                    inc     a                               ;[19c6] 3c
                    jr      z,$19d0                         ;[19c7] 28 07
                    ld      ($78f5),hl                      ;[19c9] 22 f5 78
                    ex      de,hl                           ;[19cc] eb
                    ld      ($78f7),hl                      ;[19cd] 22 f7 78
                    ld      hl,($78f0)                      ;[19d0] 2a f0 78
                    ld      a,h                             ;[19d3] 7c
                    or      l                               ;[19d4] b5
                    ex      de,hl                           ;[19d5] eb
                    ld      hl,$78f2                        ;[19d6] 21 f2 78
                    jr      z,$19e3                         ;[19d9] 28 08
                    and     (hl)                            ;[19db] a6
                    jr      nz,$19e3                        ;[19dc] 20 05
                    dec     (hl)                            ;[19de] 35
                    ex      de,hl                           ;[19df] eb
                    jp      $1d36                           ;[19e0] c3 36 1d
                    xor     a                               ;[19e3] af
                    ld      (hl),a                          ;[19e4] 77
                    ld      e,c                             ;[19e5] 59
                    call    $20f9                           ;[19e6] cd f9 20
                    ld      hl,$3cec                        ;[19e9] 21 ec 3c
                    call    $79a6                           ;[19ec] cd a6 79
                    ld      d,a                             ;[19ef] 57
                    ld      a,$3f                           ;[19f0] 3e 3f
                    call    $032a                           ;[19f2] cd 2a 03
                    call    $3cd4                           ;[19f5] cd d4 3c
                    nop                                     ;[19f8] 00
                    nop                                     ;[19f9] 00
                    nop                                     ;[19fa] 00
                    nop                                     ;[19fb] 00
                    nop                                     ;[19fc] 00
                    nop                                     ;[19fd] 00
                    ld      hl,$191d                        ;[19fe] 21 1d 19
                    push    hl                              ;[1a01] e5
                    ld      hl,($78ea)                      ;[1a02] 2a ea 78
                    ex      (sp),hl                         ;[1a05] e3
                    call    SYS_STR_TO_DEVICE                           ;[1a06] cd a7 28
                    pop     hl                              ;[1a09] e1
                    ld      de,$fffe                        ;[1a0a] 11 fe ff
                    rst     $18                             ;[1a0d] df
                    jp      z,SYS_INIT_VARS                   ;[1a0e] ca 74 06
                    ld      a,h                             ;[1a11] 7c
                    and     l                               ;[1a12] a5
                    inc     a                               ;[1a13] 3c
                    call    nz,$0fa7                        ;[1a14] c4 a7 0f
                    ld      a,$c1                           ;[1a17] 3e c1
                    call    $038b                           ;[1a19] cd 8b 03
                    call    $79ac                           ;[1a1c] cd ac 79
                    nop                                     ;[1a1f] 00
                    nop                                     ;[1a20] 00
                    nop                                     ;[1a21] 00
                    call    $20f9                           ;[1a22] cd f9 20
                    ld      hl,$1929                        ;[1a25] 21 29 19
                    call    SYS_STR_TO_DEVICE                           ;[1a28] cd a7 28
                    ld      a,($789a)                       ;[1a2b] 3a 9a 78
                    sub     $02                             ;[1a2e] d6 02
                    nop                                     ;[1a30] 00
                    nop                                     ;[1a31] 00
                    nop                                     ;[1a32] 00
                    ld      hl,$ffff                        ;[1a33] 21 ff ff
                    ld      ($78a2),hl                      ;[1a36] 22 a2 78
                    ld      a,($78e1)                       ;[1a39] 3a e1 78
                    or      a                               ;[1a3c] b7
                    jr      z,$1a79                         ;[1a3d] 28 3a
                    ld      hl,($78e2)                      ;[1a3f] 2a e2 78
                    push    hl                              ;[1a42] e5
                    call    SYS_DISPLAY_HL                           ;[1a43] cd af 0f
                    ld      a,$20                           ;[1a46] 3e 20
                    call    $032a                           ;[1a48] cd 2a 03
                    pop     de                              ;[1a4b] d1
                    push    de                              ;[1a4c] d5
                    call    $1b2c                           ;[1a4d] cd 2c 1b
                    call    c,$2e53                         ;[1a50] dc 53 2e
                    nop                                     ;[1a53] 00
                    call    $03e3                           ;[1a54] cd e3 03
                    pop     de                              ;[1a57] d1
                    jr      nc,$1a60                        ;[1a58] 30 06
                    xor     a                               ;[1a5a] af
                    ld      ($78e1),a                       ;[1a5b] 32 e1 78
                    jr      $1a19                           ;[1a5e] 18 b9
                    ld      hl,($78e4)                      ;[1a60] 2a e4 78
                    add     hl,de                           ;[1a63] 19
                    jr      c,$1a5a                         ;[1a64] 38 f4
                    push    de                              ;[1a66] d5
                    ld      de,$fff9                        ;[1a67] 11 f9 ff
                    rst     $18                             ;[1a6a] df
                    pop     de                              ;[1a6b] d1
                    jr      nc,$1a5a                        ;[1a6c] 30 ec
                    ld      ($78e2),hl                      ;[1a6e] 22 e2 78
                    nop                                     ;[1a71] 00
                    nop                                     ;[1a72] 00
                    ld      hl,$79e7                        ;[1a73] 21 e7 79
                    jp      $1a81                           ;[1a76] c3 81 1a
                    nop                                     ;[1a79] 00
                    nop                                     ;[1a7a] 00
                    call    $03e3                           ;[1a7b] cd e3 03
                    jp      c,$1a33                         ;[1a7e] da 33 1a
                    rst     $10                             ;[1a81] d7
                    inc     a                               ;[1a82] 3c
                    dec     a                               ;[1a83] 3d
                    jp      z,$1a33                         ;[1a84] ca 33 1a
                    push    af                              ;[1a87] f5
                    call    $1e5a                           ;[1a88] cd 5a 1e
                    dec     hl                              ;[1a8b] 2b
                    ld      a,(hl)                          ;[1a8c] 7e
                    cp      $20                             ;[1a8d] fe 20
                    jr      z,$1a8b                         ;[1a8f] 28 fa
                    inc     hl                              ;[1a91] 23
                    ld      a,(hl)                          ;[1a92] 7e
                    cp      $20                             ;[1a93] fe 20
                    call    z,$09c9                         ;[1a95] cc c9 09
                    push    de                              ;[1a98] d5
                    call    $1bc0                           ;[1a99] cd c0 1b
                    pop     de                              ;[1a9c] d1
                    pop     af                              ;[1a9d] f1
                    ld      ($78e6),hl                      ;[1a9e] 22 e6 78
                    call    $79b2                           ;[1aa1] cd b2 79
                    jp      nc,$1d5a                        ;[1aa4] d2 5a 1d
                    push    de                              ;[1aa7] d5
                    push    bc                              ;[1aa8] c5
                    xor     a                               ;[1aa9] af
                    ld      ($78dd),a                       ;[1aaa] 32 dd 78
                    rst     $10                             ;[1aad] d7
                    or      a                               ;[1aae] b7
                    push    af                              ;[1aaf] f5
                    ex      de,hl                           ;[1ab0] eb
                    ld      ($78ec),hl                      ;[1ab1] 22 ec 78
                    ex      de,hl                           ;[1ab4] eb
                    call    $1b2c                           ;[1ab5] cd 2c 1b
                    push    bc                              ;[1ab8] c5
                    call    c,$2be4                         ;[1ab9] dc e4 2b
                    pop     de                              ;[1abc] d1
                    pop     af                              ;[1abd] f1
                    push    de                              ;[1abe] d5
                    jr      z,$1ae8                         ;[1abf] 28 27
                    pop     de                              ;[1ac1] d1
                    ld      hl,($78f9)                      ;[1ac2] 2a f9 78
                    ex      (sp),hl                         ;[1ac5] e3
                    pop     bc                              ;[1ac6] c1
                    add     hl,bc                           ;[1ac7] 09
                    push    hl                              ;[1ac8] e5
                    call    $1955                           ;[1ac9] cd 55 19
                    pop     hl                              ;[1acc] e1
                    ld      ($78f9),hl                      ;[1acd] 22 f9 78
                    ex      de,hl                           ;[1ad0] eb
                    ld      (hl),h                          ;[1ad1] 74
                    pop     de                              ;[1ad2] d1
                    push    hl                              ;[1ad3] e5
                    inc     hl                              ;[1ad4] 23
                    inc     hl                              ;[1ad5] 23
                    ld      (hl),e                          ;[1ad6] 73
                    inc     hl                              ;[1ad7] 23
                    ld      (hl),d                          ;[1ad8] 72
                    inc     hl                              ;[1ad9] 23
                    ex      de,hl                           ;[1ada] eb
                    ld      hl,($78a7)                      ;[1adb] 2a a7 78
                    ex      de,hl                           ;[1ade] eb
                    dec     de                              ;[1adf] 1b
                    dec     de                              ;[1ae0] 1b
                    ld      a,(de)                          ;[1ae1] 1a
                    ld      (hl),a                          ;[1ae2] 77
                    inc     hl                              ;[1ae3] 23
                    inc     de                              ;[1ae4] 13
                    or      a                               ;[1ae5] b7
                    jr      nz,$1ae1                        ;[1ae6] 20 f9
                    pop     de                              ;[1ae8] d1
                    call    $1afc                           ;[1ae9] cd fc 1a
                    call    $79b5                           ;[1aec] cd b5 79
                    call    $1b5d                           ;[1aef] cd 5d 1b
                    call    $79b8                           ;[1af2] cd b8 79
                    jp      $1a33                           ;[1af5] c3 33 1a
                    ld      hl,($78a4)                      ;[1af8] 2a a4 78
                    ex      de,hl                           ;[1afb] eb
                    ld      h,d                             ;[1afc] 62
                    ld      l,e                             ;[1afd] 6b
                    ld      a,(hl)                          ;[1afe] 7e
                    inc     hl                              ;[1aff] 23
                    or      (hl)                            ;[1b00] b6
                    ret     z                               ;[1b01] c8
                    inc     hl                              ;[1b02] 23
                    inc     hl                              ;[1b03] 23
                    inc     hl                              ;[1b04] 23
                    xor     a                               ;[1b05] af
                    cp      (hl)                            ;[1b06] be
                    inc     hl                              ;[1b07] 23
                    jr      nz,$1b06                        ;[1b08] 20 fc
                    ex      de,hl                           ;[1b0a] eb
                    ld      (hl),e                          ;[1b0b] 73
                    inc     hl                              ;[1b0c] 23
                    ld      (hl),d                          ;[1b0d] 72
                    jr      $1afc                           ;[1b0e] 18 ec
                    ld      de,$0000                        ;[1b10] 11 00 00
                    push    de                              ;[1b13] d5
                    jr      z,$1b1f                         ;[1b14] 28 09
                    pop     de                              ;[1b16] d1
                    call    $1e4f                           ;[1b17] cd 4f 1e
                    push    de                              ;[1b1a] d5
                    jr      z,$1b28                         ;[1b1b] 28 0b
                    rst     $08                             ;[1b1d] cf
                    adc     $11                             ;[1b1e] ce 11
                    jp      m,$c4ff                         ;[1b20] fa ff c4
                    ld      c,a                             ;[1b23] 4f
                    ld      e,$c2                           ;[1b24] 1e c2
                    sub     a                               ;[1b26] 97
                    add     hl,de                           ;[1b27] 19
                    ex      de,hl                           ;[1b28] eb
                    pop     de                              ;[1b29] d1
                    ex      (sp),hl                         ;[1b2a] e3
                    push    hl                              ;[1b2b] e5
                    ld      hl,($78a4)                      ;[1b2c] 2a a4 78
                    ld      b,h                             ;[1b2f] 44
                    ld      c,l                             ;[1b30] 4d
                    ld      a,(hl)                          ;[1b31] 7e
                    inc     hl                              ;[1b32] 23
                    or      (hl)                            ;[1b33] b6
                    dec     hl                              ;[1b34] 2b
                    ret     z                               ;[1b35] c8
                    inc     hl                              ;[1b36] 23
                    inc     hl                              ;[1b37] 23
                    ld      a,(hl)                          ;[1b38] 7e
                    inc     hl                              ;[1b39] 23
                    ld      h,(hl)                          ;[1b3a] 66
                    ld      l,a                             ;[1b3b] 6f
                    rst     $18                             ;[1b3c] df
                    ld      h,b                             ;[1b3d] 60
                    ld      l,c                             ;[1b3e] 69
                    ld      a,(hl)                          ;[1b3f] 7e
                    inc     hl                              ;[1b40] 23
                    ld      h,(hl)                          ;[1b41] 66
                    ld      l,a                             ;[1b42] 6f
                    ccf                                     ;[1b43] 3f
                    ret     z                               ;[1b44] c8
                    ccf                                     ;[1b45] 3f
                    ret     nc                              ;[1b46] d0
                    jr      $1b2f                           ;[1b47] 18 e6


;*********************************************************************************************************************
; NEW
;BAS_CODE_NEW          equ     $bb
BAS_PROC_NEW:
                    ret     nz                              ;[1b49] c0
                    call    BAS_PROC_CLS                           ;[1b4a] cd c9 01
                    ld      hl,($78a4)                      ;[1b4d] 2a a4 78
                    call    $1df8                           ;[1b50] cd f8 1d
                    ld      ($78e1),a                       ;[1b53] 32 e1 78
                    ld      (hl),a                          ;[1b56] 77
                    inc     hl                              ;[1b57] 23
                    ld      (hl),a                          ;[1b58] 77
                    inc     hl                              ;[1b59] 23
                    ld      ($78f9),hl                      ;[1b5a] 22 f9 78
                    ld      hl,($78a4)                      ;[1b5d] 2a a4 78
                    dec     hl                              ;[1b60] 2b
                    ld      ($78df),hl                      ;[1b61] 22 df 78
                    ld      b,$1a                           ;[1b64] 06 1a
                    ld      hl,$7901                        ;[1b66] 21 01 79
                    ld      (hl),$04                        ;[1b69] 36 04
                    inc     hl                              ;[1b6b] 23
                    djnz    $1b69                           ;[1b6c] 10 fb
                    xor     a                               ;[1b6e] af
                    ld      ($78f2),a                       ;[1b6f] 32 f2 78
                    ld      l,a                             ;[1b72] 6f
                    ld      h,a                             ;[1b73] 67
                    ld      ($78f0),hl                      ;[1b74] 22 f0 78
                    ld      ($78f7),hl                      ;[1b77] 22 f7 78
                    ld      hl,($78b1)                      ;[1b7a] 2a b1 78
                    ld      ($78d6),hl                      ;[1b7d] 22 d6 78
                    call    BAS_PROC_RESTORE                           ;[1b80] cd 91 1d
                    ld      hl,($78f9)                      ;[1b83] 2a f9 78
                    ld      ($78fb),hl                      ;[1b86] 22 fb 78
                    ld      ($78fd),hl                      ;[1b89] 22 fd 78
                    call    $79bb                           ;[1b8c] cd bb 79
                    pop     bc                              ;[1b8f] c1
                    ld      hl,($78a0)                      ;[1b90] 2a a0 78
                    dec     hl                              ;[1b93] 2b
                    dec     hl                              ;[1b94] 2b
                    ld      ($78e8),hl                      ;[1b95] 22 e8 78
                    inc     hl                              ;[1b98] 23
                    inc     hl                              ;[1b99] 23
                    ld      sp,hl                           ;[1b9a] f9
                    ld      hl,$78b5                        ;[1b9b] 21 b5 78
                    ld      ($78b3),hl                      ;[1b9e] 22 b3 78
                    call    $038b                           ;[1ba1] cd 8b 03
                    call    $2169                           ;[1ba4] cd 69 21
                    xor     a                               ;[1ba7] af
                    ld      h,a                             ;[1ba8] 67
                    ld      l,a                             ;[1ba9] 6f
                    ld      ($78dc),a                       ;[1baa] 32 dc 78
                    push    hl                              ;[1bad] e5
                    push    bc                              ;[1bae] c5
                    ld      hl,($78df)                      ;[1baf] 2a df 78
                    ret                                     ;[1bb2] c9

                    ld      a,$3f                           ;[1bb3] 3e 3f
                    call    $032a                           ;[1bb5] cd 2a 03
                    ld      a,$20                           ;[1bb8] 3e 20
                    call    $032a                           ;[1bba] cd 2a 03
                    jp      $053a                           ;[1bbd] c3 3a 05
                    xor     a                               ;[1bc0] af
                    ld      ($78b0),a                       ;[1bc1] 32 b0 78
                    ld      c,a                             ;[1bc4] 4f
                    ex      de,hl                           ;[1bc5] eb
                    ld      hl,($78a7)                      ;[1bc6] 2a a7 78
                    dec     hl                              ;[1bc9] 2b
                    dec     hl                              ;[1bca] 2b
                    ex      de,hl                           ;[1bcb] eb
                    ld      a,(hl)                          ;[1bcc] 7e
                    cp      $20                             ;[1bcd] fe 20
                    jp      z,$1c5b                         ;[1bcf] ca 5b 1c
                    ld      b,a                             ;[1bd2] 47
                    cp      $22                             ;[1bd3] fe 22
                    jp      z,$1c77                         ;[1bd5] ca 77 1c
                    or      a                               ;[1bd8] b7
                    jp      z,$1c7d                         ;[1bd9] ca 7d 1c
                    ld      a,($78b0)                       ;[1bdc] 3a b0 78
                    or      a                               ;[1bdf] b7
                    ld      a,(hl)                          ;[1be0] 7e
                    jp      nz,$1c5b                        ;[1be1] c2 5b 1c
                    cp      $3f                             ;[1be4] fe 3f
                    ld      a,$b2                           ;[1be6] 3e b2
                    jp      z,$1c5b                         ;[1be8] ca 5b 1c
                    ld      a,(hl)                          ;[1beb] 7e
                    cp      $30                             ;[1bec] fe 30
                    jr      c,$1bf5                         ;[1bee] 38 05
                    cp      $3c                             ;[1bf0] fe 3c
                    jp      c,$1c5b                         ;[1bf2] da 5b 1c
                    push    de                              ;[1bf5] d5
                    ld      de,$164f                        ;[1bf6] 11 4f 16
                    push    bc                              ;[1bf9] c5
                    ld      bc,$1c3d                        ;[1bfa] 01 3d 1c
                    push    bc                              ;[1bfd] c5
                    ld      b,$7f                           ;[1bfe] 06 7f
                    ld      a,(hl)                          ;[1c00] 7e
                    cp      $61                             ;[1c01] fe 61
                    jr      c,$1c0c                         ;[1c03] 38 07
                    cp      $7b                             ;[1c05] fe 7b
                    jr      nc,$1c0c                        ;[1c07] 30 03
                    and     $5f                             ;[1c09] e6 5f
                    ld      (hl),a                          ;[1c0b] 77
                    ld      c,(hl)                          ;[1c0c] 4e
                    ex      de,hl                           ;[1c0d] eb
                    inc     hl                              ;[1c0e] 23
                    or      (hl)                            ;[1c0f] b6
                    jp      p,$1c0e                         ;[1c10] f2 0e 1c
                    inc     b                               ;[1c13] 04
                    ld      a,(hl)                          ;[1c14] 7e
                    and     $7f                             ;[1c15] e6 7f
                    ret     z                               ;[1c17] c8
                    cp      c                               ;[1c18] b9
                    jr      nz,$1c0e                        ;[1c19] 20 f3
                    ex      de,hl                           ;[1c1b] eb
                    push    hl                              ;[1c1c] e5
                    inc     de                              ;[1c1d] 13
                    ld      a,(de)                          ;[1c1e] 1a
                    or      a                               ;[1c1f] b7
                    jp      m,$1c39                         ;[1c20] fa 39 1c
                    ld      c,a                             ;[1c23] 4f
                    ld      a,b                             ;[1c24] 78
                    cp      $8d                             ;[1c25] fe 8d
                    jr      nz,$1c2b                        ;[1c27] 20 02
                    rst     $10                             ;[1c29] d7
                    dec     hl                              ;[1c2a] 2b
                    inc     hl                              ;[1c2b] 23
                    ld      a,(hl)                          ;[1c2c] 7e
                    cp      $61                             ;[1c2d] fe 61
                    jr      c,$1c33                         ;[1c2f] 38 02
                    and     $5f                             ;[1c31] e6 5f
                    cp      c                               ;[1c33] b9
                    jr      z,$1c1d                         ;[1c34] 28 e7
                    pop     hl                              ;[1c36] e1
                    jr      $1c0c                           ;[1c37] 18 d3
                    ld      c,b                             ;[1c39] 48
                    pop     af                              ;[1c3a] f1
                    ex      de,hl                           ;[1c3b] eb
                    ret                                     ;[1c3c] c9

                    ex      de,hl                           ;[1c3d] eb
                    ld      a,c                             ;[1c3e] 79
                    pop     bc                              ;[1c3f] c1
                    pop     de                              ;[1c40] d1
                    ex      de,hl                           ;[1c41] eb
                    cp      $95                             ;[1c42] fe 95
                    ld      (hl),$3a                        ;[1c44] 36 3a
                    jr      nz,$1c4a                        ;[1c46] 20 02
                    inc     c                               ;[1c48] 0c
                    inc     hl                              ;[1c49] 23
                    cp      $fb                             ;[1c4a] fe fb
                    jr      nz,$1c5a                        ;[1c4c] 20 0c
                    ld      (hl),$3a                        ;[1c4e] 36 3a
                    inc     hl                              ;[1c50] 23
                    ld      b,$93                           ;[1c51] 06 93
                    ld      (hl),b                          ;[1c53] 70
                    inc     hl                              ;[1c54] 23
                    ex      de,hl                           ;[1c55] eb
                    inc     c                               ;[1c56] 0c
                    inc     c                               ;[1c57] 0c
                    jr      $1c77                           ;[1c58] 18 1d
                    ex      de,hl                           ;[1c5a] eb
                    inc     hl                              ;[1c5b] 23
                    ld      (de),a                          ;[1c5c] 12
                    inc     de                              ;[1c5d] 13
                    inc     c                               ;[1c5e] 0c
                    sub     $3a                             ;[1c5f] d6 3a
                    jr      z,$1c67                         ;[1c61] 28 04
                    cp      $4e                             ;[1c63] fe 4e
                    jr      nz,$1c6a                        ;[1c65] 20 03
                    ld      ($78b0),a                       ;[1c67] 32 b0 78
                    sub     $59                             ;[1c6a] d6 59
                    jp      nz,$1bcc                        ;[1c6c] c2 cc 1b
                    ld      b,a                             ;[1c6f] 47
                    ld      a,(hl)                          ;[1c70] 7e
                    or      a                               ;[1c71] b7
                    jr      z,$1c7d                         ;[1c72] 28 09
                    cp      b                               ;[1c74] b8
                    jr      z,$1c5b                         ;[1c75] 28 e4
                    inc     hl                              ;[1c77] 23
                    ld      (de),a                          ;[1c78] 12
                    inc     c                               ;[1c79] 0c
                    inc     de                              ;[1c7a] 13
                    jr      $1c70                           ;[1c7b] 18 f3
                    ld      hl,$0005                        ;[1c7d] 21 05 00
                    ld      b,h                             ;[1c80] 44
                    add     hl,bc                           ;[1c81] 09
                    ld      b,h                             ;[1c82] 44
                    ld      c,l                             ;[1c83] 4d
                    ld      hl,($78a7)                      ;[1c84] 2a a7 78
                    dec     hl                              ;[1c87] 2b
                    dec     hl                              ;[1c88] 2b
                    dec     hl                              ;[1c89] 2b
                    ld      (de),a                          ;[1c8a] 12
                    inc     de                              ;[1c8b] 13
                    ld      (de),a                          ;[1c8c] 12
                    inc     de                              ;[1c8d] 13
                    ld      (de),a                          ;[1c8e] 12
                    ret                                     ;[1c8f] c9

                    ld      a,h                             ;[1c90] 7c
                    sub     d                               ;[1c91] 92
                    ret     nz                              ;[1c92] c0
                    ld      a,l                             ;[1c93] 7d
                    sub     e                               ;[1c94] 93
                    ret                                     ;[1c95] c9

                    ld      a,(hl)                          ;[1c96] 7e
                    ex      (sp),hl                         ;[1c97] e3
                    cp      (hl)                            ;[1c98] be
                    inc     hl                              ;[1c99] 23
                    ex      (sp),hl                         ;[1c9a] e3
                    jp      z,$1d78                         ;[1c9b] ca 78 1d
                    jp      $1997                           ;[1c9e] c3 97 19

;*********************************************************************************************************************
; FOR
BAS_PROC_FOR
                    ld      a,$64                           ;[1ca1] 3e 64
                    ld      ($78dc),a                       ;[1ca3] 32 dc 78
                    call    BAS_PROC_LET                           ;[1ca6] cd 21 1f
                    ex      (sp),hl                         ;[1ca9] e3
                    call    $1936                           ;[1caa] cd 36 19
                    pop     de                              ;[1cad] d1
                    jr      nz,$1cb5                        ;[1cae] 20 05
                    add     hl,bc                           ;[1cb0] 09
                    ld      sp,hl                           ;[1cb1] f9
                    ld      ($78e8),hl                      ;[1cb2] 22 e8 78
                    ex      de,hl                           ;[1cb5] eb
                    ld      c,$08                           ;[1cb6] 0e 08
                    call    $1963                           ;[1cb8] cd 63 19
                    push    hl                              ;[1cbb] e5
                    call    BAS_PROC_DATA                           ;[1cbc] cd 05 1f
                    ex      (sp),hl                         ;[1cbf] e3
                    push    hl                              ;[1cc0] e5
                    ld      hl,($78a2)                      ;[1cc1] 2a a2 78
                    ex      (sp),hl                         ;[1cc4] e3
                    rst     $08                             ;[1cc5] cf
                    cp      l                               ;[1cc6] bd
                    rst     $20                             ;[1cc7] e7
                    jp      z,$0af6                         ;[1cc8] ca f6 0a
                    jp      nc,$0af6                        ;[1ccb] d2 f6 0a
                    push    af                              ;[1cce] f5
                    call    $2337                           ;[1ccf] cd 37 23
                    pop     af                              ;[1cd2] f1
                    push    hl                              ;[1cd3] e5
                    jp      p,$1cec                         ;[1cd4] f2 ec 1c
                    call    MATH_ISD_CINT_ACC                           ;[1cd7] cd 7f 0a
                    ex      (sp),hl                         ;[1cda] e3
                    ld      de,$0001                        ;[1cdb] 11 01 00
                    ld      a,(hl)                          ;[1cde] 7e
                    cp      $cc                             ;[1cdf] fe cc
                    call    z,$2b01                         ;[1ce1] cc 01 2b
                    push    de                              ;[1ce4] d5
                    push    hl                              ;[1ce5] e5
                    ex      de,hl                           ;[1ce6] eb
                    call    $099e                           ;[1ce7] cd 9e 09
                    jr      $1d0e                           ;[1cea] 18 22
                    call    MATH_ISD_CSNG_ACC                           ;[1cec] cd b1 0a
                    call    $09bf                           ;[1cef] cd bf 09
                    pop     hl                              ;[1cf2] e1
                    push    bc                              ;[1cf3] c5
                    push    de                              ;[1cf4] d5
                    ld      bc,$8100                        ;[1cf5] 01 00 81
                    ld      d,c                             ;[1cf8] 51
                    ld      e,d                             ;[1cf9] 5a
                    ld      a,(hl)                          ;[1cfa] 7e
                    cp      $cc                             ;[1cfb] fe cc
                    ld      a,$01                           ;[1cfd] 3e 01
                    jr      nz,$1d0f                        ;[1cff] 20 0e
                    call    $2338                           ;[1d01] cd 38 23
                    push    hl                              ;[1d04] e5
                    call    MATH_ISD_CSNG_ACC                           ;[1d05] cd b1 0a
                    call    $09bf                           ;[1d08] cd bf 09
                    call    $0955                           ;[1d0b] cd 55 09
                    pop     hl                              ;[1d0e] e1
                    push    bc                              ;[1d0f] c5
                    push    de                              ;[1d10] d5
                    ld      c,a                             ;[1d11] 4f
                    rst     $20                             ;[1d12] e7
                    ld      b,a                             ;[1d13] 47
                    push    bc                              ;[1d14] c5
                    push    hl                              ;[1d15] e5
                    ld      hl,($78df)                      ;[1d16] 2a df 78
                    ex      (sp),hl                         ;[1d19] e3
                    ld      b,$81                           ;[1d1a] 06 81
                    push    bc                              ;[1d1c] c5
                    inc     sp                              ;[1d1d] 33
                    call    $0358                           ;[1d1e] cd 58 03
                    or      a                               ;[1d21] b7
                    call    nz,$1da0                        ;[1d22] c4 a0 1d
                    ld      ($78e6),hl                      ;[1d25] 22 e6 78
                    ld      ($78e8),sp                      ;[1d28] ed 73 e8 78
                    ld      a,(hl)                          ;[1d2c] 7e
                    cp      $3a                             ;[1d2d] fe 3a
                    jr      z,$1d5a                         ;[1d2f] 28 29
                    or      a                               ;[1d31] b7
                    jp      nz,$1997                        ;[1d32] c2 97 19
                    inc     hl                              ;[1d35] 23
                    ld      a,(hl)                          ;[1d36] 7e
                    inc     hl                              ;[1d37] 23
                    or      (hl)                            ;[1d38] b6
                    jp      z,$197e                         ;[1d39] ca 7e 19
                    inc     hl                              ;[1d3c] 23
                    ld      e,(hl)                          ;[1d3d] 5e
                    inc     hl                              ;[1d3e] 23
                    ld      d,(hl)                          ;[1d3f] 56
                    ex      de,hl                           ;[1d40] eb
                    ld      ($78a2),hl                      ;[1d41] 22 a2 78
                    ld      a,($791b)                       ;[1d44] 3a 1b 79
                    or      a                               ;[1d47] b7
                    jr      z,$1d59                         ;[1d48] 28 0f
                    push    de                              ;[1d4a] d5
                    ld      a,$3c                           ;[1d4b] 3e 3c
                    call    $032a                           ;[1d4d] cd 2a 03
                    call    SYS_DISPLAY_HL                           ;[1d50] cd af 0f
                    ld      a,$3e                           ;[1d53] 3e 3e
                    call    $032a                           ;[1d55] cd 2a 03
                    pop     de                              ;[1d58] d1
                    ex      de,hl                           ;[1d59] eb
                    rst     $10                             ;[1d5a] d7
                    ld      de,$1d1e                        ;[1d5b] 11 1e 1d
                    push    de                              ;[1d5e] d5
                    ret     z                               ;[1d5f] c8
                    sub     $80                             ;[1d60] d6 80
                    jp      c,BAS_PROC_LET                         ;[1d62] da 21 1f
                    cp      $3c                             ;[1d65] fe 3c
                    jp      nc,$2ae7                        ;[1d67] d2 e7 2a
                    rlca                                    ;[1d6a] 07
                    ld      c,a                             ;[1d6b] 4f
                    ld      b,$00                           ;[1d6c] 06 00
                    ex      de,hl                           ;[1d6e] eb
                    ld      hl,TAB_BASIC_POINTERS                        ;[1d6f] 21 22 18
                    add     hl,bc                           ;[1d72] 09
                    ld      c,(hl)                          ;[1d73] 4e
                    inc     hl                              ;[1d74] 23
                    ld      b,(hl)                          ;[1d75] 46
                    push    bc                              ;[1d76] c5
                    ex      de,hl                           ;[1d77] eb
                    inc     hl                              ;[1d78] 23
                    ld      a,(hl)                          ;[1d79] 7e
                    cp      $3a                             ;[1d7a] fe 3a
                    ret     nc                              ;[1d7c] d0
                    cp      $20                             ;[1d7d] fe 20
                    jp      z,$1d78                         ;[1d7f] ca 78 1d
                    cp      $0b                             ;[1d82] fe 0b
                    jr      nc,$1d8b                        ;[1d84] 30 05
                    cp      $09                             ;[1d86] fe 09
                    jp      nc,$1d78                        ;[1d88] d2 78 1d
                    cp      $30                             ;[1d8b] fe 30
                    ccf                                     ;[1d8d] 3f
                    inc     a                               ;[1d8e] 3c
                    dec     a                               ;[1d8f] 3d
                    ret                                     ;[1d90] c9


;*********************************************************************************************************************
; RESTORE
;BAS_CODE_RESTORE          equ     $90
BAS_PROC_RESTORE:

                    ex      de,hl                           ;[1d91] eb
                    ld      hl,($78a4)                      ;[1d92] 2a a4 78
                    dec     hl                              ;[1d95] 2b
                    ld      ($78ff),hl                      ;[1d96] 22 ff 78
                    ex      de,hl                           ;[1d99] eb
                    ret                                     ;[1d9a] c9

                    call    $0358                           ;[1d9b] cd 58 03
                    or      a                               ;[1d9e] b7
                    ret     z                               ;[1d9f] c8
                    nop                                     ;[1da0] 00
                    nop                                     ;[1da1] 00
                    nop                                     ;[1da2] 00
                    nop                                     ;[1da3] 00
                    nop                                     ;[1da4] 00
                    ld      ($7899),a                       ;[1da5] 32 99 78
                    dec     a                               ;[1da8] 3d

;*********************************************************************************************************************
; STOP
;BAS_CODE_STOP          equ     $94
BAS_PROC_STOP:
                    ret     nz                              ;[1da9] c0
                    inc     a                               ;[1daa] 3c
                    jp      $1db4                           ;[1dab] c3 b4 1d

;*********************************************************************************************************************
; END
BAS_PROC_END
                    ret     nz                              ;[1dae] c0
                    push    af                              ;[1daf] f5
                    call    z,$79bb                         ;[1db0] cc bb 79
                    pop     af                              ;[1db3] f1
                    ld      ($78e6),hl                      ;[1db4] 22 e6 78
                    ld      hl,$78b5                        ;[1db7] 21 b5 78
                    ld      ($78b3),hl                      ;[1dba] 22 b3 78
                    ld      hl,$fff6                        ;[1dbd] 21 f6 ff
                    pop     bc                              ;[1dc0] c1
                    ld      hl,($78a2)                      ;[1dc1] 2a a2 78
                    push    hl                              ;[1dc4] e5
                    push    af                              ;[1dc5] f5
                    ld      a,l                             ;[1dc6] 7d
                    and     h                               ;[1dc7] a4
                    inc     a                               ;[1dc8] 3c
                    jr      z,$1dd4                         ;[1dc9] 28 09
                    ld      ($78f5),hl                      ;[1dcb] 22 f5 78
                    ld      hl,($78e6)                      ;[1dce] 2a e6 78
                    ld      ($78f7),hl                      ;[1dd1] 22 f7 78
                    call    $038b                           ;[1dd4] cd 8b 03
                    call    $20f9                           ;[1dd7] cd f9 20
                    pop     af                              ;[1dda] f1
                    ld      hl,$1930                        ;[1ddb] 21 30 19
                    jp      nz,$1a06                        ;[1dde] c2 06 1a
                    jp      $1a18                           ;[1de1] c3 18 1a



;*********************************************************************************************************************
; CONT
;BAS_CODE_CONT          equ     $b3
BAS_PROC_CONT:
                    ld      hl,($78f7)                      ;[1de4] 2a f7 78
                    ld      a,h                             ;[1de7] 7c
                    or      l                               ;[1de8] b5
                    ld      e,$20                           ;[1de9] 1e 20
                    jp      z,$19a2                         ;[1deb] ca a2 19
                    ex      de,hl                           ;[1dee] eb
                    ld      hl,($78f5)                      ;[1def] 2a f5 78
                    ld      ($78a2),hl                      ;[1df2] 22 a2 78
                    ex      de,hl                           ;[1df5] eb
                    ret                                     ;[1df6] c9

                    ld      a,$af                           ;[1df7] 3e af
                    ld      ($791b),a                       ;[1df9] 32 1b 79
                    ret                                     ;[1dfc] c9

                    pop     af                              ;[1dfd] f1
                    pop     hl                              ;[1dfe] e1
                    ret                                     ;[1dff] c9

;*********************************************************************************************************************
;DEFINT, DEFSNG, DEFDBL
; ??? entry               equ     $1e00     E = 03
BAS_PROC_DEFINT:     ;     E = 02
BAS_PROC_DEFSNG:     ;     E = 04
BAS_PROC_DEFDBL:     ;     E = 08
                    ld      e,$03                           ;[1e00] 1e 03
                    ld      bc,$021e                        ;[1e02] 01 1e 02
                    ld      bc,$041e                        ;[1e05] 01 1e 04
                    ld      bc,$081e                        ;[1e08] 01 1e 08
                    call    $1e3d                           ;[1e0b] cd 3d 1e
                    ld      bc,$1997                        ;[1e0e] 01 97 19
                    push    bc                              ;[1e11] c5
                    ret     c                               ;[1e12] d8
                    sub     $41                             ;[1e13] d6 41
                    ld      c,a                             ;[1e15] 4f
                    ld      b,a                             ;[1e16] 47
                    rst     $10                             ;[1e17] d7
                    cp      $ce                             ;[1e18] fe ce
                    jr      nz,$1e25                        ;[1e1a] 20 09
                    rst     $10                             ;[1e1c] d7
                    call    $1e3d                           ;[1e1d] cd 3d 1e
                    ret     c                               ;[1e20] d8
                    sub     $41                             ;[1e21] d6 41
                    ld      b,a                             ;[1e23] 47
                    rst     $10                             ;[1e24] d7
                    ld      a,b                             ;[1e25] 78
                    sub     c                               ;[1e26] 91
                    ret     c                               ;[1e27] d8
                    inc     a                               ;[1e28] 3c
                    ex      (sp),hl                         ;[1e29] e3
                    ld      hl,$7901                        ;[1e2a] 21 01 79
                    ld      b,$00                           ;[1e2d] 06 00
                    add     hl,bc                           ;[1e2f] 09
                    ld      (hl),e                          ;[1e30] 73
                    inc     hl                              ;[1e31] 23
                    dec     a                               ;[1e32] 3d
                    jr      nz,$1e30                        ;[1e33] 20 fb
                    pop     hl                              ;[1e35] e1
                    ld      a,(hl)                          ;[1e36] 7e
                    cp      $2c                             ;[1e37] fe 2c
                    ret     nz                              ;[1e39] c0
                    rst     $10                             ;[1e3a] d7
                    jr      $1e0b                           ;[1e3b] 18 ce
                    ld      a,(hl)                          ;[1e3d] 7e
                    cp      $41                             ;[1e3e] fe 41
                    ret     c                               ;[1e40] d8
                    cp      $5b                             ;[1e41] fe 5b
                    ccf                                     ;[1e43] 3f
                    ret                                     ;[1e44] c9

                    rst     $10                             ;[1e45] d7
                    call    $2b02                           ;[1e46] cd 02 2b
                    ret     p                               ;[1e49] f0
                    ld      e,$08                           ;[1e4a] 1e 08
                    jp      $19a2                           ;[1e4c] c3 a2 19
                    ld      a,(hl)                          ;[1e4f] 7e
                    cp      $2e                             ;[1e50] fe 2e
                    ex      de,hl                           ;[1e52] eb
                    ld      hl,($78ec)                      ;[1e53] 2a ec 78
                    ex      de,hl                           ;[1e56] eb
                    jp      z,$1d78                         ;[1e57] ca 78 1d
                    dec     hl                              ;[1e5a] 2b
                    ld      de,$0000                        ;[1e5b] 11 00 00
                    rst     $10                             ;[1e5e] d7
                    ret     nc                              ;[1e5f] d0
                    push    hl                              ;[1e60] e5
                    push    af                              ;[1e61] f5
                    ld      hl,$1998                        ;[1e62] 21 98 19
                    rst     $18                             ;[1e65] df
                    jp      c,$1997                         ;[1e66] da 97 19
                    ld      h,d                             ;[1e69] 62
                    ld      l,e                             ;[1e6a] 6b
                    add     hl,de                           ;[1e6b] 19
                    add     hl,hl                           ;[1e6c] 29
                    add     hl,de                           ;[1e6d] 19
                    add     hl,hl                           ;[1e6e] 29
                    pop     af                              ;[1e6f] f1
                    sub     $30                             ;[1e70] d6 30
                    ld      e,a                             ;[1e72] 5f
                    ld      d,$00                           ;[1e73] 16 00
                    add     hl,de                           ;[1e75] 19
                    ex      de,hl                           ;[1e76] eb
                    pop     hl                              ;[1e77] e1
                    jr      $1e5e                           ;[1e78] 18 e4


;*********************************************************************************************************************
; CLEAR
;BAS_CODE_CLEAR          equ     $b8
BAS_PROC_CLEAR:
                    jp      z,$1b61                         ;[1e7a] ca 61 1b
                    call    $1e46                           ;[1e7d] cd 46 1e
                    dec     hl                              ;[1e80] 2b
                    rst     $10                             ;[1e81] d7
                    ret     nz                              ;[1e82] c0
                    push    hl                              ;[1e83] e5
                    ld      hl,($78b1)                      ;[1e84] 2a b1 78
                    ld      a,l                             ;[1e87] 7d
                    sub     e                               ;[1e88] 93
                    ld      e,a                             ;[1e89] 5f
                    ld      a,h                             ;[1e8a] 7c
                    sbc     d                               ;[1e8b] 9a
                    ld      d,a                             ;[1e8c] 57
                    jp      c,$197a                         ;[1e8d] da 7a 19
                    ld      hl,($78f9)                      ;[1e90] 2a f9 78
                    ld      bc,$0028                        ;[1e93] 01 28 00
                    add     hl,bc                           ;[1e96] 09
                    rst     $18                             ;[1e97] df
                    jp      nc,$197a                        ;[1e98] d2 7a 19
                    ex      de,hl                           ;[1e9b] eb
                    ld      ($78a0),hl                      ;[1e9c] 22 a0 78
                    pop     hl                              ;[1e9f] e1
                    jp      $1b61                           ;[1ea0] c3 61 1b


;*********************************************************************************************************************
; RUN
;BAS_CODE_RUN          equ     $8e
BAS_PROC_RUN:
                    jp      z,$1b5d                         ;[1ea3] ca 5d 1b
                    call    $79c7                           ;[1ea6] cd c7 79
                    call    $1b61                           ;[1ea9] cd 61 1b
                    ld      bc,$1d1e                        ;[1eac] 01 1e 1d
                    jr      $1ec1                           ;[1eaf] 18 10

;*********************************************************************************************************************
; GOSUB
;BAS_CODE_GOSUB          equ     $91
BAS_PROC_GOSUB:
                    ld      c,$03                           ;[1eb1] 0e 03
                    call    $1963                           ;[1eb3] cd 63 19
                    pop     bc                              ;[1eb6] c1
                    push    hl                              ;[1eb7] e5
                    push    hl                              ;[1eb8] e5
                    ld      hl,($78a2)                      ;[1eb9] 2a a2 78
                    ex      (sp),hl                         ;[1ebc] e3
                    ld      a,$91                           ;[1ebd] 3e 91
                    push    af                              ;[1ebf] f5
                    inc     sp                              ;[1ec0] 33
                    push    bc                              ;[1ec1] c5
                    
                    
;*********************************************************************************************************************
; GOTO
;BAS_CODE_GOTO          equ     $8d
BAS_PROC_GOTO:
                    call    $1e5a                           ;[1ec2] cd 5a 1e
                    call    $1f07                           ;[1ec5] cd 07 1f
                    push    hl                              ;[1ec8] e5
                    ld      hl,($78a2)                      ;[1ec9] 2a a2 78
                    rst     $18                             ;[1ecc] df
                    pop     hl                              ;[1ecd] e1
                    inc     hl                              ;[1ece] 23
                    call    c,$1b2f                         ;[1ecf] dc 2f 1b
                    call    nc,$1b2c                        ;[1ed2] d4 2c 1b
                    ld      h,b                             ;[1ed5] 60
                    ld      l,c                             ;[1ed6] 69
                    dec     hl                              ;[1ed7] 2b
                    ret     c                               ;[1ed8] d8
                    ld      e,$0e                           ;[1ed9] 1e 0e
                    jp      $19a2                           ;[1edb] c3 a2 19


;*********************************************************************************************************************
; RETURN
;BAS_CODE_RETURN          equ     $92
BAS_PROC_RETURN:
                    ret     nz                              ;[1ede] c0
                    ld      d,$ff                           ;[1edf] 16 ff
                    call    $1936                           ;[1ee1] cd 36 19
                    ld      sp,hl                           ;[1ee4] f9
                    ld      ($78e8),hl                      ;[1ee5] 22 e8 78
                    cp      $91                             ;[1ee8] fe 91
                    ld      e,$04                           ;[1eea] 1e 04
                    jp      nz,$19a2                        ;[1eec] c2 a2 19
                    pop     hl                              ;[1eef] e1
                    ld      ($78a2),hl                      ;[1ef0] 22 a2 78
                    inc     hl                              ;[1ef3] 23
                    ld      a,h                             ;[1ef4] 7c
                    or      l                               ;[1ef5] b5
                    jr      nz,$1eff                        ;[1ef6] 20 07
                    ld      a,($78dd)                       ;[1ef8] 3a dd 78
                    or      a                               ;[1efb] b7
                    jp      nz,$1a18                        ;[1efc] c2 18 1a
                    ld      hl,$1d1e                        ;[1eff] 21 1e 1d
                    ex      (sp),hl                         ;[1f02] e3
                    ld      a,$e1                           ;[1f03] 3e e1

;*********************************************************************************************************************
; DATA, REM, ELSE
;BAS_PROC_DATA      (entry point 1f05)
;BAS_PROC_REM       (entry point 1f07)    
;BAS_PROC_ELSE      (entry point 1f07)    ????
BAS_PROC_REM:
BAS_PROC_ELSE:
BAS_PROC_DATA
                    ld      bc,$0e3a     ; b nieistotne     ;[1f05] 01 3a 0e
;BAS_PROC_REM       ;ld     c,00         ; razem z nastepnym [1f07] 0e                   
                    nop                  ; nieistotne       ;[1f08] 00
; w zależności od entry point
; BAS_PROC_DATA  entry=1f05   C = $3a
; BAS_PROC_REM   entry=1f07   C = $00
; BAS_PROC_ELSE  entry=1f07   C = $00   ????
                    ld      b,$00                           ;[1f09] 06 00
                    ld      a,c                             ;[1f0b] 79
                    ld      c,b                             ;[1f0c] 48
                    ld      b,a                             ;[1f0d] 47
                    ld      a,(hl)                          ;[1f0e] 7e
                    or      a                               ;[1f0f] b7
                    ret     z                               ;[1f10] c8
                    cp      b                               ;[1f11] b8
                    ret     z                               ;[1f12] c8
                    inc     hl                              ;[1f13] 23
                    cp      $22                             ;[1f14] fe 22
                    jr      z,$1f0b                         ;[1f16] 28 f3
                    sub     $8f                             ;[1f18] d6 8f
                    jr      nz,$1f0e                        ;[1f1a] 20 f2
                    cp      b                               ;[1f1c] b8
                    adc     d                               ;[1f1d] 8a
                    ld      d,a                             ;[1f1e] 57
                    jr      $1f0e                           ;[1f1f] 18 ed


;*********************************************************************************************************************
; LET
;BAS_CODE_LET          equ     $8c
BAS_PROC_LET:

                    call    $260d                           ;[1f21] cd 0d 26
                    rst     $08                             ;[1f24] cf
                    push    de                              ;[1f25] d5
                    ex      de,hl                           ;[1f26] eb
                    ld      ($78df),hl                      ;[1f27] 22 df 78
                    ex      de,hl                           ;[1f2a] eb
                    push    de                              ;[1f2b] d5
                    rst     $20                             ;[1f2c] e7
                    push    af                              ;[1f2d] f5
                    call    $2337                           ;[1f2e] cd 37 23
                    pop     af                              ;[1f31] f1
                    ex      (sp),hl                         ;[1f32] e3
                    add     $03                             ;[1f33] c6 03
                    call    $2819                           ;[1f35] cd 19 28
                    call    $0a03                           ;[1f38] cd 03 0a
                    push    hl                              ;[1f3b] e5
                    jr      nz,$1f66                        ;[1f3c] 20 28
                    ld      hl,($7921)                      ;[1f3e] 2a 21 79
                    push    hl                              ;[1f41] e5
                    inc     hl                              ;[1f42] 23
                    ld      e,(hl)                          ;[1f43] 5e
                    inc     hl                              ;[1f44] 23
                    ld      d,(hl)                          ;[1f45] 56
                    ld      hl,($78a4)                      ;[1f46] 2a a4 78
                    rst     $18                             ;[1f49] df
                    jr      nc,$1f5a                        ;[1f4a] 30 0e
                    ld      hl,($78a0)                      ;[1f4c] 2a a0 78
                    rst     $18                             ;[1f4f] df
                    pop     de                              ;[1f50] d1
                    jr      nc,$1f62                        ;[1f51] 30 0f
                    ld      hl,($78f9)                      ;[1f53] 2a f9 78
                    rst     $18                             ;[1f56] df
                    jr      nc,$1f62                        ;[1f57] 30 09
                    ld      a,$d1                           ;[1f59] 3e d1
                    call    $29f5                           ;[1f5b] cd f5 29
                    ex      de,hl                           ;[1f5e] eb
                    call    $2843                           ;[1f5f] cd 43 28
                    call    $29f5                           ;[1f62] cd f5 29
                    ex      (sp),hl                         ;[1f65] e3
                    call    $09d3                           ;[1f66] cd d3 09
                    pop     de                              ;[1f69] d1
                    pop     hl                              ;[1f6a] e1
                    ret                                     ;[1f6b] c9



;*********************************************************************************************************************
; ON
;BAS_CODE_ON          equ     $a1
BAS_PROC_ON:
                    cp      $9e                             ;[1f6c] fe 9e
                    jr      nz,$1f95                        ;[1f6e] 20 25
                    rst     $10                             ;[1f70] d7
                    rst     $08                             ;[1f71] cf
                    adc     l                               ;[1f72] 8d
                    call    $1e5a                           ;[1f73] cd 5a 1e
                    ld      a,d                             ;[1f76] 7a
                    or      e                               ;[1f77] b3
                    jr      z,$1f83                         ;[1f78] 28 09
                    call    $1b2a                           ;[1f7a] cd 2a 1b
                    ld      d,b                             ;[1f7d] 50
                    ld      e,c                             ;[1f7e] 59
                    pop     hl                              ;[1f7f] e1
                    jp      nc,$1ed9                        ;[1f80] d2 d9 1e
                    ex      de,hl                           ;[1f83] eb
                    ld      ($78f0),hl                      ;[1f84] 22 f0 78
                    ex      de,hl                           ;[1f87] eb
                    ret     c                               ;[1f88] d8
                    ld      a,($78f2)                       ;[1f89] 3a f2 78
                    or      a                               ;[1f8c] b7
                    ret     z                               ;[1f8d] c8
                    ld      a,($789a)                       ;[1f8e] 3a 9a 78
                    ld      e,a                             ;[1f91] 5f
                    jp      $19ab                           ;[1f92] c3 ab 19
                    call    $2b1c                           ;[1f95] cd 1c 2b
                    ld      a,(hl)                          ;[1f98] 7e
                    ld      b,a                             ;[1f99] 47
                    cp      $91                             ;[1f9a] fe 91
                    jr      z,$1fa1                         ;[1f9c] 28 03
                    rst     $08                             ;[1f9e] cf
                    adc     l                               ;[1f9f] 8d
                    dec     hl                              ;[1fa0] 2b
                    ld      c,e                             ;[1fa1] 4b
                    dec     c                               ;[1fa2] 0d
                    ld      a,b                             ;[1fa3] 78
                    jp      z,$1d60                         ;[1fa4] ca 60 1d
                    call    $1e5b                           ;[1fa7] cd 5b 1e
                    cp      $2c                             ;[1faa] fe 2c
                    ret     nz                              ;[1fac] c0
                    jr      $1fa2                           ;[1fad] 18 f3


;*********************************************************************************************************************
; RESUME
;BAS_CODE_RESUME          equ     $9f
BAS_PROC_RESUME:
                    ld      de,$78f2                        ;[1faf] 11 f2 78
                    ld      a,(de)                          ;[1fb2] 1a
                    or      a                               ;[1fb3] b7
                    jp      z,$19a0                         ;[1fb4] ca a0 19
                    inc     a                               ;[1fb7] 3c
                    ld      ($789a),a                       ;[1fb8] 32 9a 78
                    ld      (de),a                          ;[1fbb] 12
                    ld      a,(hl)                          ;[1fbc] 7e
                    cp      $87                             ;[1fbd] fe 87
                    jr      z,$1fcd                         ;[1fbf] 28 0c
                    call    $1e5a                           ;[1fc1] cd 5a 1e
                    ret     nz                              ;[1fc4] c0
                    ld      a,d                             ;[1fc5] 7a
                    or      e                               ;[1fc6] b3
                    jp      nz,$1ec5                        ;[1fc7] c2 c5 1e
                    inc     a                               ;[1fca] 3c
                    jr      $1fcf                           ;[1fcb] 18 02
                    rst     $10                             ;[1fcd] d7
                    ret     nz                              ;[1fce] c0
                    ld      hl,($78ee)                      ;[1fcf] 2a ee 78
                    ex      de,hl                           ;[1fd2] eb
                    ld      hl,($78ea)                      ;[1fd3] 2a ea 78
                    ld      ($78a2),hl                      ;[1fd6] 22 a2 78
                    ex      de,hl                           ;[1fd9] eb
                    ret     nz                              ;[1fda] c0
                    ld      a,(hl)                          ;[1fdb] 7e
                    or      a                               ;[1fdc] b7
                    jr      nz,$1fe3                        ;[1fdd] 20 04
                    inc     hl                              ;[1fdf] 23
                    inc     hl                              ;[1fe0] 23
                    inc     hl                              ;[1fe1] 23
                    inc     hl                              ;[1fe2] 23
                    inc     hl                              ;[1fe3] 23
                    ld      a,d                             ;[1fe4] 7a
                    and     e                               ;[1fe5] a3
                    inc     a                               ;[1fe6] 3c
                    jp      nz,$1f05                        ;[1fe7] c2 05 1f
                    ld      a,($78dd)                       ;[1fea] 3a dd 78
                    dec     a                               ;[1fed] 3d
                    jp      z,$1dbe                         ;[1fee] ca be 1d
                    jp      $1f05                           ;[1ff1] c3 05 1f
                    call    $2b1c                           ;[1ff4] cd 1c 2b
                    ret     nz                              ;[1ff7] c0
                    or      a                               ;[1ff8] b7
                    jp      z,$1e4a                         ;[1ff9] ca 4a 1e
                    dec     a                               ;[1ffc] 3d
                    add     a                               ;[1ffd] 87
                    ld      e,a                             ;[1ffe] 5f
                    cp      $2d                             ;[1fff] fe 2d
                    jr      c,$2005                         ;[2001] 38 02
                    ld      e,$26                           ;[2003] 1e 26
                    jp      $19a2                           ;[2005] c3 a2 19


;*********************************************************************************************************************
; AUTO
;BAS_CODE_AUTO          equ     $b7
BAS_PROC_AUTO:
                    ld      de,$000a                        ;[2008] 11 0a 00
                    push    de                              ;[200b] d5
                    jr      z,$2025                         ;[200c] 28 17
                    call    $1e4f                           ;[200e] cd 4f 1e
                    ex      de,hl                           ;[2011] eb
                    ex      (sp),hl                         ;[2012] e3
                    jr      z,$2026                         ;[2013] 28 11
                    ex      de,hl                           ;[2015] eb
                    rst     $08                             ;[2016] cf
                    inc     l                               ;[2017] 2c
                    ex      de,hl                           ;[2018] eb
                    ld      hl,($78e4)                      ;[2019] 2a e4 78
                    ex      de,hl                           ;[201c] eb
                    jr      z,$2025                         ;[201d] 28 06
                    call    $1e5a                           ;[201f] cd 5a 1e
                    jp      nz,$1997                        ;[2022] c2 97 19
                    ex      de,hl                           ;[2025] eb
                    ld      a,h                             ;[2026] 7c
                    or      l                               ;[2027] b5
                    jp      z,$1e4a                         ;[2028] ca 4a 1e
                    ld      ($78e4),hl                      ;[202b] 22 e4 78
                    ld      ($78e1),a                       ;[202e] 32 e1 78
                    pop     hl                              ;[2031] e1
                    ld      ($78e2),hl                      ;[2032] 22 e2 78
                    pop     bc                              ;[2035] c1
                    jp      $1a33                           ;[2036] c3 33 1a


;*********************************************************************************************************************
; IF
;BAS_CODE_IF          equ     $8f
BAS_PROC_IF:
                    call    $2337                           ;[2039] cd 37 23
                    ld      a,(hl)                          ;[203c] 7e
                    cp      $2c                             ;[203d] fe 2c
                    call    z,$1d78                         ;[203f] cc 78 1d
                    cp      $ca                             ;[2042] fe ca
                    call    z,$1d78                         ;[2044] cc 78 1d
                    dec     hl                              ;[2047] 2b
                    push    hl                              ;[2048] e5
                    call    $0994                           ;[2049] cd 94 09
                    pop     hl                              ;[204c] e1
                    jr      z,$2056                         ;[204d] 28 07
                    rst     $10                             ;[204f] d7
                    jp      c,BAS_PROC_GOTO                         ;[2050] da c2 1e
                    jp      $1d5f                           ;[2053] c3 5f 1d
                    ld      d,$01                           ;[2056] 16 01
                    call    $1f05                           ;[2058] cd 05 1f
                    or      a                               ;[205b] b7
                    ret     z                               ;[205c] c8
                    rst     $10                             ;[205d] d7
                    cp      $95                             ;[205e] fe 95
                    jr      nz,$2058                        ;[2060] 20 f6
                    dec     d                               ;[2062] 15
                    jr      nz,$2058                        ;[2063] 20 f3
                    jr      $204f                           ;[2065] 18 e8


;*********************************************************************************************************************
; LPRINT
;BAS_CODE_LPRINT          equ     $af
BAS_PROC_LPRINT:
                    ld      a,$01                           ;[2067] 3e 01
                    ld      ($789c),a                       ;[2069] 32 9c 78
                    jp      $209b                           ;[206c] c3 9b 20


;*********************************************************************************************************************
; PRINT
;BAS_CODE_PRINT          equ     $b2
BAS_PROC_PRINT:
                    call    $79ca                           ;[206f] cd ca 79
                    cp      $40                             ;[2072] fe 40
                    jr      nz,$208f                        ;[2074] 20 19
                    call    $2b01                           ;[2076] cd 01 2b
                    cp      $02                             ;[2079] fe 02
                    jp      nc,$1e4a                        ;[207b] d2 4a 1e
                    push    hl                              ;[207e] e5
                    ld      hl,$7000                        ;[207f] 21 00 70
                    add     hl,de                           ;[2082] 19
                    ld      ($7820),hl                      ;[2083] 22 20 78
                    ld      a,e                             ;[2086] 7b
                    and     $1f                             ;[2087] e6 1f
                    ld      ($78a6),a                       ;[2089] 32 a6 78
                    pop     hl                              ;[208c] e1
                    rst     $08                             ;[208d] cf
                    inc     l                               ;[208e] 2c
                    cp      $23                             ;[208f] fe 23
                    jr      nz,$209b                        ;[2091] 20 08
                    call    $3b58                           ;[2093] cd 58 3b
                    ld      a,$80                           ;[2096] 3e 80
                    ld      ($789c),a                       ;[2098] 32 9c 78
                    dec     hl                              ;[209b] 2b
                    rst     $10                             ;[209c] d7
                    call    z,$20fe                         ;[209d] cc fe 20
                    jp      z,$2169                         ;[20a0] ca 69 21
                    cp      $bf                             ;[20a3] fe bf
                    jp      z,$2cbd                         ;[20a5] ca bd 2c
                    cp      $bc                             ;[20a8] fe bc
                    jp      z,$2137                         ;[20aa] ca 37 21
                    push    hl                              ;[20ad] e5
                    cp      $2c                             ;[20ae] fe 2c
                    jp      z,$2108                         ;[20b0] ca 08 21
                    cp      $3b                             ;[20b3] fe 3b
                    jp      z,$3b0c                         ;[20b5] ca 0c 3b
                    pop     bc                              ;[20b8] c1
                    call    $2337                           ;[20b9] cd 37 23
                    push    hl                              ;[20bc] e5
                    rst     $20                             ;[20bd] e7
                    jr      z,$20f2                         ;[20be] 28 32
                    call    $0fbd                           ;[20c0] cd bd 0f
                    call    $2865                           ;[20c3] cd 65 28
                    call    $79cd                           ;[20c6] cd cd 79
                    ld      hl,($7921)                      ;[20c9] 2a 21 79
                    ld      a,($789c)                       ;[20cc] 3a 9c 78
                    or      a                               ;[20cf] b7
                    jp      m,$20e9                         ;[20d0] fa e9 20
                    jr      z,$20dd                         ;[20d3] 28 08
                    ld      a,($789b)                       ;[20d5] 3a 9b 78
                    add     (hl)                            ;[20d8] 86
                    cp      $84                             ;[20d9] fe 84
                    jr      $20e6                           ;[20db] 18 09
                    ld      a,($789d)                       ;[20dd] 3a 9d 78
                    ld      b,a                             ;[20e0] 47
                    ld      a,($78a6)                       ;[20e1] 3a a6 78
                    add     (hl)                            ;[20e4] 86
                    cp      b                               ;[20e5] b8
                    call    nc,$20fe                        ;[20e6] d4 fe 20
                    call    $28aa                           ;[20e9] cd aa 28
                    ld      a,$20                           ;[20ec] 3e 20
                    call    $032a                           ;[20ee] cd 2a 03
                    or      a                               ;[20f1] b7
                    call    z,$28aa                         ;[20f2] cc aa 28
                    pop     hl                              ;[20f5] e1
                    jp      $209b                           ;[20f6] c3 9b 20
                    call    $3b1c                           ;[20f9] cd 1c 3b
                    or      a                               ;[20fc] b7
                    ret     z                               ;[20fd] c8
                    ld      a,$0d                           ;[20fe] 3e 0d
                    call    $032a                           ;[2100] cd 2a 03
                    call    $79d0                           ;[2103] cd d0 79
                    xor     a                               ;[2106] af
                    ret                                     ;[2107] c9

                    call    $79d3                           ;[2108] cd d3 79
                    ld      a,($789c)                       ;[210b] 3a 9c 78
                    or      a                               ;[210e] b7
                    jp      p,$2119                         ;[210f] f2 19 21
                    ld      a,$2c                           ;[2112] 3e 2c
                    call    $032a                           ;[2114] cd 2a 03
                    jr      $2164                           ;[2117] 18 4b
                    jr      z,$2123                         ;[2119] 28 08
                    ld      a,($789b)                       ;[211b] 3a 9b 78
                    cp      $70                             ;[211e] fe 70
                    jp      $212b                           ;[2120] c3 2b 21
                    ld      a,($789e)                       ;[2123] 3a 9e 78
                    ld      b,a                             ;[2126] 47
                    ld      a,($7aae)                       ;[2127] 3a ae 7a
                    cp      b                               ;[212a] b8
                    call    nc,$20fe                        ;[212b] d4 fe 20
                    jr      nc,$2164                        ;[212e] 30 34
                    sub     $10                             ;[2130] d6 10
                    jr      nc,$2130                        ;[2132] 30 fc
                    cpl                                     ;[2134] 2f
                    jr      $215a                           ;[2135] 18 23
                    call    SYS_INT_ASCII_TO_A                           ;[2137] cd 1b 2b
                    and     $3f                             ;[213a] e6 3f
                    ld      e,a                             ;[213c] 5f
                    rst     $08                             ;[213d] cf
                    add     hl,hl                           ;[213e] 29
                    dec     hl                              ;[213f] 2b
                    push    hl                              ;[2140] e5
                    call    $79d3                           ;[2141] cd d3 79
                    ld      a,($789c)                       ;[2144] 3a 9c 78
                    or      a                               ;[2147] b7
                    jp      m,$1e4a                         ;[2148] fa 4a 1e
                    jp      z,$2153                         ;[214b] ca 53 21
                    ld      a,($789b)                       ;[214e] 3a 9b 78
                    jr      $2156                           ;[2151] 18 03
                    ld      a,($78a6)                       ;[2153] 3a a6 78
                    cpl                                     ;[2156] 2f
                    add     e                               ;[2157] 83
                    jr      nc,$2164                        ;[2158] 30 0a
                    inc     a                               ;[215a] 3c
                    ld      b,a                             ;[215b] 47
                    ld      a,$20                           ;[215c] 3e 20
                    call    $032a                           ;[215e] cd 2a 03
                    dec     b                               ;[2161] 05
                    jr      nz,$215e                        ;[2162] 20 fa
                    pop     hl                              ;[2164] e1
                    rst     $10                             ;[2165] d7
                    jp      $20a0                           ;[2166] c3 a0 20
                    ld      a,($789c)                       ;[2169] 3a 9c 78
                    nop                                     ;[216c] 00
                    nop                                     ;[216d] 00
                    nop                                     ;[216e] 00
                    nop                                     ;[216f] 00
                    xor     a                               ;[2170] af
                    ld      ($789c),a                       ;[2171] 32 9c 78
                    call    $79be                           ;[2174] cd be 79
                    ret                                     ;[2177] c9

                    ccf                                     ;[2178] 3f
                    ld      d,d                             ;[2179] 52
                    ld      b,l                             ;[217a] 45
                    ld      b,h                             ;[217b] 44
                    ld      c,a                             ;[217c] 4f
                    dec     c                               ;[217d] 0d
                    nop                                     ;[217e] 00
                    ld      a,($78de)                       ;[217f] 3a de 78
                    or      a                               ;[2182] b7
                    jp      nz,$1991                        ;[2183] c2 91 19
                    ld      a,($78a9)                       ;[2186] 3a a9 78
                    or      a                               ;[2189] b7
                    ld      e,$2a                           ;[218a] 1e 2a
                    jp      z,$19a2                         ;[218c] ca a2 19
                    pop     bc                              ;[218f] c1
                    ld      hl,$2178                        ;[2190] 21 78 21
                    call    SYS_STR_TO_DEVICE                           ;[2193] cd a7 28
                    ld      hl,($78e6)                      ;[2196] 2a e6 78
                    ret                                     ;[2199] c9

;*********************************************************************************************************************
; INPUT
;BAS_CODE_INPUT          equ     $89
BAS_PROC_INPUT
                    call    $2828                           ;[219a] cd 28 28
                    ld      a,(hl)                          ;[219d] 7e
                    call    $79d6                           ;[219e] cd d6 79
                    sub     $23                             ;[21a1] d6 23
                    ld      ($78a9),a                       ;[21a3] 32 a9 78
                    ld      a,(hl)                          ;[21a6] 7e
                    jr      nz,$21c9                        ;[21a7] 20 20
                    call    $3b68                           ;[21a9] cd 68 3b
                    push    hl                              ;[21ac] e5
                    ld      b,$fa                           ;[21ad] 06 fa
                    ld      hl,($78a7)                      ;[21af] 2a a7 78
                    call    $3b88                           ;[21b2] cd 88 3b
                    ld      (hl),a                          ;[21b5] 77
                    inc     hl                              ;[21b6] 23
                    cp      $0d                             ;[21b7] fe 0d
                    jr      z,$21bd                         ;[21b9] 28 02
                    djnz    $21b2                           ;[21bb] 10 f5
                    dec     hl                              ;[21bd] 2b
                    ld      (hl),$00                        ;[21be] 36 00
                    nop                                     ;[21c0] 00
                    nop                                     ;[21c1] 00
                    nop                                     ;[21c2] 00
                    ld      hl,($78a7)                      ;[21c3] 2a a7 78
                    dec     hl                              ;[21c6] 2b
                    jr      $21eb                           ;[21c7] 18 22
                    ld      bc,$21db                        ;[21c9] 01 db 21
                    push    bc                              ;[21cc] c5
                    cp      $22                             ;[21cd] fe 22
                    ret     nz                              ;[21cf] c0
                    call    $2866                           ;[21d0] cd 66 28
                    rst     $08                             ;[21d3] cf
                    dec     sp                              ;[21d4] 3b
                    push    hl                              ;[21d5] e5
                    call    $28aa                           ;[21d6] cd aa 28
                    pop     hl                              ;[21d9] e1
                    ret                                     ;[21da] c9

                    push    hl                              ;[21db] e5
                    call    $1bb3                           ;[21dc] cd b3 1b
                    pop     bc                              ;[21df] c1
                    jp      c,$1dbe                         ;[21e0] da be 1d
                    inc     hl                              ;[21e3] 23
                    ld      a,(hl)                          ;[21e4] 7e
                    or      a                               ;[21e5] b7
                    dec     hl                              ;[21e6] 2b
                    push    bc                              ;[21e7] c5
                    jp      z,$1f04                         ;[21e8] ca 04 1f
                    ld      (hl),$2c                        ;[21eb] 36 2c
                    jr      $21f4                           ;[21ed] 18 05
                    
 ;*********************************************************************************************************************
; READ
;BAS_CODE_READ          equ     $8b
BAS_PROC_READ:
                    push    hl                              ;[21ef] e5
                    ld      hl,($78ff)                      ;[21f0] 2a ff 78
                    or      $af                             ;[21f3] f6 af
                    ld      ($78de),a                       ;[21f5] 32 de 78
                    ex      (sp),hl                         ;[21f8] e3
                    jr      $21fd                           ;[21f9] 18 02
                    rst     $08                             ;[21fb] cf
                    inc     l                               ;[21fc] 2c
                    call    $260d                           ;[21fd] cd 0d 26
                    ex      (sp),hl                         ;[2200] e3
                    push    de                              ;[2201] d5
                    ld      a,(hl)                          ;[2202] 7e
                    cp      $2c                             ;[2203] fe 2c
                    jr      z,$222d                         ;[2205] 28 26
                    ld      a,($78de)                       ;[2207] 3a de 78
                    or      a                               ;[220a] b7
                    jp      nz,$2296                        ;[220b] c2 96 22
                    ld      a,($78a9)                       ;[220e] 3a a9 78
                    or      a                               ;[2211] b7
                    ld      e,$06                           ;[2212] 1e 06
                    jp      z,$19a2                         ;[2214] ca a2 19
                    ld      a,$3f                           ;[2217] 3e 3f
                    call    $032a                           ;[2219] cd 2a 03
                    call    $1bb3                           ;[221c] cd b3 1b
                    pop     de                              ;[221f] d1
                    pop     bc                              ;[2220] c1
                    jp      c,$1dbe                         ;[2221] da be 1d
                    inc     hl                              ;[2224] 23
                    ld      a,(hl)                          ;[2225] 7e
                    or      a                               ;[2226] b7
                    dec     hl                              ;[2227] 2b
                    push    bc                              ;[2228] c5
                    jp      z,$1f04                         ;[2229] ca 04 1f
                    push    de                              ;[222c] d5
                    call    $79dc                           ;[222d] cd dc 79
                    rst     $20                             ;[2230] e7
                    push    af                              ;[2231] f5
                    jr      nz,$224d                        ;[2232] 20 19
                    rst     $10                             ;[2234] d7
                    ld      d,a                             ;[2235] 57
                    ld      b,a                             ;[2236] 47
                    cp      $22                             ;[2237] fe 22
                    jr      z,$2240                         ;[2239] 28 05
                    ld      d,$3a                           ;[223b] 16 3a
                    ld      b,$2c                           ;[223d] 06 2c
                    dec     hl                              ;[223f] 2b
                    call    $2869                           ;[2240] cd 69 28
                    pop     af                              ;[2243] f1
                    ex      de,hl                           ;[2244] eb
                    ld      hl,$225a                        ;[2245] 21 5a 22
                    ex      (sp),hl                         ;[2248] e3
                    push    de                              ;[2249] d5
                    jp      $1f33                           ;[224a] c3 33 1f
                    rst     $10                             ;[224d] d7
                    pop     af                              ;[224e] f1
                    push    af                              ;[224f] f5
                    ld      bc,$2243                        ;[2250] 01 43 22
                    push    bc                              ;[2253] c5
                    jp      c,$0e6c                         ;[2254] da 6c 0e
                    jp      nc,$0e65                        ;[2257] d2 65 0e
                    dec     hl                              ;[225a] 2b
                    rst     $10                             ;[225b] d7
                    jr      z,$2263                         ;[225c] 28 05
                    cp      $2c                             ;[225e] fe 2c
                    jp      nz,$217f                        ;[2260] c2 7f 21
                    ex      (sp),hl                         ;[2263] e3
                    dec     hl                              ;[2264] 2b
                    rst     $10                             ;[2265] d7
                    jp      nz,$21fb                        ;[2266] c2 fb 21
                    pop     de                              ;[2269] d1
                    nop                                     ;[226a] 00
                    nop                                     ;[226b] 00
                    nop                                     ;[226c] 00
                    nop                                     ;[226d] 00
                    nop                                     ;[226e] 00
                    ld      a,($78de)                       ;[226f] 3a de 78
                    or      a                               ;[2272] b7
                    ex      de,hl                           ;[2273] eb
                    jp      nz,$1d96                        ;[2274] c2 96 1d
                    push    de                              ;[2277] d5
                    call    $79df                           ;[2278] cd df 79
                    or      (hl)                            ;[227b] b6
                    ld      hl,$2286                        ;[227c] 21 86 22
                    call    nz,SYS_STR_TO_DEVICE                        ;[227f] c4 a7 28
                    pop     hl                              ;[2282] e1
                    jp      $2169                           ;[2283] c3 69 21
                    ccf                                     ;[2286] 3f
                    ld      b,l                             ;[2287] 45
                    ld      e,b                             ;[2288] 58
                    ld      d,h                             ;[2289] 54
                    ld      d,d                             ;[228a] 52
                    ld      b,c                             ;[228b] 41
                    jr      nz,$22d7                        ;[228c] 20 49
                    ld      b,a                             ;[228e] 47
                    ld      c,(hl)                          ;[228f] 4e
                    ld      c,a                             ;[2290] 4f
                    ld      d,d                             ;[2291] 52
                    ld      b,l                             ;[2292] 45
                    ld      b,h                             ;[2293] 44
                    dec     c                               ;[2294] 0d
                    nop                                     ;[2295] 00
                    call    $1f05                           ;[2296] cd 05 1f
                    or      a                               ;[2299] b7
                    jr      nz,$22ae                        ;[229a] 20 12
                    inc     hl                              ;[229c] 23
                    ld      a,(hl)                          ;[229d] 7e
                    inc     hl                              ;[229e] 23
                    or      (hl)                            ;[229f] b6
                    ld      e,$06                           ;[22a0] 1e 06
                    jp      z,$19a2                         ;[22a2] ca a2 19
                    inc     hl                              ;[22a5] 23
                    ld      e,(hl)                          ;[22a6] 5e
                    inc     hl                              ;[22a7] 23
                    ld      d,(hl)                          ;[22a8] 56
                    ex      de,hl                           ;[22a9] eb
                    ld      ($78da),hl                      ;[22aa] 22 da 78
                    ex      de,hl                           ;[22ad] eb
                    rst     $10                             ;[22ae] d7
                    cp      $88                             ;[22af] fe 88
                    jr      nz,$2296                        ;[22b1] 20 e3
                    jp      $222d                           ;[22b3] c3 2d 22


;*********************************************************************************************************************
; NEXT
BAS_PROC_NEXT
                    ld      de,$0000                        ;[22b6] 11 00 00
                    call    nz,$260d                        ;[22b9] c4 0d 26
                    ld      ($78df),hl                      ;[22bc] 22 df 78
                    call    $1936                           ;[22bf] cd 36 19
                    jp      nz,$199d                        ;[22c2] c2 9d 19
                    ld      sp,hl                           ;[22c5] f9
                    ld      ($78e8),hl                      ;[22c6] 22 e8 78
                    push    de                              ;[22c9] d5
                    ld      a,(hl)                          ;[22ca] 7e
                    inc     hl                              ;[22cb] 23
                    push    af                              ;[22cc] f5
                    push    de                              ;[22cd] d5
                    ld      a,(hl)                          ;[22ce] 7e
                    inc     hl                              ;[22cf] 23
                    or      a                               ;[22d0] b7
                    jp      m,$22ea                         ;[22d1] fa ea 22
                    call    $09b1                           ;[22d4] cd b1 09
                    ex      (sp),hl                         ;[22d7] e3
                    push    hl                              ;[22d8] e5
                    call    $070b                           ;[22d9] cd 0b 07
                    pop     hl                              ;[22dc] e1
                    call    $09cb                           ;[22dd] cd cb 09
                    pop     hl                              ;[22e0] e1
                    call    $09c2                           ;[22e1] cd c2 09
                    push    hl                              ;[22e4] e5
                    call    $0a0c                           ;[22e5] cd 0c 0a
                    jr      $2313                           ;[22e8] 18 29
                    inc     hl                              ;[22ea] 23
                    inc     hl                              ;[22eb] 23
                    inc     hl                              ;[22ec] 23
                    inc     hl                              ;[22ed] 23
                    ld      c,(hl)                          ;[22ee] 4e
                    inc     hl                              ;[22ef] 23
                    ld      b,(hl)                          ;[22f0] 46
                    inc     hl                              ;[22f1] 23
                    ex      (sp),hl                         ;[22f2] e3
                    ld      e,(hl)                          ;[22f3] 5e
                    inc     hl                              ;[22f4] 23
                    ld      d,(hl)                          ;[22f5] 56
                    push    hl                              ;[22f6] e5
                    ld      l,c                             ;[22f7] 69
                    ld      h,b                             ;[22f8] 60
                    call    MATH_I_ADD_DE_HL                       ;[22f9] cd d2 0b
                    ld      a,($78af)                       ;[22fc] 3a af 78
                    cp      $04                             ;[22ff] fe 04
                    jp      z,$07b2                         ;[2301] ca b2 07
                    ex      de,hl                           ;[2304] eb
                    pop     hl                              ;[2305] e1
                    ld      (hl),d                          ;[2306] 72
                    dec     hl                              ;[2307] 2b
                    ld      (hl),e                          ;[2308] 73
                    pop     hl                              ;[2309] e1
                    push    de                              ;[230a] d5
                    ld      e,(hl)                          ;[230b] 5e
                    inc     hl                              ;[230c] 23
                    ld      d,(hl)                          ;[230d] 56
                    inc     hl                              ;[230e] 23
                    ex      (sp),hl                         ;[230f] e3
                    call    $0a39                           ;[2310] cd 39 0a
                    pop     hl                              ;[2313] e1
                    pop     bc                              ;[2314] c1
                    sub     b                               ;[2315] 90
                    call    $09c2                           ;[2316] cd c2 09
                    jr      z,$2324                         ;[2319] 28 09
                    ex      de,hl                           ;[231b] eb
                    ld      ($78a2),hl                      ;[231c] 22 a2 78
                    ld      l,c                             ;[231f] 69
                    ld      h,b                             ;[2320] 60
                    jp      $1d1a                           ;[2321] c3 1a 1d
                    ld      sp,hl                           ;[2324] f9
                    ld      ($78e8),hl                      ;[2325] 22 e8 78
                    ld      hl,($78df)                      ;[2328] 2a df 78
                    ld      a,(hl)                          ;[232b] 7e
                    cp      $2c                             ;[232c] fe 2c
                    jp      nz,$1d1e                        ;[232e] c2 1e 1d
                    rst     $10                             ;[2331] d7
                    call    $22b9                           ;[2332] cd b9 22
                    rst     $08                             ;[2335] cf
                    jr      z,$2363                         ;[2336] 28 2b
                    ld      d,$00                           ;[2338] 16 00
                    push    de                              ;[233a] d5
                    ld      c,$01                           ;[233b] 0e 01
                    call    $1963                           ;[233d] cd 63 19
                    call    $249f                           ;[2340] cd 9f 24
                    ld      ($78f3),hl                      ;[2343] 22 f3 78
                    ld      hl,($78f3)                      ;[2346] 2a f3 78
                    pop     bc                              ;[2349] c1
                    ld      a,(hl)                          ;[234a] 7e
                    ld      d,$00                           ;[234b] 16 00
                    sub     $d4                             ;[234d] d6 d4
                    jr      c,$2364                         ;[234f] 38 13
                    cp      $03                             ;[2351] fe 03
                    jr      nc,$2364                        ;[2353] 30 0f
                    cp      $01                             ;[2355] fe 01
                    rla                                     ;[2357] 17
                    xor     d                               ;[2358] aa
                    cp      d                               ;[2359] ba
                    ld      d,a                             ;[235a] 57
                    jp      c,$1997                         ;[235b] da 97 19
                    ld      ($78d8),hl                      ;[235e] 22 d8 78
                    rst     $10                             ;[2361] d7
                    jr      $234d                           ;[2362] 18 e9
                    ld      a,d                             ;[2364] 7a
                    or      a                               ;[2365] b7
                    jp      nz,$23ec                        ;[2366] c2 ec 23
                    ld      a,(hl)                          ;[2369] 7e
                    ld      ($78d8),hl                      ;[236a] 22 d8 78
                    sub     $cd                             ;[236d] d6 cd
                    ret     c                               ;[236f] d8
                    cp      $07                             ;[2370] fe 07
                    ret     nc                              ;[2372] d0
                    ld      e,a                             ;[2373] 5f
                    ld      a,($78af)                       ;[2374] 3a af 78
                    sub     $03                             ;[2377] d6 03
                    or      e                               ;[2379] b3
                    jp      z,$298f                         ;[237a] ca 8f 29
                    ld      hl,$189a                        ;[237d] 21 9a 18
                    add     hl,de                           ;[2380] 19
                    ld      a,b                             ;[2381] 78
                    ld      d,(hl)                          ;[2382] 56
                    cp      d                               ;[2383] ba
                    ret     nc                              ;[2384] d0
                    push    bc                              ;[2385] c5
                    ld      bc,$2346                        ;[2386] 01 46 23
                    push    bc                              ;[2389] c5
                    ld      a,d                             ;[238a] 7a
                    cp      $7f                             ;[238b] fe 7f
                    jp      z,$23d4                         ;[238d] ca d4 23
                    cp      $51                             ;[2390] fe 51
                    jp      c,$23e1                         ;[2392] da e1 23
                    ld      hl,$7921                        ;[2395] 21 21 79
                    or      a                               ;[2398] b7
                    ld      a,($78af)                       ;[2399] 3a af 78
                    dec     a                               ;[239c] 3d
                    dec     a                               ;[239d] 3d
                    dec     a                               ;[239e] 3d
                    jp      z,$0af6                         ;[239f] ca f6 0a
                    ld      c,(hl)                          ;[23a2] 4e
                    inc     hl                              ;[23a3] 23
                    ld      b,(hl)                          ;[23a4] 46
                    push    bc                              ;[23a5] c5
                    jp      m,$23c5                         ;[23a6] fa c5 23
                    inc     hl                              ;[23a9] 23
                    ld      c,(hl)                          ;[23aa] 4e
                    inc     hl                              ;[23ab] 23
                    ld      b,(hl)                          ;[23ac] 46
                    push    bc                              ;[23ad] c5
                    push    af                              ;[23ae] f5
                    or      a                               ;[23af] b7
                    jp      po,$23c4                        ;[23b0] e2 c4 23
                    pop     af                              ;[23b3] f1
                    inc     hl                              ;[23b4] 23
                    jr      c,$23ba                         ;[23b5] 38 03
                    ld      hl,$791d                        ;[23b7] 21 1d 79
                    ld      c,(hl)                          ;[23ba] 4e
                    inc     hl                              ;[23bb] 23
                    ld      b,(hl)                          ;[23bc] 46
                    inc     hl                              ;[23bd] 23
                    push    bc                              ;[23be] c5
                    ld      c,(hl)                          ;[23bf] 4e
                    inc     hl                              ;[23c0] 23
                    ld      b,(hl)                          ;[23c1] 46
                    push    bc                              ;[23c2] c5
                    ld      b,$f1                           ;[23c3] 06 f1
                    add     $03                             ;[23c5] c6 03
                    ld      c,e                             ;[23c7] 4b
                    ld      b,a                             ;[23c8] 47
                    push    bc                              ;[23c9] c5
                    ld      bc,$2406                        ;[23ca] 01 06 24
                    push    bc                              ;[23cd] c5
                    ld      hl,($78d8)                      ;[23ce] 2a d8 78
                    jp      $233a                           ;[23d1] c3 3a 23
                    call    MATH_ISD_CSNG_ACC                           ;[23d4] cd b1 0a
                    call    $09a4                           ;[23d7] cd a4 09
                    ld      bc,$13f2                        ;[23da] 01 f2 13
                    ld      d,$7f                           ;[23dd] 16 7f
                    jr      $23cd                           ;[23df] 18 ec
                    push    de                              ;[23e1] d5
                    call    MATH_ISD_CINT_ACC                           ;[23e2] cd 7f 0a
                    pop     de                              ;[23e5] d1
                    push    hl                              ;[23e6] e5
                    ld      bc,$25e9                        ;[23e7] 01 e9 25
                    jr      $23cd                           ;[23ea] 18 e1
                    ld      a,b                             ;[23ec] 78
                    cp      $64                             ;[23ed] fe 64
                    ret     nc                              ;[23ef] d0
                    push    bc                              ;[23f0] c5
                    push    de                              ;[23f1] d5
                    ld      de,$6404                        ;[23f2] 11 04 64
                    ld      hl,$25b8                        ;[23f5] 21 b8 25
                    push    hl                              ;[23f8] e5
                    rst     $20                             ;[23f9] e7
                    jp      nz,$2395                        ;[23fa] c2 95 23
                    ld      hl,($7921)                      ;[23fd] 2a 21 79
                    push    hl                              ;[2400] e5
                    ld      bc,$258c                        ;[2401] 01 8c 25
                    jr      $23cd                           ;[2404] 18 c7
                    pop     bc                              ;[2406] c1
                    ld      a,c                             ;[2407] 79
                    ld      ($78b0),a                       ;[2408] 32 b0 78
                    ld      a,b                             ;[240b] 78
                    cp      $08                             ;[240c] fe 08
                    jr      z,$2438                         ;[240e] 28 28
                    ld      a,($78af)                       ;[2410] 3a af 78
                    cp      $08                             ;[2413] fe 08
                    jp      z,$2460                         ;[2415] ca 60 24
                    ld      d,a                             ;[2418] 57
                    ld      a,b                             ;[2419] 78
                    cp      $04                             ;[241a] fe 04
                    jp      z,$2472                         ;[241c] ca 72 24
                    ld      a,d                             ;[241f] 7a
                    cp      $03                             ;[2420] fe 03
                    jp      z,$0af6                         ;[2422] ca f6 0a
                    jp      nc,$247c                        ;[2425] d2 7c 24
                    ld      hl,$18bf                        ;[2428] 21 bf 18
                    ld      b,$00                           ;[242b] 06 00
                    add     hl,bc                           ;[242d] 09
                    add     hl,bc                           ;[242e] 09
                    ld      c,(hl)                          ;[242f] 4e
                    inc     hl                              ;[2430] 23
                    ld      b,(hl)                          ;[2431] 46
                    pop     de                              ;[2432] d1
                    ld      hl,($7921)                      ;[2433] 2a 21 79
                    push    bc                              ;[2436] c5
                    ret                                     ;[2437] c9

                    call    MATH_ISD_CDBL_ACC                           ;[2438] cd db 0a
                    call    $09fc                           ;[243b] cd fc 09
                    pop     hl                              ;[243e] e1
                    ld      ($791f),hl                      ;[243f] 22 1f 79
                    pop     hl                              ;[2442] e1
                    ld      ($791d),hl                      ;[2443] 22 1d 79
                    pop     bc                              ;[2446] c1
                    pop     de                              ;[2447] d1
                    call    $09b4                           ;[2448] cd b4 09
                    call    MATH_ISD_CDBL_ACC                           ;[244b] cd db 0a
                    ld      hl,$18ab                        ;[244e] 21 ab 18
                    ld      a,($78b0)                       ;[2451] 3a b0 78
                    rlca                                    ;[2454] 07
                    push    bc                              ;[2455] c5
                    ld      c,a                             ;[2456] 4f
                    ld      b,$00                           ;[2457] 06 00
                    add     hl,bc                           ;[2459] 09
                    pop     bc                              ;[245a] c1
                    ld      a,(hl)                          ;[245b] 7e
                    inc     hl                              ;[245c] 23
                    ld      h,(hl)                          ;[245d] 66
                    ld      l,a                             ;[245e] 6f
                    jp      (hl)                            ;[245f] e9
                    push    bc                              ;[2460] c5
                    call    $09fc                           ;[2461] cd fc 09
                    pop     af                              ;[2464] f1
                    ld      ($78af),a                       ;[2465] 32 af 78
                    cp      $04                             ;[2468] fe 04
                    jr      z,$2446                         ;[246a] 28 da
                    pop     hl                              ;[246c] e1
                    ld      ($7921),hl                      ;[246d] 22 21 79
                    jr      $244b                           ;[2470] 18 d9
                    call    MATH_ISD_CSNG_ACC                           ;[2472] cd b1 0a
                    pop     bc                              ;[2475] c1
                    pop     de                              ;[2476] d1
                    ld      hl,$18b5                        ;[2477] 21 b5 18
                    jr      $2451                           ;[247a] 18 d5
                    pop     hl                              ;[247c] e1
                    call    $09a4                           ;[247d] cd a4 09
                    call    $0acf                           ;[2480] cd cf 0a
                    call    $09bf                           ;[2483] cd bf 09
                    pop     hl                              ;[2486] e1
                    ld      ($7923),hl                      ;[2487] 22 23 79
                    pop     hl                              ;[248a] e1
                    ld      ($7921),hl                      ;[248b] 22 21 79
                    jr      $2477                           ;[248e] 18 e7
                    push    hl                              ;[2490] e5
                    ex      de,hl                           ;[2491] eb
                    call    $0acf                           ;[2492] cd cf 0a
                    pop     hl                              ;[2495] e1
                    call    $09a4                           ;[2496] cd a4 09
                    call    $0acf                           ;[2499] cd cf 0a
                    jp      $08a0                           ;[249c] c3 a0 08
                    rst     $10                             ;[249f] d7
                    ld      e,$28                           ;[24a0] 1e 28
                    jp      z,$19a2                         ;[24a2] ca a2 19
                    jp      c,$0e6c                         ;[24a5] da 6c 0e
                    call    $1e3d                           ;[24a8] cd 3d 1e
                    jp      nc,$2540                        ;[24ab] d2 40 25
                    cp      $cd                             ;[24ae] fe cd
                    jr      z,$249f                         ;[24b0] 28 ed
                    cp      $2e                             ;[24b2] fe 2e
                    jp      z,$0e6c                         ;[24b4] ca 6c 0e
                    cp      $ce                             ;[24b7] fe ce
                    jp      z,$2532                         ;[24b9] ca 32 25
                    cp      $22                             ;[24bc] fe 22
                    jp      z,$2866                         ;[24be] ca 66 28
                    cp      $cb                             ;[24c1] fe cb
                    jp      z,$25c4                         ;[24c3] ca c4 25
                    cp      $26                             ;[24c6] fe 26
                    jp      z,$7994                         ;[24c8] ca 94 79
                    cp      $c3                             ;[24cb] fe c3
                    jr      nz,$24d9                        ;[24cd] 20 0a
                    rst     $10                             ;[24cf] d7
                    ld      a,($789a)                       ;[24d0] 3a 9a 78
                    push    hl                              ;[24d3] e5
                    call    $27f8                           ;[24d4] cd f8 27
                    pop     hl                              ;[24d7] e1
                    ret                                     ;[24d8] c9

                    cp      $c2                             ;[24d9] fe c2
                    jr      nz,$24e7                        ;[24db] 20 0a
                    rst     $10                             ;[24dd] d7
                    push    hl                              ;[24de] e5
                    ld      hl,($78ea)                      ;[24df] 2a ea 78
                    call    $0c66                           ;[24e2] cd 66 0c
                    pop     hl                              ;[24e5] e1
                    ret                                     ;[24e6] c9

                    cp      $c0                             ;[24e7] fe c0
                    jr      nz,$24ff                        ;[24e9] 20 14
                    rst     $10                             ;[24eb] d7
                    rst     $08                             ;[24ec] cf
                    jr      z,$24bc                         ;[24ed] 28 cd
                    dec     c                               ;[24ef] 0d
                    ld      h,$cf                           ;[24f0] 26 cf
                    add     hl,hl                           ;[24f2] 29
                    push    hl                              ;[24f3] e5
                    ex      de,hl                           ;[24f4] eb
                    ld      a,h                             ;[24f5] 7c
                    or      l                               ;[24f6] b5
                    jp      z,$1e4a                         ;[24f7] ca 4a 1e
                    call    $0a9a                           ;[24fa] cd 9a 0a
                    pop     hl                              ;[24fd] e1
                    ret                                     ;[24fe] c9

                    cp      $c1                             ;[24ff] fe c1
                    jp      z,$27fe                         ;[2501] ca fe 27
                    cp      $c5                             ;[2504] fe c5
                    jp      z,$799d                         ;[2506] ca 9d 79
                    cp      $c8                             ;[2509] fe c8
                    jp      z,$27c9                         ;[250b] ca c9 27
                    cp      $c7                             ;[250e] fe c7
                    jp      z,$7976                         ;[2510] ca 76 79
                    cp      $c6                             ;[2513] fe c6
                    jp      z,$0132                         ;[2515] ca 32 01
                    cp      $c9                             ;[2518] fe c9
                    jp      z,$019d                         ;[251a] ca 9d 01
                    cp      $c4                             ;[251d] fe c4
                    jp      z,$2a2f                         ;[251f] ca 2f 2a
                    cp      $be                             ;[2522] fe be
                    jp      z,$7955                         ;[2524] ca 55 79
                    sub     $d7                             ;[2527] d6 d7
                    jp      nc,$254e                        ;[2529] d2 4e 25
                    call    $2335                           ;[252c] cd 35 23
                    rst     $08                             ;[252f] cf
                    add     hl,hl                           ;[2530] 29
                    ret                                     ;[2531] c9

                    ld      d,$7d                           ;[2532] 16 7d
                    call    $233a                           ;[2534] cd 3a 23
                    ld      hl,($78f3)                      ;[2537] 2a f3 78
                    push    hl                              ;[253a] e5
                    call    $097b                           ;[253b] cd 7b 09
                    pop     hl                              ;[253e] e1
                    ret                                     ;[253f] c9

                    call    $260d                           ;[2540] cd 0d 26
                    push    hl                              ;[2543] e5
                    ex      de,hl                           ;[2544] eb
                    ld      ($7921),hl                      ;[2545] 22 21 79
                    rst     $20                             ;[2548] e7
                    call    nz,$09f7                        ;[2549] c4 f7 09
                    pop     hl                              ;[254c] e1
                    ret                                     ;[254d] c9

                    ld      b,$00                           ;[254e] 06 00
                    rlca                                    ;[2550] 07
                    ld      c,a                             ;[2551] 4f
                    push    bc                              ;[2552] c5
                    rst     $10                             ;[2553] d7
                    ld      a,c                             ;[2554] 79
                    cp      $41                             ;[2555] fe 41
                    jr      c,$256f                         ;[2557] 38 16
                    call    $2335                           ;[2559] cd 35 23
                    rst     $08                             ;[255c] cf
                    inc     l                               ;[255d] 2c
                    call    $0af4                           ;[255e] cd f4 0a
                    ex      de,hl                           ;[2561] eb
                    ld      hl,($7921)                      ;[2562] 2a 21 79
                    ex      (sp),hl                         ;[2565] e3
                    push    hl                              ;[2566] e5
                    ex      de,hl                           ;[2567] eb
                    call    $2b1c                           ;[2568] cd 1c 2b
                    ex      de,hl                           ;[256b] eb
                    ex      (sp),hl                         ;[256c] e3
                    jr      $2583                           ;[256d] 18 14
                    call    $252c                           ;[256f] cd 2c 25
                    ex      (sp),hl                         ;[2572] e3
                    ld      a,l                             ;[2573] 7d
                    cp      $0c                             ;[2574] fe 0c
                    jr      c,$257f                         ;[2576] 38 07
                    cp      $1b                             ;[2578] fe 1b
                    push    hl                              ;[257a] e5
                    call    c,MATH_ISD_CSNG_ACC                         ;[257b] dc b1 0a
                    pop     hl                              ;[257e] e1
                    ld      de,$253e                        ;[257f] 11 3e 25
                    push    de                              ;[2582] d5
                    ld      bc,$1608                        ;[2583] 01 08 16
                    add     hl,bc                           ;[2586] 09
                    ld      c,(hl)                          ;[2587] 4e
                    inc     hl                              ;[2588] 23
                    ld      h,(hl)                          ;[2589] 66
                    ld      l,c                             ;[258a] 69
                    jp      (hl)                            ;[258b] e9
                    call    $29d7                           ;[258c] cd d7 29
                    ld      a,(hl)                          ;[258f] 7e
                    inc     hl                              ;[2590] 23
                    ld      c,(hl)                          ;[2591] 4e
                    inc     hl                              ;[2592] 23
                    ld      b,(hl)                          ;[2593] 46
                    pop     de                              ;[2594] d1
                    push    bc                              ;[2595] c5
                    push    af                              ;[2596] f5
                    call    $29de                           ;[2597] cd de 29
                    pop     de                              ;[259a] d1
                    ld      e,(hl)                          ;[259b] 5e
                    inc     hl                              ;[259c] 23
                    ld      c,(hl)                          ;[259d] 4e
                    inc     hl                              ;[259e] 23
                    ld      b,(hl)                          ;[259f] 46
                    pop     hl                              ;[25a0] e1
                    ld      a,e                             ;[25a1] 7b
                    or      d                               ;[25a2] b2
                    ret     z                               ;[25a3] c8
                    ld      a,d                             ;[25a4] 7a
                    sub     $01                             ;[25a5] d6 01
                    ret     c                               ;[25a7] d8
                    xor     a                               ;[25a8] af
                    cp      e                               ;[25a9] bb
                    inc     a                               ;[25aa] 3c
                    ret     nc                              ;[25ab] d0
                    dec     d                               ;[25ac] 15
                    dec     e                               ;[25ad] 1d
                    ld      a,(bc)                          ;[25ae] 0a
                    cp      (hl)                            ;[25af] be
                    inc     hl                              ;[25b0] 23
                    inc     bc                              ;[25b1] 03
                    jr      z,$25a1                         ;[25b2] 28 ed
                    ccf                                     ;[25b4] 3f
                    jp      $0960                           ;[25b5] c3 60 09
                    inc     a                               ;[25b8] 3c
                    adc     a                               ;[25b9] 8f
                    pop     bc                              ;[25ba] c1
                    and     b                               ;[25bb] a0
                    add     $ff                             ;[25bc] c6 ff
                    sbc     a                               ;[25be] 9f
                    call    $098d                           ;[25bf] cd 8d 09
                    jr      $25d6                           ;[25c2] 18 12
                    ld      d,$5a                           ;[25c4] 16 5a
                    call    $233a                           ;[25c6] cd 3a 23
                    call    MATH_ISD_CINT_ACC                           ;[25c9] cd 7f 0a
                    ld      a,l                             ;[25cc] 7d
                    cpl                                     ;[25cd] 2f
                    ld      l,a                             ;[25ce] 6f
                    ld      a,h                             ;[25cf] 7c
                    cpl                                     ;[25d0] 2f
                    ld      h,a                             ;[25d1] 67
                    ld      ($7921),hl                      ;[25d2] 22 21 79
                    pop     bc                              ;[25d5] c1
                    jp      $2346                           ;[25d6] c3 46 23
                    ld      a,($78af)                       ;[25d9] 3a af 78
                    cp      $08                             ;[25dc] fe 08
                    jr      nc,$25e5                        ;[25de] 30 05
                    sub     $03                             ;[25e0] d6 03
                    or      a                               ;[25e2] b7
                    scf                                     ;[25e3] 37
                    ret                                     ;[25e4] c9

                    sub     $03                             ;[25e5] d6 03
                    or      a                               ;[25e7] b7
                    ret                                     ;[25e8] c9

                    push    bc                              ;[25e9] c5
                    call    MATH_ISD_CINT_ACC                           ;[25ea] cd 7f 0a
                    pop     af                              ;[25ed] f1
                    pop     de                              ;[25ee] d1
                    ld      bc,$27fa                        ;[25ef] 01 fa 27
                    push    bc                              ;[25f2] c5
                    cp      $46                             ;[25f3] fe 46
                    jr      nz,$25fd                        ;[25f5] 20 06
                    ld      a,e                             ;[25f7] 7b
                    or      l                               ;[25f8] b5
                    ld      l,a                             ;[25f9] 6f
                    ld      a,h                             ;[25fa] 7c
                    or      d                               ;[25fb] b2
                    ret                                     ;[25fc] c9

                    ld      a,e                             ;[25fd] 7b
                    and     l                               ;[25fe] a5
                    ld      l,a                             ;[25ff] 6f
                    ld      a,h                             ;[2600] 7c
                    and     d                               ;[2601] a2
                    ret                                     ;[2602] c9

                    dec     hl                              ;[2603] 2b
                    rst     $10                             ;[2604] d7
                    ret     z                               ;[2605] c8
                    rst     $08                             ;[2606] cf
                    inc     l                               ;[2607] 2c

;*********************************************************************************************************************
; DIM
;BAS_CODE_DIM          equ     $8a
BAS_PROC_DIM:

                    ld      bc,$2603                        ;[2608] 01 03 26
                    push    bc                              ;[260b] c5
                    or      $af                             ;[260c] f6 af
                    ld      ($78ae),a                       ;[260e] 32 ae 78
                    ld      b,(hl)                          ;[2611] 46
                    call    $1e3d                           ;[2612] cd 3d 1e
                    jp      c,$1997                         ;[2615] da 97 19
                    xor     a                               ;[2618] af
                    ld      c,a                             ;[2619] 4f
                    rst     $10                             ;[261a] d7
                    jr      c,$2622                         ;[261b] 38 05
                    call    $1e3d                           ;[261d] cd 3d 1e
                    jr      c,$262b                         ;[2620] 38 09
                    ld      c,a                             ;[2622] 4f
                    rst     $10                             ;[2623] d7
                    jr      c,$2623                         ;[2624] 38 fd
                    call    $1e3d                           ;[2626] cd 3d 1e
                    jr      nc,$2623                        ;[2629] 30 f8
                    ld      de,$2652                        ;[262b] 11 52 26
                    push    de                              ;[262e] d5
                    ld      d,$02                           ;[262f] 16 02
                    cp      $25                             ;[2631] fe 25
                    ret     z                               ;[2633] c8
                    inc     d                               ;[2634] 14
                    cp      $24                             ;[2635] fe 24
                    ret     z                               ;[2637] c8
                    nop                                     ;[2638] 00
                    nop                                     ;[2639] 00
                    nop                                     ;[263a] 00
                    nop                                     ;[263b] 00
                    nop                                     ;[263c] 00
                    nop                                     ;[263d] 00
                    nop                                     ;[263e] 00
                    nop                                     ;[263f] 00
                    nop                                     ;[2640] 00
                    ld      a,b                             ;[2641] 78
                    sub     $41                             ;[2642] d6 41
                    and     $7f                             ;[2644] e6 7f
                    ld      e,a                             ;[2646] 5f
                    ld      d,$00                           ;[2647] 16 00
                    push    hl                              ;[2649] e5
                    ld      hl,$7901                        ;[264a] 21 01 79
                    add     hl,de                           ;[264d] 19
                    ld      d,(hl)                          ;[264e] 56
                    pop     hl                              ;[264f] e1
                    dec     hl                              ;[2650] 2b
                    ret                                     ;[2651] c9

                    ld      a,d                             ;[2652] 7a
                    ld      ($78af),a                       ;[2653] 32 af 78
                    rst     $10                             ;[2656] d7
                    ld      a,($78dc)                       ;[2657] 3a dc 78
                    or      a                               ;[265a] b7
                    jp      nz,$2664                        ;[265b] c2 64 26
                    ld      a,(hl)                          ;[265e] 7e
                    sub     $28                             ;[265f] d6 28
                    jp      z,$26e9                         ;[2661] ca e9 26
                    xor     a                               ;[2664] af
                    ld      ($78dc),a                       ;[2665] 32 dc 78
                    push    hl                              ;[2668] e5
                    push    de                              ;[2669] d5
                    ld      hl,($78f9)                      ;[266a] 2a f9 78
                    ex      de,hl                           ;[266d] eb
                    ld      hl,($78fb)                      ;[266e] 2a fb 78
                    rst     $18                             ;[2671] df
                    pop     hl                              ;[2672] e1
                    jr      z,$268e                         ;[2673] 28 19
                    ld      a,(de)                          ;[2675] 1a
                    ld      l,a                             ;[2676] 6f
                    cp      h                               ;[2677] bc
                    inc     de                              ;[2678] 13
                    jr      nz,$2686                        ;[2679] 20 0b
                    ld      a,(de)                          ;[267b] 1a
                    cp      c                               ;[267c] b9
                    jr      nz,$2686                        ;[267d] 20 07
                    inc     de                              ;[267f] 13
                    ld      a,(de)                          ;[2680] 1a
                    cp      b                               ;[2681] b8
                    jp      z,$26cc                         ;[2682] ca cc 26
                    ld      a,$13                           ;[2685] 3e 13
                    inc     de                              ;[2687] 13
                    push    hl                              ;[2688] e5
                    ld      h,$00                           ;[2689] 26 00
                    add     hl,de                           ;[268b] 19
                    jr      $266d                           ;[268c] 18 df
                    ld      a,h                             ;[268e] 7c
                    pop     hl                              ;[268f] e1
                    ex      (sp),hl                         ;[2690] e3
                    push    af                              ;[2691] f5
                    push    de                              ;[2692] d5
                    ld      de,$24f1                        ;[2693] 11 f1 24
                    rst     $18                             ;[2696] df
                    jr      z,$26cf                         ;[2697] 28 36
                    ld      de,$2543                        ;[2699] 11 43 25
                    rst     $18                             ;[269c] df
                    pop     de                              ;[269d] d1
                    jr      z,$26d5                         ;[269e] 28 35
                    pop     af                              ;[26a0] f1
                    ex      (sp),hl                         ;[26a1] e3
                    push    hl                              ;[26a2] e5
                    push    bc                              ;[26a3] c5
                    ld      c,a                             ;[26a4] 4f
                    ld      b,$00                           ;[26a5] 06 00
                    push    bc                              ;[26a7] c5
                    inc     bc                              ;[26a8] 03
                    inc     bc                              ;[26a9] 03
                    inc     bc                              ;[26aa] 03
                    ld      hl,($78fd)                      ;[26ab] 2a fd 78
                    push    hl                              ;[26ae] e5
                    add     hl,bc                           ;[26af] 09
                    pop     bc                              ;[26b0] c1
                    push    hl                              ;[26b1] e5
                    call    $1955                           ;[26b2] cd 55 19
                    pop     hl                              ;[26b5] e1
                    ld      ($78fd),hl                      ;[26b6] 22 fd 78
                    ld      h,b                             ;[26b9] 60
                    ld      l,c                             ;[26ba] 69
                    ld      ($78fb),hl                      ;[26bb] 22 fb 78
                    dec     hl                              ;[26be] 2b
                    ld      (hl),$00                        ;[26bf] 36 00
                    rst     $18                             ;[26c1] df
                    jr      nz,$26be                        ;[26c2] 20 fa
                    pop     de                              ;[26c4] d1
                    ld      (hl),e                          ;[26c5] 73
                    inc     hl                              ;[26c6] 23
                    pop     de                              ;[26c7] d1
                    ld      (hl),e                          ;[26c8] 73
                    inc     hl                              ;[26c9] 23
                    ld      (hl),d                          ;[26ca] 72
                    ex      de,hl                           ;[26cb] eb
                    inc     de                              ;[26cc] 13
                    pop     hl                              ;[26cd] e1
                    ret                                     ;[26ce] c9

                    ld      d,a                             ;[26cf] 57
                    ld      e,a                             ;[26d0] 5f
                    pop     af                              ;[26d1] f1
                    pop     af                              ;[26d2] f1
                    ex      (sp),hl                         ;[26d3] e3
                    ret                                     ;[26d4] c9

                    ld      ($7924),a                       ;[26d5] 32 24 79
                    pop     bc                              ;[26d8] c1
                    ld      h,a                             ;[26d9] 67
                    ld      l,a                             ;[26da] 6f
                    ld      ($7921),hl                      ;[26db] 22 21 79
                    rst     $20                             ;[26de] e7
                    jr      nz,$26e7                        ;[26df] 20 06
                    ld      hl,$1928                        ;[26e1] 21 28 19
                    ld      ($7921),hl                      ;[26e4] 22 21 79
                    pop     hl                              ;[26e7] e1
                    ret                                     ;[26e8] c9

                    push    hl                              ;[26e9] e5
                    ld      hl,($78ae)                      ;[26ea] 2a ae 78
                    ex      (sp),hl                         ;[26ed] e3
                    ld      d,a                             ;[26ee] 57
                    push    de                              ;[26ef] d5
                    push    bc                              ;[26f0] c5
                    call    $1e45                           ;[26f1] cd 45 1e
                    pop     bc                              ;[26f4] c1
                    pop     af                              ;[26f5] f1
                    ex      de,hl                           ;[26f6] eb
                    ex      (sp),hl                         ;[26f7] e3
                    push    hl                              ;[26f8] e5
                    ex      de,hl                           ;[26f9] eb
                    inc     a                               ;[26fa] 3c
                    ld      d,a                             ;[26fb] 57
                    ld      a,(hl)                          ;[26fc] 7e
                    cp      $2c                             ;[26fd] fe 2c
                    jr      z,$26ef                         ;[26ff] 28 ee
                    rst     $08                             ;[2701] cf
                    add     hl,hl                           ;[2702] 29
                    ld      ($78f3),hl                      ;[2703] 22 f3 78
                    pop     hl                              ;[2706] e1
                    ld      ($78ae),hl                      ;[2707] 22 ae 78
                    push    de                              ;[270a] d5
                    ld      hl,($78fb)                      ;[270b] 2a fb 78
                    ld      a,$19                           ;[270e] 3e 19
                    ex      de,hl                           ;[2710] eb
                    ld      hl,($78fd)                      ;[2711] 2a fd 78
                    ex      de,hl                           ;[2714] eb
                    rst     $18                             ;[2715] df
                    ld      a,($78af)                       ;[2716] 3a af 78
                    jr      z,$2742                         ;[2719] 28 27
                    cp      (hl)                            ;[271b] be
                    inc     hl                              ;[271c] 23
                    jr      nz,$2727                        ;[271d] 20 08
                    ld      a,(hl)                          ;[271f] 7e
                    cp      c                               ;[2720] b9
                    inc     hl                              ;[2721] 23
                    jr      nz,$2728                        ;[2722] 20 04
                    ld      a,(hl)                          ;[2724] 7e
                    cp      b                               ;[2725] b8
                    ld      a,$23                           ;[2726] 3e 23
                    inc     hl                              ;[2728] 23
                    ld      e,(hl)                          ;[2729] 5e
                    inc     hl                              ;[272a] 23
                    ld      d,(hl)                          ;[272b] 56
                    inc     hl                              ;[272c] 23
                    jr      nz,$270f                        ;[272d] 20 e0
                    ld      a,($78ae)                       ;[272f] 3a ae 78
                    or      a                               ;[2732] b7
                    ld      e,$12                           ;[2733] 1e 12
                    jp      nz,$19a2                        ;[2735] c2 a2 19
                    pop     af                              ;[2738] f1
                    sub     (hl)                            ;[2739] 96
                    jp      z,$2795                         ;[273a] ca 95 27
                    ld      e,$10                           ;[273d] 1e 10
                    jp      $19a2                           ;[273f] c3 a2 19
                    ld      (hl),a                          ;[2742] 77
                    inc     hl                              ;[2743] 23
                    ld      e,a                             ;[2744] 5f
                    ld      d,$00                           ;[2745] 16 00
                    pop     af                              ;[2747] f1
                    ld      (hl),c                          ;[2748] 71
                    inc     hl                              ;[2749] 23
                    ld      (hl),b                          ;[274a] 70
                    inc     hl                              ;[274b] 23
                    ld      c,a                             ;[274c] 4f
                    call    $1963                           ;[274d] cd 63 19
                    inc     hl                              ;[2750] 23
                    inc     hl                              ;[2751] 23
                    ld      ($78d8),hl                      ;[2752] 22 d8 78
                    ld      (hl),c                          ;[2755] 71
                    inc     hl                              ;[2756] 23
                    ld      a,($78ae)                       ;[2757] 3a ae 78
                    rla                                     ;[275a] 17
                    ld      a,c                             ;[275b] 79
                    ld      bc,$000b                        ;[275c] 01 0b 00
                    jr      nc,$2763                        ;[275f] 30 02
                    pop     bc                              ;[2761] c1
                    inc     bc                              ;[2762] 03
                    ld      (hl),c                          ;[2763] 71
                    inc     hl                              ;[2764] 23
                    ld      (hl),b                          ;[2765] 70
                    inc     hl                              ;[2766] 23
                    push    af                              ;[2767] f5
                    call    $0baa                           ;[2768] cd aa 0b
                    pop     af                              ;[276b] f1
                    dec     a                               ;[276c] 3d
                    jr      nz,$275c                        ;[276d] 20 ed
                    push    af                              ;[276f] f5
                    ld      b,d                             ;[2770] 42
                    ld      c,e                             ;[2771] 4b
                    ex      de,hl                           ;[2772] eb
                    add     hl,de                           ;[2773] 19
                    jr      c,$273d                         ;[2774] 38 c7
                    call    $196c                           ;[2776] cd 6c 19
                    ld      ($78fd),hl                      ;[2779] 22 fd 78
                    dec     hl                              ;[277c] 2b
                    ld      (hl),$00                        ;[277d] 36 00
                    rst     $18                             ;[277f] df
                    jr      nz,$277c                        ;[2780] 20 fa
                    inc     bc                              ;[2782] 03
                    ld      d,a                             ;[2783] 57
                    ld      hl,($78d8)                      ;[2784] 2a d8 78
                    ld      e,(hl)                          ;[2787] 5e
                    ex      de,hl                           ;[2788] eb
                    add     hl,hl                           ;[2789] 29
                    add     hl,bc                           ;[278a] 09
                    ex      de,hl                           ;[278b] eb
                    dec     hl                              ;[278c] 2b
                    dec     hl                              ;[278d] 2b
                    ld      (hl),e                          ;[278e] 73
                    inc     hl                              ;[278f] 23
                    ld      (hl),d                          ;[2790] 72
                    inc     hl                              ;[2791] 23
                    pop     af                              ;[2792] f1
                    jr      c,$27c5                         ;[2793] 38 30
                    ld      b,a                             ;[2795] 47
                    ld      c,a                             ;[2796] 4f
                    ld      a,(hl)                          ;[2797] 7e
                    inc     hl                              ;[2798] 23
                    ld      d,$e1                           ;[2799] 16 e1
                    ld      e,(hl)                          ;[279b] 5e
                    inc     hl                              ;[279c] 23
                    ld      d,(hl)                          ;[279d] 56
                    inc     hl                              ;[279e] 23
                    ex      (sp),hl                         ;[279f] e3
                    push    af                              ;[27a0] f5
                    rst     $18                             ;[27a1] df
                    jp      nc,$273d                        ;[27a2] d2 3d 27
                    call    $0baa                           ;[27a5] cd aa 0b
                    add     hl,de                           ;[27a8] 19
                    pop     af                              ;[27a9] f1
                    dec     a                               ;[27aa] 3d
                    ld      b,h                             ;[27ab] 44
                    ld      c,l                             ;[27ac] 4d
                    jr      nz,$279a                        ;[27ad] 20 eb
                    ld      a,($78af)                       ;[27af] 3a af 78
                    ld      b,h                             ;[27b2] 44
                    ld      c,l                             ;[27b3] 4d
                    add     hl,hl                           ;[27b4] 29
                    sub     $04                             ;[27b5] d6 04
                    jr      c,$27bd                         ;[27b7] 38 04
                    add     hl,hl                           ;[27b9] 29
                    jr      z,$27c2                         ;[27ba] 28 06
                    add     hl,hl                           ;[27bc] 29
                    or      a                               ;[27bd] b7
                    jp      po,$27c2                        ;[27be] e2 c2 27
                    add     hl,bc                           ;[27c1] 09
                    pop     bc                              ;[27c2] c1
                    add     hl,bc                           ;[27c3] 09
                    ex      de,hl                           ;[27c4] eb
                    ld      hl,($78f3)                      ;[27c5] 2a f3 78
                    ret                                     ;[27c8] c9

                    xor     a                               ;[27c9] af
                    push    hl                              ;[27ca] e5
                    ld      ($78af),a                       ;[27cb] 32 af 78
                    call    $27d4                           ;[27ce] cd d4 27
                    pop     hl                              ;[27d1] e1
                    rst     $10                             ;[27d2] d7
                    ret                                     ;[27d3] c9


;*********************************************************************************************************************
; FRE
;BAS_CODE_FRE        equ     $da
BAS_PROC_FRE:
                    ld      hl,($78fd)                      ;[27d4] 2a fd 78
                    ex      de,hl                           ;[27d7] eb
                    ld      hl,$0000                        ;[27d8] 21 00 00
                    add     hl,sp                           ;[27db] 39
                    rst     $20                             ;[27dc] e7
                    jr      nz,$27ec                        ;[27dd] 20 0d
                    call    $29da                           ;[27df] cd da 29
                    call    $28e6                           ;[27e2] cd e6 28
                    ld      hl,($78a0)                      ;[27e5] 2a a0 78
                    ex      de,hl                           ;[27e8] eb
                    ld      hl,($78d6)                      ;[27e9] 2a d6 78
                    ld      a,l                             ;[27ec] 7d
                    sub     e                               ;[27ed] 93
                    ld      l,a                             ;[27ee] 6f
                    ld      a,h                             ;[27ef] 7c
                    sbc     d                               ;[27f0] 9a
                    ld      h,a                             ;[27f1] 67
                    jp      $0c66                           ;[27f2] c3 66 0c



;*********************************************************************************************************************
; POS
;BAS_CODE_POS        equ     $dc
BAS_PROC_POS:
                    ld      a,($78a6)                       ;[27f5] 3a a6 78
                    ld      l,a                             ;[27f8] 6f
                    xor     a                               ;[27f9] af
                    ld      h,a                             ;[27fa] 67
                    jp      $0a9a                           ;[27fb] c3 9a 0a
                    call    $79a9                           ;[27fe] cd a9 79
                    rst     $10                             ;[2801] d7
                    call    $252c                           ;[2802] cd 2c 25
                    push    hl                              ;[2805] e5
                    ld      hl,$0890                        ;[2806] 21 90 08
                    push    hl                              ;[2809] e5
                    ld      a,($78af)                       ;[280a] 3a af 78
                    push    af                              ;[280d] f5
                    cp      $03                             ;[280e] fe 03
                    call    z,$29da                         ;[2810] cc da 29
                    pop     af                              ;[2813] f1
                    ex      de,hl                           ;[2814] eb
                    ld      hl,($788e)                      ;[2815] 2a 8e 78
                    jp      (hl)                            ;[2818] e9
                    push    hl                              ;[2819] e5
                    and     $07                             ;[281a] e6 07
                    ld      hl,$18a1                        ;[281c] 21 a1 18
                    ld      c,a                             ;[281f] 4f
                    ld      b,$00                           ;[2820] 06 00
                    add     hl,bc                           ;[2822] 09
                    call    $2586                           ;[2823] cd 86 25
                    pop     hl                              ;[2826] e1
                    ret                                     ;[2827] c9

                    push    hl                              ;[2828] e5
                    ld      hl,($78a2)                      ;[2829] 2a a2 78
                    inc     hl                              ;[282c] 23
                    ld      a,h                             ;[282d] 7c
                    or      l                               ;[282e] b5
                    pop     hl                              ;[282f] e1
                    ret     nz                              ;[2830] c0
                    ld      e,$16                           ;[2831] 1e 16
                    jp      $19a2                           ;[2833] c3 a2 19


;*********************************************************************************************************************
; STR$
;BAS_CODE_STR        equ     $f4
BAS_PROC_STR:
                    call    $0fbd                           ;[2836] cd bd 0f
                    call    $2865                           ;[2839] cd 65 28
                    call    $29da                           ;[283c] cd da 29
                    ld      bc,$2a2b                        ;[283f] 01 2b 2a
                    push    bc                              ;[2842] c5
                    ld      a,(hl)                          ;[2843] 7e
                    inc     hl                              ;[2844] 23
                    push    hl                              ;[2845] e5
                    call    $28bf                           ;[2846] cd bf 28
                    pop     hl                              ;[2849] e1
                    ld      c,(hl)                          ;[284a] 4e
                    inc     hl                              ;[284b] 23
                    ld      b,(hl)                          ;[284c] 46
                    call    $285a                           ;[284d] cd 5a 28
                    push    hl                              ;[2850] e5
                    ld      l,a                             ;[2851] 6f
                    call    $29ce                           ;[2852] cd ce 29
                    pop     de                              ;[2855] d1
                    ret                                     ;[2856] c9

                    call    $28bf                           ;[2857] cd bf 28
                    ld      hl,$78d3                        ;[285a] 21 d3 78
                    push    hl                              ;[285d] e5
                    ld      (hl),a                          ;[285e] 77
                    inc     hl                              ;[285f] 23
                    ld      (hl),e                          ;[2860] 73
                    inc     hl                              ;[2861] 23
                    ld      (hl),d                          ;[2862] 72
                    pop     hl                              ;[2863] e1
                    ret                                     ;[2864] c9

                    dec     hl                              ;[2865] 2b
                    ld      b,$22                           ;[2866] 06 22
                    ld      d,b                             ;[2868] 50
                    push    hl                              ;[2869] e5
                    ld      c,$ff                           ;[286a] 0e ff
                    inc     hl                              ;[286c] 23
                    ld      a,(hl)                          ;[286d] 7e
                    inc     c                               ;[286e] 0c
                    or      a                               ;[286f] b7
                    jr      z,$2878                         ;[2870] 28 06
                    cp      d                               ;[2872] ba
                    jr      z,$2878                         ;[2873] 28 03
                    cp      b                               ;[2875] b8
                    jr      nz,$286c                        ;[2876] 20 f4
                    cp      $22                             ;[2878] fe 22
                    call    z,$1d78                         ;[287a] cc 78 1d
                    ex      (sp),hl                         ;[287d] e3
                    inc     hl                              ;[287e] 23
                    ex      de,hl                           ;[287f] eb
                    ld      a,c                             ;[2880] 79
                    call    $285a                           ;[2881] cd 5a 28
                    ld      de,$78d3                        ;[2884] 11 d3 78
                    ld      a,$d5                           ;[2887] 3e d5
                    ld      hl,($78b3)                      ;[2889] 2a b3 78
                    ld      ($7921),hl                      ;[288c] 22 21 79
                    ld      a,$03                           ;[288f] 3e 03
                    ld      ($78af),a                       ;[2891] 32 af 78
                    call    $09d3                           ;[2894] cd d3 09
                    ld      de,$78d6                        ;[2897] 11 d6 78
                    rst     $18                             ;[289a] df
                    ld      ($78b3),hl                      ;[289b] 22 b3 78
                    pop     hl                              ;[289e] e1
                    ld      a,(hl)                          ;[289f] 7e
                    ret     nz                              ;[28a0] c0
                    ld      e,$1e                           ;[28a1] 1e 1e
                    jp      $19a2                           ;[28a3] c3 a2 19
                    inc     hl                              ;[28a6] 23

;*************************************************************************
; MESSAGE OUTPUT SUBROUTINE
;A very useful subroutine can display a string of character codes as a message on the
;screen. The string of character codes must end with a zero byte. 
; WE: HL - adress of character string terminated with 0
; All registers are used by the subroutine.
SYS_STR_TO_DEVICE
                    call    $2865                           ;[28a7] cd 65 28
                    call    $29da                           ;[28aa] cd da 29
                    call    $09c4                           ;[28ad] cd c4 09
                    inc     d                               ;[28b0] 14
                    dec     d                               ;[28b1] 15
                    ret     z                               ;[28b2] c8
                    ld      a,(bc)                          ;[28b3] 0a
                    call    $032a                           ;[28b4] cd 2a 03
                    cp      $0d                             ;[28b7] fe 0d
                    call    z,$2103                         ;[28b9] cc 03 21
                    inc     bc                              ;[28bc] 03
                    jr      $28b1                           ;[28bd] 18 f2
                    or      a                               ;[28bf] b7
                    ld      c,$f1                           ;[28c0] 0e f1
                    push    af                              ;[28c2] f5
                    ld      hl,($78a0)                      ;[28c3] 2a a0 78
                    ex      de,hl                           ;[28c6] eb
                    ld      hl,($78d6)                      ;[28c7] 2a d6 78
                    cpl                                     ;[28ca] 2f
                    ld      c,a                             ;[28cb] 4f
                    ld      b,$ff                           ;[28cc] 06 ff
                    add     hl,bc                           ;[28ce] 09
                    inc     hl                              ;[28cf] 23
                    rst     $18                             ;[28d0] df
                    jr      c,$28da                         ;[28d1] 38 07
                    ld      ($78d6),hl                      ;[28d3] 22 d6 78
                    inc     hl                              ;[28d6] 23
                    ex      de,hl                           ;[28d7] eb
                    pop     af                              ;[28d8] f1
                    ret                                     ;[28d9] c9

                    pop     af                              ;[28da] f1
                    ld      e,$1a                           ;[28db] 1e 1a
                    jp      z,$19a2                         ;[28dd] ca a2 19
                    cp      a                               ;[28e0] bf
                    push    af                              ;[28e1] f5
                    ld      bc,$28c1                        ;[28e2] 01 c1 28
                    push    bc                              ;[28e5] c5
                    ld      hl,($78b1)                      ;[28e6] 2a b1 78
                    ld      ($78d6),hl                      ;[28e9] 22 d6 78
                    ld      hl,$0000                        ;[28ec] 21 00 00
                    push    hl                              ;[28ef] e5
                    ld      hl,($78a0)                      ;[28f0] 2a a0 78
                    push    hl                              ;[28f3] e5
                    ld      hl,$78b5                        ;[28f4] 21 b5 78
                    ex      de,hl                           ;[28f7] eb
                    ld      hl,($78b3)                      ;[28f8] 2a b3 78
                    ex      de,hl                           ;[28fb] eb
                    rst     $18                             ;[28fc] df
                    ld      bc,$28f7                        ;[28fd] 01 f7 28
                    jp      nz,$294a                        ;[2900] c2 4a 29
                    ld      hl,($78f9)                      ;[2903] 2a f9 78
                    ex      de,hl                           ;[2906] eb
                    ld      hl,($78fb)                      ;[2907] 2a fb 78
                    ex      de,hl                           ;[290a] eb
                    rst     $18                             ;[290b] df
                    jr      z,$2921                         ;[290c] 28 13
                    ld      a,(hl)                          ;[290e] 7e
                    inc     hl                              ;[290f] 23
                    inc     hl                              ;[2910] 23
                    inc     hl                              ;[2911] 23
                    cp      $03                             ;[2912] fe 03
                    jr      nz,$291a                        ;[2914] 20 04
                    call    $294b                           ;[2916] cd 4b 29
                    xor     a                               ;[2919] af
                    ld      e,a                             ;[291a] 5f
                    ld      d,$00                           ;[291b] 16 00
                    add     hl,de                           ;[291d] 19
                    jr      $2906                           ;[291e] 18 e6
                    pop     bc                              ;[2920] c1
                    ex      de,hl                           ;[2921] eb
                    ld      hl,($78fd)                      ;[2922] 2a fd 78
                    ex      de,hl                           ;[2925] eb
                    rst     $18                             ;[2926] df
                    jp      z,$296b                         ;[2927] ca 6b 29
                    ld      a,(hl)                          ;[292a] 7e
                    inc     hl                              ;[292b] 23
                    call    $09c2                           ;[292c] cd c2 09
                    push    hl                              ;[292f] e5
                    add     hl,bc                           ;[2930] 09
                    cp      $03                             ;[2931] fe 03
                    jr      nz,$2920                        ;[2933] 20 eb
                    ld      ($78d8),hl                      ;[2935] 22 d8 78
                    pop     hl                              ;[2938] e1
                    ld      c,(hl)                          ;[2939] 4e
                    ld      b,$00                           ;[293a] 06 00
                    add     hl,bc                           ;[293c] 09
                    add     hl,bc                           ;[293d] 09
                    inc     hl                              ;[293e] 23
                    ex      de,hl                           ;[293f] eb
                    ld      hl,($78d8)                      ;[2940] 2a d8 78
                    ex      de,hl                           ;[2943] eb
                    rst     $18                             ;[2944] df
                    jr      z,$2921                         ;[2945] 28 da
                    ld      bc,$293f                        ;[2947] 01 3f 29
                    push    bc                              ;[294a] c5
                    xor     a                               ;[294b] af
                    or      (hl)                            ;[294c] b6
                    inc     hl                              ;[294d] 23
                    ld      e,(hl)                          ;[294e] 5e
                    inc     hl                              ;[294f] 23
                    ld      d,(hl)                          ;[2950] 56
                    inc     hl                              ;[2951] 23
                    ret     z                               ;[2952] c8
                    ld      b,h                             ;[2953] 44
                    ld      c,l                             ;[2954] 4d
                    ld      hl,($78d6)                      ;[2955] 2a d6 78
                    rst     $18                             ;[2958] df
                    ld      h,b                             ;[2959] 60
                    ld      l,c                             ;[295a] 69
                    ret     c                               ;[295b] d8
                    pop     hl                              ;[295c] e1
                    ex      (sp),hl                         ;[295d] e3
                    rst     $18                             ;[295e] df
                    ex      (sp),hl                         ;[295f] e3
                    push    hl                              ;[2960] e5
                    ld      h,b                             ;[2961] 60
                    ld      l,c                             ;[2962] 69
                    ret     nc                              ;[2963] d0
                    pop     bc                              ;[2964] c1
                    pop     af                              ;[2965] f1
                    pop     af                              ;[2966] f1
                    push    hl                              ;[2967] e5
                    push    de                              ;[2968] d5
                    push    bc                              ;[2969] c5
                    ret                                     ;[296a] c9

                    pop     de                              ;[296b] d1
                    pop     hl                              ;[296c] e1
                    ld      a,l                             ;[296d] 7d
                    or      h                               ;[296e] b4
                    ret     z                               ;[296f] c8
                    dec     hl                              ;[2970] 2b
                    ld      b,(hl)                          ;[2971] 46
                    dec     hl                              ;[2972] 2b
                    ld      c,(hl)                          ;[2973] 4e
                    push    hl                              ;[2974] e5
                    dec     hl                              ;[2975] 2b
                    ld      l,(hl)                          ;[2976] 6e
                    ld      h,$00                           ;[2977] 26 00
                    add     hl,bc                           ;[2979] 09
                    ld      d,b                             ;[297a] 50
                    ld      e,c                             ;[297b] 59
                    dec     hl                              ;[297c] 2b
                    ld      b,h                             ;[297d] 44
                    ld      c,l                             ;[297e] 4d
                    ld      hl,($78d6)                      ;[297f] 2a d6 78
                    call    $1958                           ;[2982] cd 58 19
                    pop     hl                              ;[2985] e1
                    ld      (hl),c                          ;[2986] 71
                    inc     hl                              ;[2987] 23
                    ld      (hl),b                          ;[2988] 70
                    ld      l,c                             ;[2989] 69
                    ld      h,b                             ;[298a] 60
                    dec     hl                              ;[298b] 2b
                    jp      $28e9                           ;[298c] c3 e9 28
                    push    bc                              ;[298f] c5
                    push    hl                              ;[2990] e5
                    ld      hl,($7921)                      ;[2991] 2a 21 79
                    ex      (sp),hl                         ;[2994] e3
                    call    $249f                           ;[2995] cd 9f 24
                    ex      (sp),hl                         ;[2998] e3
                    call    $0af4                           ;[2999] cd f4 0a
                    ld      a,(hl)                          ;[299c] 7e
                    push    hl                              ;[299d] e5
                    ld      hl,($7921)                      ;[299e] 2a 21 79
                    push    hl                              ;[29a1] e5
                    add     (hl)                            ;[29a2] 86
                    ld      e,$1c                           ;[29a3] 1e 1c
                    jp      c,$19a2                         ;[29a5] da a2 19
                    call    $2857                           ;[29a8] cd 57 28
                    pop     de                              ;[29ab] d1
                    call    $29de                           ;[29ac] cd de 29
                    ex      (sp),hl                         ;[29af] e3
                    call    $29dd                           ;[29b0] cd dd 29
                    push    hl                              ;[29b3] e5
                    ld      hl,($78d4)                      ;[29b4] 2a d4 78
                    ex      de,hl                           ;[29b7] eb
                    call    $29c6                           ;[29b8] cd c6 29
                    call    $29c6                           ;[29bb] cd c6 29
                    ld      hl,$2349                        ;[29be] 21 49 23
                    ex      (sp),hl                         ;[29c1] e3
                    push    hl                              ;[29c2] e5
                    jp      $2884                           ;[29c3] c3 84 28
                    pop     hl                              ;[29c6] e1
                    ex      (sp),hl                         ;[29c7] e3
                    ld      a,(hl)                          ;[29c8] 7e
                    inc     hl                              ;[29c9] 23
                    ld      c,(hl)                          ;[29ca] 4e
                    inc     hl                              ;[29cb] 23
                    ld      b,(hl)                          ;[29cc] 46
                    ld      l,a                             ;[29cd] 6f
                    inc     l                               ;[29ce] 2c
                    dec     l                               ;[29cf] 2d
                    ret     z                               ;[29d0] c8
                    ld      a,(bc)                          ;[29d1] 0a
                    ld      (de),a                          ;[29d2] 12
                    inc     bc                              ;[29d3] 03
                    inc     de                              ;[29d4] 13
                    jr      $29cf                           ;[29d5] 18 f8
                    call    $0af4                           ;[29d7] cd f4 0a
                    ld      hl,($7921)                      ;[29da] 2a 21 79
                    ex      de,hl                           ;[29dd] eb
                    call    $29f5                           ;[29de] cd f5 29
                    ex      de,hl                           ;[29e1] eb
                    ret     nz                              ;[29e2] c0
                    push    de                              ;[29e3] d5
                    ld      d,b                             ;[29e4] 50
                    ld      e,c                             ;[29e5] 59
                    dec     de                              ;[29e6] 1b
                    ld      c,(hl)                          ;[29e7] 4e
                    ld      hl,($78d6)                      ;[29e8] 2a d6 78
                    rst     $18                             ;[29eb] df
                    jr      nz,$29f3                        ;[29ec] 20 05
                    ld      b,a                             ;[29ee] 47
                    add     hl,bc                           ;[29ef] 09
                    ld      ($78d6),hl                      ;[29f0] 22 d6 78
                    pop     hl                              ;[29f3] e1
                    ret                                     ;[29f4] c9

                    ld      hl,($78b3)                      ;[29f5] 2a b3 78
                    dec     hl                              ;[29f8] 2b
                    ld      b,(hl)                          ;[29f9] 46
                    dec     hl                              ;[29fa] 2b
                    ld      c,(hl)                          ;[29fb] 4e
                    dec     hl                              ;[29fc] 2b
                    rst     $18                             ;[29fd] df
                    ret     nz                              ;[29fe] c0
                    ld      ($78b3),hl                      ;[29ff] 22 b3 78
                    ret                                     ;[2a02] c9


;*********************************************************************************************************************
; LEN
;BAS_CODE_LEN        equ     $f3
BAS_PROC_LEN:
                    ld      bc,$27f8                        ;[2a03] 01 f8 27
                    push    bc                              ;[2a06] c5
                    call    $29d7                           ;[2a07] cd d7 29
                    xor     a                               ;[2a0a] af
                    ld      d,a                             ;[2a0b] 57
                    ld      a,(hl)                          ;[2a0c] 7e
                    or      a                               ;[2a0d] b7
                    ret                                     ;[2a0e] c9


;*********************************************************************************************************************
; ASC
;BAS_CODE_ASC        equ     $f6
BAS_PROC_ASC:
                    ld      bc,$27f8                        ;[2a0f] 01 f8 27
                    push    bc                              ;[2a12] c5
                    call    $2a07                           ;[2a13] cd 07 2a
                    jp      z,$1e4a                         ;[2a16] ca 4a 1e
                    inc     hl                              ;[2a19] 23
                    ld      e,(hl)                          ;[2a1a] 5e
                    inc     hl                              ;[2a1b] 23
                    ld      d,(hl)                          ;[2a1c] 56
                    ld      a,(de)                          ;[2a1d] 1a
                    ret                                     ;[2a1e] c9


;*********************************************************************************************************************
; CHR$
;BAS_CODE_CHR        equ     $f7
BAS_PROC_CHR:
                    ld      a,$01                           ;[2a1f] 3e 01
                    call    $2857                           ;[2a21] cd 57 28
                    call    $2b1f                           ;[2a24] cd 1f 2b
                    ld      hl,($78d4)                      ;[2a27] 2a d4 78
                    ld      (hl),e                          ;[2a2a] 73
                    pop     bc                              ;[2a2b] c1
                    jp      $2884                           ;[2a2c] c3 84 28
                    rst     $10                             ;[2a2f] d7
                    rst     $08                             ;[2a30] cf
                    jr      z,$2a00                         ;[2a31] 28 cd
                    inc     e                               ;[2a33] 1c
                    dec     hl                              ;[2a34] 2b
                    push    de                              ;[2a35] d5
                    rst     $08                             ;[2a36] cf
                    inc     l                               ;[2a37] 2c
                    call    $2337                           ;[2a38] cd 37 23
                    rst     $08                             ;[2a3b] cf
                    add     hl,hl                           ;[2a3c] 29
                    ex      (sp),hl                         ;[2a3d] e3
                    push    hl                              ;[2a3e] e5
                    rst     $20                             ;[2a3f] e7
                    jr      z,$2a47                         ;[2a40] 28 05
                    call    $2b1f                           ;[2a42] cd 1f 2b
                    jr      $2a4a                           ;[2a45] 18 03
                    call    $2a13                           ;[2a47] cd 13 2a
                    pop     de                              ;[2a4a] d1
                    push    af                              ;[2a4b] f5
                    push    af                              ;[2a4c] f5
                    ld      a,e                             ;[2a4d] 7b
                    call    $2857                           ;[2a4e] cd 57 28
                    ld      e,a                             ;[2a51] 5f
                    pop     af                              ;[2a52] f1
                    inc     e                               ;[2a53] 1c
                    dec     e                               ;[2a54] 1d
                    jr      z,$2a2b                         ;[2a55] 28 d4
                    ld      hl,($78d4)                      ;[2a57] 2a d4 78
                    ld      (hl),a                          ;[2a5a] 77
                    inc     hl                              ;[2a5b] 23
                    dec     e                               ;[2a5c] 1d
                    jr      nz,$2a5a                        ;[2a5d] 20 fb
                    jr      $2a2b                           ;[2a5f] 18 ca


;*********************************************************************************************************************
; LEFT$
;BAS_CODE_LEFT        equ     $f8
BAS_PROC_LEFT:
                    call    $2adf                           ;[2a61] cd df 2a
                    xor     a                               ;[2a64] af
                    ex      (sp),hl                         ;[2a65] e3
                    ld      c,a                             ;[2a66] 4f
                    ld      a,$e5                           ;[2a67] 3e e5
                    push    hl                              ;[2a69] e5
                    ld      a,(hl)                          ;[2a6a] 7e
                    cp      b                               ;[2a6b] b8
                    jr      c,$2a70                         ;[2a6c] 38 02
                    ld      a,b                             ;[2a6e] 78
                    ld      de,$000e                        ;[2a6f] 11 0e 00
                    push    bc                              ;[2a72] c5
                    call    $28bf                           ;[2a73] cd bf 28
                    pop     bc                              ;[2a76] c1
                    pop     hl                              ;[2a77] e1
                    push    hl                              ;[2a78] e5
                    inc     hl                              ;[2a79] 23
                    ld      b,(hl)                          ;[2a7a] 46
                    inc     hl                              ;[2a7b] 23
                    ld      h,(hl)                          ;[2a7c] 66
                    ld      l,b                             ;[2a7d] 68
                    ld      b,$00                           ;[2a7e] 06 00
                    add     hl,bc                           ;[2a80] 09
                    ld      b,h                             ;[2a81] 44
                    ld      c,l                             ;[2a82] 4d
                    call    $285a                           ;[2a83] cd 5a 28
                    ld      l,a                             ;[2a86] 6f
                    call    $29ce                           ;[2a87] cd ce 29
                    pop     de                              ;[2a8a] d1
                    call    $29de                           ;[2a8b] cd de 29
                    jp      $2884                           ;[2a8e] c3 84 28


;*********************************************************************************************************************
; RIGHT$
;BAS_CODE_RIGHT        equ     $f9
BAS_PROC_RIGHT:
                    call    $2adf                           ;[2a91] cd df 2a
                    pop     de                              ;[2a94] d1
                    push    de                              ;[2a95] d5
                    ld      a,(de)                          ;[2a96] 1a
                    sub     b                               ;[2a97] 90
                    jr      $2a65                           ;[2a98] 18 cb


;*********************************************************************************************************************
; MID$
;BAS_CODE_MID        equ     $fa
BAS_PROC_MID:
                    ex      de,hl                           ;[2a9a] eb
                    ld      a,(hl)                          ;[2a9b] 7e
                    call    $2ae2                           ;[2a9c] cd e2 2a
                    inc     b                               ;[2a9f] 04
                    dec     b                               ;[2aa0] 05
                    jp      z,$1e4a                         ;[2aa1] ca 4a 1e
                    push    bc                              ;[2aa4] c5
                    ld      e,$ff                           ;[2aa5] 1e ff
                    cp      $29                             ;[2aa7] fe 29
                    jr      z,$2ab0                         ;[2aa9] 28 05
                    rst     $08                             ;[2aab] cf
                    inc     l                               ;[2aac] 2c
                    call    $2b1c                           ;[2aad] cd 1c 2b
                    rst     $08                             ;[2ab0] cf
                    add     hl,hl                           ;[2ab1] 29
                    pop     af                              ;[2ab2] f1
                    ex      (sp),hl                         ;[2ab3] e3
                    ld      bc,$2a69                        ;[2ab4] 01 69 2a
                    push    bc                              ;[2ab7] c5
                    dec     a                               ;[2ab8] 3d
                    cp      (hl)                            ;[2ab9] be
                    ld      b,$00                           ;[2aba] 06 00
                    ret     nc                              ;[2abc] d0
                    ld      c,a                             ;[2abd] 4f
                    ld      a,(hl)                          ;[2abe] 7e
                    sub     c                               ;[2abf] 91
                    cp      e                               ;[2ac0] bb
                    ld      b,a                             ;[2ac1] 47
                    ret     c                               ;[2ac2] d8
                    ld      b,e                             ;[2ac3] 43
                    ret                                     ;[2ac4] c9

;*********************************************************************************************************************
; VAL
;BAS_CODE_VAL        equ     $f5
BAS_PROC_VAL:
                    call    $2a07                           ;[2ac5] cd 07 2a
                    jp      z,$27f8                         ;[2ac8] ca f8 27
                    ld      e,a                             ;[2acb] 5f
                    inc     hl                              ;[2acc] 23
                    ld      a,(hl)                          ;[2acd] 7e
                    inc     hl                              ;[2ace] 23
                    ld      h,(hl)                          ;[2acf] 66
                    ld      l,a                             ;[2ad0] 6f
                    push    hl                              ;[2ad1] e5
                    add     hl,de                           ;[2ad2] 19
                    ld      b,(hl)                          ;[2ad3] 46
                    ld      (hl),d                          ;[2ad4] 72
                    ex      (sp),hl                         ;[2ad5] e3
                    push    bc                              ;[2ad6] c5
                    ld      a,(hl)                          ;[2ad7] 7e
                    call    $0e65                           ;[2ad8] cd 65 0e
                    pop     bc                              ;[2adb] c1
                    pop     hl                              ;[2adc] e1
                    ld      (hl),b                          ;[2add] 70
                    ret                                     ;[2ade] c9

                    ex      de,hl                           ;[2adf] eb
                    rst     $08                             ;[2ae0] cf
                    add     hl,hl                           ;[2ae1] 29
                    pop     bc                              ;[2ae2] c1
                    pop     de                              ;[2ae3] d1
                    push    bc                              ;[2ae4] c5
                    ld      b,e                             ;[2ae5] 43
                    ret                                     ;[2ae6] c9

                    cp      $7a                             ;[2ae7] fe 7a
                    jp      nz,$1997                        ;[2ae9] c2 97 19
                    jp      $79d9                           ;[2aec] c3 d9 79


;*********************************************************************************************************************
; INP
;BAS_CODE_INP        equ     $db
BAS_PROC_INP:
                    call    $2b1f                           ;[2aef] cd 1f 2b
                    ld      ($7894),a                       ;[2af2] 32 94 78
                    call    $7893                           ;[2af5] cd 93 78
                    jp      $27f8                           ;[2af8] c3 f8 27


;*********************************************************************************************************************
; OUT
;BAS_CODE_OUT          equ     $a0
BAS_PROC_OUT:
                    call    $2b0e                           ;[2afb] cd 0e 2b
                    jp      $7896                           ;[2afe] c3 96 78



                    rst     $10                             ;[2b01] d7
                    call    $2337                           ;[2b02] cd 37 23
                    push    hl                              ;[2b05] e5
                    call    MATH_ISD_CINT_ACC                           ;[2b06] cd 7f 0a
                    ex      de,hl                           ;[2b09] eb
                    pop     hl                              ;[2b0a] e1
                    ld      a,d                             ;[2b0b] 7a
                    or      a                               ;[2b0c] b7
                    ret                                     ;[2b0d] c9

                    call    $2b1c                           ;[2b0e] cd 1c 2b
                    ld      ($7894),a                       ;[2b11] 32 94 78
                    ld      ($7897),a                       ;[2b14] 32 97 78
                    rst     $08                             ;[2b17] cf
                    inc     l                               ;[2b18] 2c
                    jr      $2b1c                           ;[2b19] 18 01


;INT ASCII into A register
;Load HL with the integer ASCII value.
;   LD HL,value-1
;   CALL 2B1Bh
;value DEFM '31'
;A should now contain 31 decimal.
SYS_INT_ASCII_TO_A
                    rst     $10                             ;[2b1b] d7
                    call    $2337                           ;[2b1c] cd 37 23
                    call    $2b05                           ;[2b1f] cd 05 2b
                    jp      nz,$1e4a                        ;[2b22] c2 4a 1e
                    dec     hl                              ;[2b25] 2b
                    rst     $10                             ;[2b26] d7
                    ld      a,e                             ;[2b27] 7b
                    ret                                     ;[2b28] c9


;*********************************************************************************************************************
; LLIST
;BAS_CODE_LLIST          equ     $b5
BAS_PROC_LLIST:
                    ld      a,$01                           ;[2b29] 3e 01
                    ld      ($789c),a                       ;[2b2b] 32 9c 78

;*********************************************************************************************************************
; LIST
;BAS_CODE_LIST          equ     $b4
BAS_PROC_LIST:
                    pop     bc                              ;[2b2e] c1
                    call    $1b10                           ;[2b2f] cd 10 1b
                    push    bc                              ;[2b32] c5
                    call    $3b25                           ;[2b33] cd 25 3b
                    ld      ($78a2),hl                      ;[2b36] 22 a2 78
                    pop     hl                              ;[2b39] e1
                    pop     de                              ;[2b3a] d1
                    ld      c,(hl)                          ;[2b3b] 4e
                    inc     hl                              ;[2b3c] 23
                    ld      b,(hl)                          ;[2b3d] 46
                    inc     hl                              ;[2b3e] 23
                    ld      a,b                             ;[2b3f] 78
                    or      c                               ;[2b40] b1
                    jp      z,$1a19                         ;[2b41] ca 19 1a
                    call    $79df                           ;[2b44] cd df 79
                    call    $1d9b                           ;[2b47] cd 9b 1d
                    push    bc                              ;[2b4a] c5
                    ld      c,(hl)                          ;[2b4b] 4e
                    inc     hl                              ;[2b4c] 23
                    ld      b,(hl)                          ;[2b4d] 46
                    inc     hl                              ;[2b4e] 23
                    push    bc                              ;[2b4f] c5
                    ex      (sp),hl                         ;[2b50] e3
                    ex      de,hl                           ;[2b51] eb
                    rst     $18                             ;[2b52] df
                    pop     bc                              ;[2b53] c1
                    jp      c,$1a18                         ;[2b54] da 18 1a
                    ex      (sp),hl                         ;[2b57] e3
                    push    hl                              ;[2b58] e5
                    push    bc                              ;[2b59] c5
                    ex      de,hl                           ;[2b5a] eb
                    ld      ($78ec),hl                      ;[2b5b] 22 ec 78
                    call    SYS_DISPLAY_HL                           ;[2b5e] cd af 0f
                    ld      a,$20                           ;[2b61] 3e 20
                    pop     hl                              ;[2b63] e1
                    call    $032a                           ;[2b64] cd 2a 03
                    call    $2b7e                           ;[2b67] cd 7e 2b
                    ld      hl,($78a7)                      ;[2b6a] 2a a7 78
                    call    $2b75                           ;[2b6d] cd 75 2b
                    call    $20fe                           ;[2b70] cd fe 20
                    jr      $2b33                           ;[2b73] 18 be

;OUTPUT STRING TO CURRENT DEVICE
;HL points to start of string (null terminated). Store Device Type in 789Ch. 0 = Video 1 = Printer 255 (-1) = Cassette
;       LD A,00h        ; 0 - VIdeo Device
;       LD (789Ch),A    ; set it
;       LD HL,mesg      ; message adress
;       CALL 2B75h      ; execute
;mesg   DEFM 'BEWARE OF THE LEOPARD'
;       DEFB 00h
SYS_OUTPUT_MSG_TO_DEVICE
                    ld      a,(hl)                          ;[2b75] 7e
                    or      a                               ;[2b76] b7
                    ret     z                               ;[2b77] c8
                    call    $032a                           ;[2b78] cd 2a 03
                    inc     hl                              ;[2b7b] 23
                    jr      $2b75                           ;[2b7c] 18 f7
                    push    hl                              ;[2b7e] e5
                    ld      hl,($78a7)                      ;[2b7f] 2a a7 78
                    ld      b,h                             ;[2b82] 44
                    ld      c,l                             ;[2b83] 4d
                    pop     hl                              ;[2b84] e1
                    ld      d,$ff                           ;[2b85] 16 ff
                    jr      $2b8c                           ;[2b87] 18 03
                    inc     bc                              ;[2b89] 03
                    dec     d                               ;[2b8a] 15
                    ret     z                               ;[2b8b] c8
                    ld      a,(hl)                          ;[2b8c] 7e
                    or      a                               ;[2b8d] b7
                    inc     hl                              ;[2b8e] 23
                    ld      (bc),a                          ;[2b8f] 02
                    ret     z                               ;[2b90] c8
                    jp      $2e9d                           ;[2b91] c3 9d 2e
                    cp      $fb                             ;[2b94] fe fb
                    jr      nz,$2ba0                        ;[2b96] 20 08
                    dec     bc                              ;[2b98] 0b
                    dec     bc                              ;[2b99] 0b
                    dec     bc                              ;[2b9a] 0b
                    dec     bc                              ;[2b9b] 0b
                    inc     d                               ;[2b9c] 14
                    inc     d                               ;[2b9d] 14
                    inc     d                               ;[2b9e] 14
                    inc     d                               ;[2b9f] 14
                    cp      $95                             ;[2ba0] fe 95
                    call    z,$0b24                         ;[2ba2] cc 24 0b
                    sub     $7f                             ;[2ba5] d6 7f
                    push    hl                              ;[2ba7] e5
                    ld      e,a                             ;[2ba8] 5f
                    ld      hl,TAB_BASIC_NAMES                        ;[2ba9] 21 50 16
                    ld      a,(hl)                          ;[2bac] 7e
                    or      a                               ;[2bad] b7
                    inc     hl                              ;[2bae] 23
                    jp      p,$2bac                         ;[2baf] f2 ac 2b
                    dec     e                               ;[2bb2] 1d
                    jr      nz,$2bac                        ;[2bb3] 20 f7
                    and     $7f                             ;[2bb5] e6 7f
                    ld      (bc),a                          ;[2bb7] 02
                    inc     bc                              ;[2bb8] 03
                    dec     d                               ;[2bb9] 15
                    jp      z,$28d8                         ;[2bba] ca d8 28
                    ld      a,(hl)                          ;[2bbd] 7e
                    inc     hl                              ;[2bbe] 23
                    or      a                               ;[2bbf] b7
                    jp      p,$2bb7                         ;[2bc0] f2 b7 2b
                    pop     hl                              ;[2bc3] e1
                    jr      $2b8c                           ;[2bc4] 18 c6



;*********************************************************************************************************************
; DELETE
;BAS_CODE_DELETE          equ     $b6
BAS_PROC_DELETE:
                    call    $1b10                           ;[2bc6] cd 10 1b
                    pop     de                              ;[2bc9] d1
                    push    bc                              ;[2bca] c5
                    push    bc                              ;[2bcb] c5
                    call    $1b2c                           ;[2bcc] cd 2c 1b
                    jr      nc,$2bd6                        ;[2bcf] 30 05
                    ld      d,h                             ;[2bd1] 54
                    ld      e,l                             ;[2bd2] 5d
                    ex      (sp),hl                         ;[2bd3] e3
                    push    hl                              ;[2bd4] e5
                    rst     $18                             ;[2bd5] df
                    jp      nc,$1e4a                        ;[2bd6] d2 4a 1e
                    ld      hl,$1929                        ;[2bd9] 21 29 19
                    call    SYS_STR_TO_DEVICE                           ;[2bdc] cd a7 28
                    pop     bc                              ;[2bdf] c1
                    ld      hl,$1ae8                        ;[2be0] 21 e8 1a
                    ex      (sp),hl                         ;[2be3] e3
                    ex      de,hl                           ;[2be4] eb
                    ld      hl,($78f9)                      ;[2be5] 2a f9 78
                    ld      a,(de)                          ;[2be8] 1a
                    ld      (bc),a                          ;[2be9] 02
                    inc     bc                              ;[2bea] 03
                    inc     de                              ;[2beb] 13
                    rst     $18                             ;[2bec] df
                    jr      nz,$2be8                        ;[2bed] 20 f9
                    ld      h,b                             ;[2bef] 60
                    ld      l,c                             ;[2bf0] 69
                    ld      ($78f9),hl                      ;[2bf1] 22 f9 78
                    ret                                     ;[2bf4] c9

;*********************************************************************************************************************
; SOUND
;BAS_CODE_SOUND          equ     $9e
;BASIC SOUND NOTES
;Set up a BASIC STATEMENT emulation of the Freq,Dur as you would with a BASIC SOUND command.
;Remember, if you use any illegal values (ie note <1 or >31 OR duration <1 or >9) you will get a "Function Code" error.
;       LD HL,notes
;       CALL 2BF5h
;notes  DEFM "20,5;30,2;30,2;1,3;1,3"
;       DEFB 00h
BAS_PROC_SOUND:
                    call    $2b1c                           ;[2bf5] cd 1c 2b
                    cp      $20                             ;[2bf8] fe 20
                    jp      nc,$1e4a                        ;[2bfa] d2 4a 1e
                    ld      ($7ad2),a                       ;[2bfd] 32 d2 7a
                    rst     $08                             ;[2c00] cf
                    inc     l                               ;[2c01] 2c
                    call    $2b1c                           ;[2c02] cd 1c 2b

;BASIC SOUND freq,dur
;Put the Frequency into 7AD2h and the Duration into A.
;       LD A,freq
;       LD (7AD2h),A
;       LD A,dur
;       LD HL,zero
;       CALL 2C05h
;zero   DEFB 00h
BAS_FUNC_SOUND
                    or      a                               ;[2c05] b7
                    jp      z,$1e4a                         ;[2c06] ca 4a 1e
                    cp      $0a                             ;[2c09] fe 0a
                    jp      nc,$1e4a                        ;[2c0b] d2 4a 1e
                    di                                      ;[2c0e] f3
                    push    hl                              ;[2c0f] e5
                    dec     a                               ;[2c10] 3d
                    push    af                              ;[2c11] f5
                    ld      a,($7ad2)                       ;[2c12] 3a d2 7a
                    or      a                               ;[2c15] b7
                    jr      z,$2c58                         ;[2c16] 28 40
                    dec     a                               ;[2c18] 3d
                    sla     a                               ;[2c19] cb 27
                    ld      c,a                             ;[2c1b] 4f
                    xor     a                               ;[2c1c] af
                    ld      b,a                             ;[2c1d] 47
                    pop     af                              ;[2c1e] f1
                    ld      hl,$02cf                        ;[2c1f] 21 cf 02
                    add     hl,bc                           ;[2c22] 09
                    ld      e,(hl)                          ;[2c23] 5e
                    inc     hl                              ;[2c24] 23
                    ld      d,(hl)                          ;[2c25] 56
                    push    de                              ;[2c26] d5
                    ld      hl,$0361                        ;[2c27] 21 61 03
                    srl     c                               ;[2c2a] cb 39
                    add     hl,bc                           ;[2c2c] 09
                    ld      e,(hl)                          ;[2c2d] 5e
                    ld      d,$00                           ;[2c2e] 16 00
                    ld      hl,$0321                        ;[2c30] 21 21 03
                    ld      c,a                             ;[2c33] 4f
                    add     hl,bc                           ;[2c34] 09
                    ld      b,(hl)                          ;[2c35] 46
                    push    de                              ;[2c36] d5
                    pop     hl                              ;[2c37] e1
                    add     hl,de                           ;[2c38] 19
                    djnz    $2c38                           ;[2c39] 10 fd
                    push    hl                              ;[2c3b] e5
                    pop     bc                              ;[2c3c] c1
                    pop     hl                              ;[2c3d] e1
                    call    $3af8                           ;[2c3e] cd f8 3a
                    ld      a,($783b)                       ;[2c41] 3a 3b 78
                    ld      d,a                             ;[2c44] 57
                    call    $3469                           ;[2c45] cd 69 34
                    dec     bc                              ;[2c48] 0b
                    ld      a,c                             ;[2c49] 79
                    or      b                               ;[2c4a] b0
                    jr      nz,$2c3e                        ;[2c4b] 20 f1
                    pop     hl                              ;[2c4d] e1
                    ei                                      ;[2c4e] fb
                    ld      a,(hl)                          ;[2c4f] 7e
                    inc     hl                              ;[2c50] 23
                    cp      $3b                             ;[2c51] fe 3b
                    jp      z,BAS_PROC_SOUND                         ;[2c53] ca f5 2b
                    dec     hl                              ;[2c56] 2b
                    ret                                     ;[2c57] c9

                    pop     af                              ;[2c58] f1
                    ld      c,a                             ;[2c59] 4f
                    xor     a                               ;[2c5a] af
                    ld      b,a                             ;[2c5b] 47
                    ld      hl,$0321                        ;[2c5c] 21 21 03
                    add     hl,bc                           ;[2c5f] 09
                    ld      b,(hl)                          ;[2c60] 46
                    ld      hl,$1936                        ;[2c61] 21 36 19
                    push    hl                              ;[2c64] e5
                    pop     de                              ;[2c65] d1
                    add     hl,de                           ;[2c66] 19
                    djnz    $2c66                           ;[2c67] 10 fd
                    call    $3af8                           ;[2c69] cd f8 3a
                    dec     hl                              ;[2c6c] 2b
                    ld      a,l                             ;[2c6d] 7d
                    or      h                               ;[2c6e] b4
                    jr      nz,$2c69                        ;[2c6f] 20 f8
                    jr      $2c4d                           ;[2c71] 18 da
                    push    bc                              ;[2c73] c5
                    ld      b,a                             ;[2c74] 47
                    ld      a,$08                           ;[2c75] 3e 08
                    call    $3aba                           ;[2c77] cd ba 3a
                    ld      a,b                             ;[2c7a] 78
                    and     $0f                             ;[2c7b] e6 0f
                    push    hl                              ;[2c7d] e5
                    sla     a                               ;[2c7e] cb 27
                    ld      c,a                             ;[2c80] 4f
                    xor     a                               ;[2c81] af
                    ld      b,a                             ;[2c82] 47
                    ld      hl,$02af                        ;[2c83] 21 af 02
                    add     hl,bc                           ;[2c86] 09
                    ld      a,(hl)                          ;[2c87] 7e
                    ld      b,a                             ;[2c88] 47
                    inc     hl                              ;[2c89] 23
                    ld      a,(hl)                          ;[2c8a] 7e
                    ld      c,a                             ;[2c8b] 4f
                    ld      a,b                             ;[2c8c] 78
                    call    $3aba                           ;[2c8d] cd ba 3a
                    call    $3aba                           ;[2c90] cd ba 3a
                    call    $3aba                           ;[2c93] cd ba 3a
                    ld      a,c                             ;[2c96] 79
                    call    $3aba                           ;[2c97] cd ba 3a
                    call    $3aba                           ;[2c9a] cd ba 3a
                    call    $3aba                           ;[2c9d] cd ba 3a
                    pop     hl                              ;[2ca0] e1
                    pop     bc                              ;[2ca1] c1
                    ld      a,$0f                           ;[2ca2] 3e 0f
                    call    $3aba                           ;[2ca4] cd ba 3a
                    ret                                     ;[2ca7] c9

                    jr      nc,$2c47                        ;[2ca8] 30 9d

;*********************************************************************************************************************
; PEEK
;BAS_CODE_PEEK        equ     $e5
BAS_PROC_PEEK:
                    call    MATH_ISD_CINT_ACC                           ;[2caa] cd 7f 0a
                    ld      a,(hl)                          ;[2cad] 7e
                    jp      $27f8                           ;[2cae] c3 f8 27


;*********************************************************************************************************************
; POKE
;BAS_CODE_POKE          equ     $b1
BAS_PROC_POKE:
                    call    $2b02                           ;[2cb1] cd 02 2b
                    push    de                              ;[2cb4] d5
                    rst     $08                             ;[2cb5] cf
                    inc     l                               ;[2cb6] 2c
                    call    $2b1c                           ;[2cb7] cd 1c 2b
                    pop     de                              ;[2cba] d1
                    ld      (de),a                          ;[2cbb] 12
                    ret                                     ;[2cbc] c9

                    call    $2338                           ;[2cbd] cd 38 23
                    call    $0af4                           ;[2cc0] cd f4 0a
                    rst     $08                             ;[2cc3] cf
                    dec     sp                              ;[2cc4] 3b
                    ex      de,hl                           ;[2cc5] eb
                    ld      hl,($7921)                      ;[2cc6] 2a 21 79
                    jr      $2cd3                           ;[2cc9] 18 08
                    ld      a,($78de)                       ;[2ccb] 3a de 78
                    or      a                               ;[2cce] b7
                    jr      z,$2cdd                         ;[2ccf] 28 0c
                    pop     de                              ;[2cd1] d1
                    ex      de,hl                           ;[2cd2] eb
                    push    hl                              ;[2cd3] e5
                    xor     a                               ;[2cd4] af
                    ld      ($78de),a                       ;[2cd5] 32 de 78
                    cp      d                               ;[2cd8] ba
                    push    af                              ;[2cd9] f5
                    push    de                              ;[2cda] d5
                    ld      b,(hl)                          ;[2cdb] 46
                    or      b                               ;[2cdc] b0
                    jp      z,$1e4a                         ;[2cdd] ca 4a 1e
                    inc     hl                              ;[2ce0] 23
                    ld      c,(hl)                          ;[2ce1] 4e
                    inc     hl                              ;[2ce2] 23
                    ld      h,(hl)                          ;[2ce3] 66
                    ld      l,c                             ;[2ce4] 69
                    jr      $2d03                           ;[2ce5] 18 1c
                    ld      e,b                             ;[2ce7] 58
                    push    hl                              ;[2ce8] e5
                    ld      c,$02                           ;[2ce9] 0e 02
                    ld      a,(hl)                          ;[2ceb] 7e
                    inc     hl                              ;[2cec] 23
                    cp      $25                             ;[2ced] fe 25
                    jp      z,$2e17                         ;[2cef] ca 17 2e
                    cp      $20                             ;[2cf2] fe 20
                    jr      nz,$2cf9                        ;[2cf4] 20 03
                    inc     c                               ;[2cf6] 0c
                    djnz    $2ceb                           ;[2cf7] 10 f2
                    pop     hl                              ;[2cf9] e1
                    ld      b,e                             ;[2cfa] 43
                    ld      a,$25                           ;[2cfb] 3e 25
                    call    $2e49                           ;[2cfd] cd 49 2e
                    call    $032a                           ;[2d00] cd 2a 03
                    xor     a                               ;[2d03] af
                    ld      e,a                             ;[2d04] 5f
                    ld      d,a                             ;[2d05] 57
                    call    $2e49                           ;[2d06] cd 49 2e
                    ld      d,a                             ;[2d09] 57
                    ld      a,(hl)                          ;[2d0a] 7e
                    inc     hl                              ;[2d0b] 23
                    cp      $21                             ;[2d0c] fe 21
                    jp      z,$2e14                         ;[2d0e] ca 14 2e
                    cp      $23                             ;[2d11] fe 23
                    jr      z,$2d4c                         ;[2d13] 28 37
                    dec     b                               ;[2d15] 05
                    jp      z,$2dfe                         ;[2d16] ca fe 2d
                    cp      $2b                             ;[2d19] fe 2b
                    ld      a,$08                           ;[2d1b] 3e 08
                    jr      z,$2d06                         ;[2d1d] 28 e7
                    dec     hl                              ;[2d1f] 2b
                    ld      a,(hl)                          ;[2d20] 7e
                    inc     hl                              ;[2d21] 23
                    cp      $2e                             ;[2d22] fe 2e
                    jr      z,$2d66                         ;[2d24] 28 40
                    cp      $25                             ;[2d26] fe 25
                    jr      z,$2ce7                         ;[2d28] 28 bd
                    cp      (hl)                            ;[2d2a] be
                    jr      nz,$2cfd                        ;[2d2b] 20 d0
                    cp      $24                             ;[2d2d] fe 24
                    jr      z,$2d45                         ;[2d2f] 28 14
                    cp      $2a                             ;[2d31] fe 2a
                    jr      nz,$2cfd                        ;[2d33] 20 c8
                    ld      a,b                             ;[2d35] 78
                    cp      $02                             ;[2d36] fe 02
                    inc     hl                              ;[2d38] 23
                    jr      c,$2d3e                         ;[2d39] 38 03
                    ld      a,(hl)                          ;[2d3b] 7e
                    cp      $24                             ;[2d3c] fe 24
                    ld      a,$20                           ;[2d3e] 3e 20
                    jr      nz,$2d49                        ;[2d40] 20 07
                    dec     b                               ;[2d42] 05
                    inc     e                               ;[2d43] 1c
                    cp      $af                             ;[2d44] fe af
                    add     $10                             ;[2d46] c6 10
                    inc     hl                              ;[2d48] 23
                    inc     e                               ;[2d49] 1c
                    add     d                               ;[2d4a] 82
                    ld      d,a                             ;[2d4b] 57
                    inc     e                               ;[2d4c] 1c
                    ld      c,$00                           ;[2d4d] 0e 00
                    dec     b                               ;[2d4f] 05
                    jr      z,$2d99                         ;[2d50] 28 47
                    ld      a,(hl)                          ;[2d52] 7e
                    inc     hl                              ;[2d53] 23
                    cp      $2e                             ;[2d54] fe 2e
                    jr      z,$2d70                         ;[2d56] 28 18
                    cp      $23                             ;[2d58] fe 23
                    jr      z,$2d4c                         ;[2d5a] 28 f0
                    cp      $2c                             ;[2d5c] fe 2c
                    jr      nz,$2d7a                        ;[2d5e] 20 1a
                    ld      a,d                             ;[2d60] 7a
                    or      $40                             ;[2d61] f6 40
                    ld      d,a                             ;[2d63] 57
                    jr      $2d4c                           ;[2d64] 18 e6
                    ld      a,(hl)                          ;[2d66] 7e
                    cp      $23                             ;[2d67] fe 23
                    ld      a,$2e                           ;[2d69] 3e 2e
                    jr      nz,$2cfd                        ;[2d6b] 20 90
                    ld      c,$01                           ;[2d6d] 0e 01
                    inc     hl                              ;[2d6f] 23
                    inc     c                               ;[2d70] 0c
                    dec     b                               ;[2d71] 05
                    jr      z,$2d99                         ;[2d72] 28 25
                    ld      a,(hl)                          ;[2d74] 7e
                    inc     hl                              ;[2d75] 23
                    cp      $23                             ;[2d76] fe 23
                    jr      z,$2d70                         ;[2d78] 28 f6
                    push    de                              ;[2d7a] d5
                    ld      de,$2d97                        ;[2d7b] 11 97 2d
                    push    de                              ;[2d7e] d5
                    ld      d,h                             ;[2d7f] 54
                    ld      e,l                             ;[2d80] 5d
                    cp      $5b                             ;[2d81] fe 5b
                    ret     nz                              ;[2d83] c0
                    cp      (hl)                            ;[2d84] be
                    ret     nz                              ;[2d85] c0
                    inc     hl                              ;[2d86] 23
                    cp      (hl)                            ;[2d87] be
                    ret     nz                              ;[2d88] c0
                    inc     hl                              ;[2d89] 23
                    cp      (hl)                            ;[2d8a] be
                    ret     nz                              ;[2d8b] c0
                    inc     hl                              ;[2d8c] 23
                    ld      a,b                             ;[2d8d] 78
                    sub     $04                             ;[2d8e] d6 04
                    ret     c                               ;[2d90] d8
                    pop     de                              ;[2d91] d1
                    pop     de                              ;[2d92] d1
                    ld      b,a                             ;[2d93] 47
                    inc     d                               ;[2d94] 14
                    inc     hl                              ;[2d95] 23
                    jp      z,$d1eb                         ;[2d96] ca eb d1
                    ld      a,d                             ;[2d99] 7a
                    dec     hl                              ;[2d9a] 2b
                    inc     e                               ;[2d9b] 1c
                    and     $08                             ;[2d9c] e6 08
                    jr      nz,$2db5                        ;[2d9e] 20 15
                    dec     e                               ;[2da0] 1d
                    ld      a,b                             ;[2da1] 78
                    or      a                               ;[2da2] b7
                    jr      z,$2db5                         ;[2da3] 28 10
                    ld      a,(hl)                          ;[2da5] 7e
                    sub     $2d                             ;[2da6] d6 2d
                    jr      z,$2db0                         ;[2da8] 28 06
                    cp      $fe                             ;[2daa] fe fe
                    jr      nz,$2db5                        ;[2dac] 20 07
                    ld      a,$08                           ;[2dae] 3e 08
                    add     $04                             ;[2db0] c6 04
                    add     d                               ;[2db2] 82
                    ld      d,a                             ;[2db3] 57
                    dec     b                               ;[2db4] 05
                    pop     hl                              ;[2db5] e1
                    pop     af                              ;[2db6] f1
                    jr      z,$2e09                         ;[2db7] 28 50
                    push    bc                              ;[2db9] c5
                    push    de                              ;[2dba] d5
                    call    $2337                           ;[2dbb] cd 37 23
                    pop     de                              ;[2dbe] d1
                    pop     bc                              ;[2dbf] c1
                    push    bc                              ;[2dc0] c5
                    push    hl                              ;[2dc1] e5
                    ld      b,e                             ;[2dc2] 43
                    ld      a,b                             ;[2dc3] 78
                    add     c                               ;[2dc4] 81
                    cp      $19                             ;[2dc5] fe 19
                    jp      nc,$1e4a                        ;[2dc7] d2 4a 1e
                    ld      a,d                             ;[2dca] 7a
                    or      $80                             ;[2dcb] f6 80
                    call    $0fbe                           ;[2dcd] cd be 0f
                    call    SYS_STR_TO_DEVICE                          ;[2dd0] cd a7 28
                    pop     hl                              ;[2dd3] e1
                    dec     hl                              ;[2dd4] 2b
                    rst     $10                             ;[2dd5] d7
                    scf                                     ;[2dd6] 37
                    jr      z,$2de6                         ;[2dd7] 28 0d
                    ld      ($78de),a                       ;[2dd9] 32 de 78
                    cp      $3b                             ;[2ddc] fe 3b
                    jr      z,$2de5                         ;[2dde] 28 05
                    cp      $2c                             ;[2de0] fe 2c
                    jp      nz,$1997                        ;[2de2] c2 97 19
                    rst     $10                             ;[2de5] d7
                    pop     bc                              ;[2de6] c1
                    ex      de,hl                           ;[2de7] eb
                    pop     hl                              ;[2de8] e1
                    push    hl                              ;[2de9] e5
                    push    af                              ;[2dea] f5
                    push    de                              ;[2deb] d5
                    ld      a,(hl)                          ;[2dec] 7e
                    sub     b                               ;[2ded] 90
                    inc     hl                              ;[2dee] 23
                    ld      c,(hl)                          ;[2def] 4e
                    inc     hl                              ;[2df0] 23
                    ld      h,(hl)                          ;[2df1] 66
                    ld      l,c                             ;[2df2] 69
                    ld      d,$00                           ;[2df3] 16 00
                    ld      e,a                             ;[2df5] 5f
                    add     hl,de                           ;[2df6] 19
                    ld      a,b                             ;[2df7] 78
                    or      a                               ;[2df8] b7
                    jp      nz,$2d03                        ;[2df9] c2 03 2d
                    jr      $2e04                           ;[2dfc] 18 06
                    call    $2e49                           ;[2dfe] cd 49 2e
                    call    $032a                           ;[2e01] cd 2a 03
                    pop     hl                              ;[2e04] e1
                    pop     af                              ;[2e05] f1
                    jp      nz,$2ccb                        ;[2e06] c2 cb 2c
                    call    c,$20fe                         ;[2e09] dc fe 20
                    ex      (sp),hl                         ;[2e0c] e3
                    call    $29dd                           ;[2e0d] cd dd 29
                    pop     hl                              ;[2e10] e1
                    jp      $2169                           ;[2e11] c3 69 21
                    ld      c,$01                           ;[2e14] 0e 01
                    ld      a,$f1                           ;[2e16] 3e f1
                    dec     b                               ;[2e18] 05
                    call    $2e49                           ;[2e19] cd 49 2e
                    pop     hl                              ;[2e1c] e1
                    pop     af                              ;[2e1d] f1
                    jr      z,$2e09                         ;[2e1e] 28 e9
                    push    bc                              ;[2e20] c5
                    call    $2337                           ;[2e21] cd 37 23
                    call    $0af4                           ;[2e24] cd f4 0a
                    pop     bc                              ;[2e27] c1
                    push    bc                              ;[2e28] c5
                    push    hl                              ;[2e29] e5
                    ld      hl,($7921)                      ;[2e2a] 2a 21 79
                    ld      b,c                             ;[2e2d] 41
                    ld      c,$00                           ;[2e2e] 0e 00
                    push    bc                              ;[2e30] c5
                    call    $2a68                           ;[2e31] cd 68 2a
                    call    $28aa                           ;[2e34] cd aa 28
                    ld      hl,($7921)                      ;[2e37] 2a 21 79
                    pop     af                              ;[2e3a] f1
                    sub     (hl)                            ;[2e3b] 96
                    ld      b,a                             ;[2e3c] 47
                    ld      a,$20                           ;[2e3d] 3e 20
                    inc     b                               ;[2e3f] 04
                    dec     b                               ;[2e40] 05
                    jp      z,$2dd3                         ;[2e41] ca d3 2d
                    call    $032a                           ;[2e44] cd 2a 03
                    jr      $2e40                           ;[2e47] 18 f7
                    push    af                              ;[2e49] f5
                    ld      a,d                             ;[2e4a] 7a
                    or      a                               ;[2e4b] b7
                    ld      a,$2b                           ;[2e4c] 3e 2b
                    call    nz,$032a                        ;[2e4e] c4 2a 03
                    pop     af                              ;[2e51] f1
                    ret                                     ;[2e52] c9

                    ld      h,b                             ;[2e53] 60
                    ld      l,c                             ;[2e54] 69
                    inc     hl                              ;[2e55] 23
                    inc     hl                              ;[2e56] 23
                    inc     hl                              ;[2e57] 23
                    inc     hl                              ;[2e58] 23
                    call    $2b7e                           ;[2e59] cd 7e 2b
                    ld      hl,($78a7)                      ;[2e5c] 2a a7 78
                    call    $2b75                           ;[2e5f] cd 75 2b
                    ret                                     ;[2e62] c9


;*********************************************************************************************************************
; MODE
;BAS_CODE_MODE          equ     $9d
BAS_PROC_MODE:
                    rst     $08                             ;[2e63] cf
                    jr      z,$2e33                         ;[2e64] 28 cd
                    inc     e                               ;[2e66] 1c
                    dec     hl                              ;[2e67] 2b
                    or      a                               ;[2e68] b7
                    jr      z,BAS_FUNC_MODE_0                         ;[2e69] 28 12
                    dec     a                               ;[2e6b] 3d
                    jr      z,BAS_FUNC_MODE_1                         ;[2e6c] 28 03
                    jp      $1e4a                           ;[2e6e] c3 4a 1e

;MODE (1)
;Point HL to a location containing a ')'. Also clears screen in either mode.
;       LD HL,rbkt
;       CALL 2E71h      ; MODE(1)
;rbkt   DEFB 29h        ; ')'
;       DEFB 00h
BAS_FUNC_MODE_1
                    ld      d,$00                           ;[2e71] 16 00
                    ld      a,($783b)                       ;[2e73] 3a 3b 78
                    or      $08                             ;[2e76] f6 08
                    ld      ($783b),a                       ;[2e78] 32 3b 78
                    jr      $2e87                           ;[2e7b] 18 0a


;MODE (0)
;Point HL to a location containing a ')'. Also clears screen in either mode.
;       LD HL,rbkt
;       CALL 2E7Dh      ; MODE(0)
;rbkt   DEFB 29h        ; ')'
;       DEFB 00h
BAS_FUNC_MODE_0
                    ld      d,$20                           ;[2e7d] 16 20
                    ld      a,($783b)                       ;[2e7f] 3a 3b 78
                    and     $f7                             ;[2e82] e6 f7
                    ld      ($783b),a                       ;[2e84] 32 3b 78
                    ld      ($6800),a                       ;[2e87] 32 00 68
                    push    hl                              ;[2e8a] e5
                    ld      hl,$7000                        ;[2e8b] 21 00 70
                    ld      bc,$0800                        ;[2e8e] 01 00 08
                    ld      a,d                             ;[2e91] 7a
                    ld      (hl),a                          ;[2e92] 77
                    inc     hl                              ;[2e93] 23
                    dec     bc                              ;[2e94] 0b
                    ld      a,b                             ;[2e95] 78
                    or      c                               ;[2e96] b1
                    jr      nz,$2e91                        ;[2e97] 20 f8
                    pop     hl                              ;[2e99] e1
                    rst     $08                             ;[2e9a] cf
                    add     hl,hl                           ;[2e9b] 29
                    ret                                     ;[2e9c] c9

                    cp      $22                             ;[2e9d] fe 22
                    jp      z,$2eb3                         ;[2e9f] ca b3 2e
                    or      a                               ;[2ea2] b7
                    jp      p,$2b89                         ;[2ea3] f2 89 2b
                    jp      $2b94                           ;[2ea6] c3 94 2b
                    ld      a,(hl)                          ;[2ea9] 7e
                    or      a                               ;[2eaa] b7
                    inc     hl                              ;[2eab] 23
                    ld      (bc),a                          ;[2eac] 02
                    ret     z                               ;[2ead] c8
                    cp      $22                             ;[2eae] fe 22
                    jp      z,$2b89                         ;[2eb0] ca 89 2b
                    inc     bc                              ;[2eb3] 03
                    dec     d                               ;[2eb4] 15
                    ret     z                               ;[2eb5] c8
                    jr      $2ea9                           ;[2eb6] 18 f1
                    push    af                              ;[2eb8] f5
                    push    bc                              ;[2eb9] c5
                    push    de                              ;[2eba] d5
                    push    hl                              ;[2ebb] e5
                    call    $787d                           ;[2ebc] cd 7d 78
                    call    $3f7b                           ;[2ebf] cd 7b 3f
                    call    $2edc                           ;[2ec2] cd dc 2e
                    call    $2efd                           ;[2ec5] cd fd 2e
                    push    af                              ;[2ec8] f5
                    ld      hl,$7839                        ;[2ec9] 21 39 78
                    bit     0,(hl)                          ;[2ecc] cb 46
                    call    z,$301b                         ;[2ece] cc 1b 30
                    pop     af                              ;[2ed1] f1
                    call    $3430                           ;[2ed2] cd 30 34
                    pop     hl                              ;[2ed5] e1
                    pop     de                              ;[2ed6] d1
                    pop     bc                              ;[2ed7] c1
                    pop     af                              ;[2ed8] f1
                    ei                                      ;[2ed9] fb
                    reti                                    ;[2eda] ed 4d
                    ld      a,($7839)                       ;[2edc] 3a 39 78
                    bit     0,a                             ;[2edf] cb 47
                    ret     nz                              ;[2ee1] c0
                    ld      hl,$7841                        ;[2ee2] 21 41 78
                    dec     (hl)                            ;[2ee5] 35
                    ret     nz                              ;[2ee6] c0
                    ld      a,$10                           ;[2ee7] 3e 10
                    ld      ($7841),a                       ;[2ee9] 32 41 78
                    ld      hl,($7820)                      ;[2eec] 2a 20 78
                    ld      a,$40                           ;[2eef] 3e 40
                    xor     (hl)                            ;[2ef1] ae
                    ld      (hl),a                          ;[2ef2] 77
                    ret                                     ;[2ef3] c9

;*****************************************************************************
;This routine scans the keyboard once and returns. If a key
;is pressed, the A register will contain the code for that key; otherwise this register will contain zero. Registers
;AF, BC, DE and HL are all modified by the routine, so if the contents of these registers must be preserved they
;should be pushed onto the stack before the routine is called.
SYS_SCAN_KEYS
                    call    $2efd                           ;[2ef4] cd fd 2e
                    push    af                              ;[2ef7] f5
                    call    $2f0e                           ;[2ef8] cd 0e 2f
                    pop     af                              ;[2efb] f1
                    ret                                     ;[2efc] c9

                    ld      a,($6800)                       ;[2efd] 3a 00 68
                    or      $c0                             ;[2f00] f6 c0
                    cpl                                     ;[2f02] 2f
                    cp      $00                             ;[2f03] fe 00
                    jr      z,$2f0e                         ;[2f05] 28 07
                    call    $2f28                           ;[2f07] cd 28 2f
                    or      a                               ;[2f0a] b7
                    jp      nz,$05d7                        ;[2f0b] c2 d7 05
                    ld      hl,$7838                        ;[2f0e] 21 38 78
                    bit     2,(hl)                          ;[2f11] cb 56
                    jr      z,$2f1d                         ;[2f13] 28 08
                    ld      a,($783a)                       ;[2f15] 3a 3a 78
                    or      a                               ;[2f18] b7
                    jr      z,$2f1d                         ;[2f19] 28 02
                    res     2,(hl)                          ;[2f1b] cb 96
                    ld      a,(hl)                          ;[2f1d] 7e
                    and     $06                             ;[2f1e] e6 06
                    ld      ($7838),a                       ;[2f20] 32 38 78
                    xor     a                               ;[2f23] af
                    ld      ($7836),a                       ;[2f24] 32 36 78
                    ret                                     ;[2f27] c9

                    ld      hl,$68fe                        ;[2f28] 21 fe 68
                    ld      c,$08                           ;[2f2b] 0e 08
                    ld      b,$06                           ;[2f2d] 06 06
                    ld      a,(hl)                          ;[2f2f] 7e
                    or      $04                             ;[2f30] f6 04
                    rra                                     ;[2f32] 1f
                    jr      nc,$2f62                        ;[2f33] 30 2d
                    djnz    $2f32                           ;[2f35] 10 fb
                    rlc     l                               ;[2f37] cb 05
                    dec     c                               ;[2f39] 0d
                    jr      nz,$2f2d                        ;[2f3a] 20 f1
                    ld      b,$04                           ;[2f3c] 06 04
                    ld      hl,$68df                        ;[2f3e] 21 df 68
                    ld      a,(hl)                          ;[2f41] 7e
                    bit     2,a                             ;[2f42] cb 57
                    jr      z,$2f56                         ;[2f44] 28 10
                    rlc     l                               ;[2f46] cb 05
                    ld      a,(hl)                          ;[2f48] 7e
                    bit     2,a                             ;[2f49] cb 57
                    jr      z,$2f5a                         ;[2f4b] 28 0d
                    rlc     l                               ;[2f4d] cb 05
                    ld      a,(hl)                          ;[2f4f] 7e
                    bit     2,a                             ;[2f50] cb 57
                    jr      z,$2f5e                         ;[2f52] 28 0a
                    xor     a                               ;[2f54] af
                    ret                                     ;[2f55] c9

                    ld      c,$03                           ;[2f56] 0e 03
                    jr      $2f60                           ;[2f58] 18 06
                    ld      c,$02                           ;[2f5a] 0e 02
                    jr      $2f60                           ;[2f5c] 18 02
                    ld      c,$01                           ;[2f5e] 0e 01
                    or      $04                             ;[2f60] f6 04
                    ld      e,a                             ;[2f62] 5f
                    ld      a,$06                           ;[2f63] 3e 06
                    sub     b                               ;[2f65] 90
                    sla     a                               ;[2f66] cb 27
                    sla     a                               ;[2f68] cb 27
                    sla     a                               ;[2f6a] cb 27
                    add     $08                             ;[2f6c] c6 08
                    sub     c                               ;[2f6e] 91
                    ld      ($7842),bc                      ;[2f6f] ed 43 42 78
                    ld      ($7844),hl                      ;[2f73] 22 44 78
                    ld      hl,$01d9                        ;[2f76] 21 d9 01
                    ld      c,a                             ;[2f79] 4f
                    ld      b,$00                           ;[2f7a] 06 00
                    ld      a,($68fb)                       ;[2f7c] 3a fb 68
                    bit     2,a                             ;[2f7f] cb 57
                    jr      nz,$2f8d                        ;[2f81] 20 0a
                    ld      hl,$7838                        ;[2f83] 21 38 78
                    set     0,(hl)                          ;[2f86] cb c6
                    ld      hl,$0209                        ;[2f88] 21 09 02
                    jr      $2fca                           ;[2f8b] 18 3d
                    ld      a,($68fd)                       ;[2f8d] 3a fd 68
                    bit     2,a                             ;[2f90] cb 57
                    jr      nz,$2fcd                        ;[2f92] 20 39
                    ld      a,($687f)                       ;[2f94] 3a 7f 68
                    bit     2,a                             ;[2f97] cb 57
                    jr      nz,$2fa9                        ;[2f99] 20 0e
                    ld      hl,$7838                        ;[2f9b] 21 38 78
                    bit     5,(hl)                          ;[2f9e] cb 6e
                    jr      nz,$2fa6                        ;[2fa0] 20 04
                    ld      a,(hl)                          ;[2fa2] 7e
                    xor     $22                             ;[2fa3] ee 22
                    ld      (hl),a                          ;[2fa5] 77
                    xor     a                               ;[2fa6] af
                    pop     bc                              ;[2fa7] c1
                    ret                                     ;[2fa8] c9

                    ld      hl,$7838                        ;[2fa9] 21 38 78
                    set     7,(hl)                          ;[2fac] cb fe
                    bit     2,(hl)                          ;[2fae] cb 56
                    jr      z,$2fb7                         ;[2fb0] 28 05
                    ld      hl,$0269                        ;[2fb2] 21 69 02
                    jr      $2fca                           ;[2fb5] 18 13
                    ld      a,($68bf)                       ;[2fb7] 3a bf 68
                    bit     2,a                             ;[2fba] cb 57
                    jr      nz,$2fc5                        ;[2fbc] 20 07
                    set     2,(hl)                          ;[2fbe] cb d6
                    xor     a                               ;[2fc0] af
                    ld      ($783a),a                       ;[2fc1] 32 3a 78
                    ret                                     ;[2fc4] c9

                    res     2,(hl)                          ;[2fc5] cb 96
                    ld      hl,$0239                        ;[2fc7] 21 39 02
                    add     hl,bc                           ;[2fca] 09
                    ld      a,(hl)                          ;[2fcb] 7e
                    ret                                     ;[2fcc] c9

                    ld      a,($7838)                       ;[2fcd] 3a 38 78
                    and     $81                             ;[2fd0] e6 81
                    jr      z,$2fca                         ;[2fd2] 28 f6
                    xor     a                               ;[2fd4] af
                    pop     hl                              ;[2fd5] e1
                    ret                                     ;[2fd6] c9

                    ld      hl,$7838                        ;[2fd7] 21 38 78
                    bit     5,(hl)                          ;[2fda] cb 6e
                    jr      z,$3003                         ;[2fdc] 28 25
                    ld      a,($783a)                       ;[2fde] 3a 3a 78
                    inc     a                               ;[2fe1] 3c
                    ld      ($783a),a                       ;[2fe2] 32 3a 78
                    cp      $2a                             ;[2fe5] fe 2a
                    jr      z,$2feb                         ;[2fe7] 28 02
                    xor     a                               ;[2fe9] af
                    ret                                     ;[2fea] c9

                    ld      a,(hl)                          ;[2feb] 7e
                    and     $df                             ;[2fec] e6 df
                    or      $40                             ;[2fee] f6 40
                    ld      ($7838),a                       ;[2ff0] 32 38 78
                    xor     a                               ;[2ff3] af
                    ld      ($783a),a                       ;[2ff4] 32 3a 78
                    bit     4,(hl)                          ;[2ff7] cb 66
                    jr      nz,$2fff                        ;[2ff9] 20 04
                    ld      a,($7836)                       ;[2ffb] 3a 36 78
                    ret                                     ;[2ffe] c9

                    ld      a,($7837)                       ;[2fff] 3a 37 78
                    ret                                     ;[3002] c9

                    bit     6,(hl)                          ;[3003] cb 76
                    jr      nz,$300e                        ;[3005] 20 07
                    set     5,(hl)                          ;[3007] cb ee
                    xor     a                               ;[3009] af
                    ld      ($783a),a                       ;[300a] 32 3a 78
                    ret                                     ;[300d] c9

                    ld      a,($783a)                       ;[300e] 3a 3a 78
                    inc     a                               ;[3011] 3c
                    ld      ($783a),a                       ;[3012] 32 3a 78
                    cp      $06                             ;[3015] fe 06
                    jr      z,$2ff3                         ;[3017] 28 da
                    xor     a                               ;[3019] af
                    ret                                     ;[301a] c9

                    or      a                               ;[301b] b7
                    ret     z                               ;[301c] c8
                    push    af                              ;[301d] f5
                    call    $3039                           ;[301e] cd 39 30
                    pop     af                              ;[3021] f1
                    cp      $0d                             ;[3022] fe 0d
                    ret     z                               ;[3024] c8
                    cp      $01                             ;[3025] fe 01
                    ret     z                               ;[3027] c8
                    ld      a,($7839)                       ;[3028] 3a 39 78
                    bit     0,a                             ;[302b] cb 47
                    ret     nz                              ;[302d] c0
                    ld      a,$20                           ;[302e] 3e 20
                    ld      ($7841),a                       ;[3030] 32 41 78
                    ld      hl,($7820)                      ;[3033] 2a 20 78
                    jp      $3eb2                           ;[3036] c3 b2 3e
                    ld      hl,$7838                        ;[3039] 21 38 78
                    bit     7,(hl)                          ;[303c] cb 7e
                    jp      z,$3157                         ;[303e] ca 57 31
                    or      a                               ;[3041] b7
                    jp      p,$3157                         ;[3042] f2 57 31
                    push    af                              ;[3045] f5
                    sub     $80                             ;[3046] d6 80
                    inc     a                               ;[3048] 3c
                    ld      b,a                             ;[3049] 47
                    ld      hl,$164f                        ;[304a] 21 4f 16
                    inc     hl                              ;[304d] 23
                    bit     7,(hl)                          ;[304e] cb 7e
                    jr      z,$304d                         ;[3050] 28 fb
                    djnz    $304d                           ;[3052] 10 f9
                    ld      a,(hl)                          ;[3054] 7e
                    call    $3082                           ;[3055] cd 82 30
                    ld      a,(hl)                          ;[3058] 7e
                    bit     7,a                             ;[3059] cb 7f
                    jr      z,$3055                         ;[305b] 28 f8
                    pop     af                              ;[305d] f1
                    ld      b,$16                           ;[305e] 06 16
                    ld      hl,$0299                        ;[3060] 21 99 02
                    cp      (hl)                            ;[3063] be
                    jr      z,$307c                         ;[3064] 28 16
                    inc     hl                              ;[3066] 23
                    djnz    $3063                           ;[3067] 10 fa
                    cp      $b0                             ;[3069] fe b0
                    ret     nz                              ;[306b] c0
                    ld      a,$20                           ;[306c] 3e 20
                    call    $3082                           ;[306e] cd 82 30
                    ld      a,$46                           ;[3071] 3e 46
                    call    $3082                           ;[3073] cd 82 30
                    ld      a,$4e                           ;[3076] 3e 4e
                    call    $3082                           ;[3078] cd 82 30
                    ret                                     ;[307b] c9

                    ld      a,$28                           ;[307c] 3e 28
                    call    $3082                           ;[307e] cd 82 30
                    ret                                     ;[3081] c9

                    and     $7f                             ;[3082] e6 7f
                    push    hl                              ;[3084] e5
                    call    $3157                           ;[3085] cd 57 31
                    pop     hl                              ;[3088] e1
                    inc     hl                              ;[3089] 23
                    ret                                     ;[308a] c9

                    push    af                              ;[308b] f5
                    ld      a,($783b)                       ;[308c] 3a 3b 78
                    bit     3,a                             ;[308f] cb 5f
                    jr      z,$30aa                         ;[3091] 28 17
                    and     $f7                             ;[3093] e6 f7
                    ld      ($783b),a                       ;[3095] 32 3b 78
                    ld      ($6800),a                       ;[3098] 32 00 68
                    ld      bc,$0200                        ;[309b] 01 00 02
                    ld      hl,$7000                        ;[309e] 21 00 70
                    call    $3ebe                           ;[30a1] cd be 3e
                    inc     hl                              ;[30a4] 23
                    dec     bc                              ;[30a5] 0b
                    ld      a,c                             ;[30a6] 79
                    or      b                               ;[30a7] b0
                    jr      nz,$30a1                        ;[30a8] 20 f7
                    pop     af                              ;[30aa] f1
                    ld      hl,$7839                        ;[30ab] 21 39 78
                    bit     5,(hl)                          ;[30ae] cb 6e
                    jp      z,$3106                         ;[30b0] ca 06 31
                    cp      $20                             ;[30b3] fe 20
                    jp      nc,$30c0                        ;[30b5] d2 c0 30
                    push    af                              ;[30b8] f5
                    ld      a,($7aaf)                       ;[30b9] 3a af 7a
                    or      a                               ;[30bc] b7
                    jr      nz,$30b9                        ;[30bd] 20 fa
                    pop     af                              ;[30bf] f1
                    di                                      ;[30c0] f3
                    ld      hl,($7ab0)                      ;[30c1] 2a b0 7a
                    ld      (hl),a                          ;[30c4] 77
                    inc     hl                              ;[30c5] 23
                    ld      ($7ab0),hl                      ;[30c6] 22 b0 7a
                    ld      hl,$7aaf                        ;[30c9] 21 af 7a
                    inc     (hl)                            ;[30cc] 34
                    push    af                              ;[30cd] f5
                    ld      a,($78a6)                       ;[30ce] 3a a6 78
                    add     (hl)                            ;[30d1] 86
                    ld      ($7aae),a                       ;[30d2] 32 ae 7a
                    pop     af                              ;[30d5] f1
                    ei                                      ;[30d6] fb
                    cp      $20                             ;[30d7] fe 20
                    jp      c,$30e3                         ;[30d9] da e3 30
                    ld      a,$14                           ;[30dc] 3e 14
                    cp      (hl)                            ;[30de] be
                    jp      c,$30de                         ;[30df] da de 30
                    ret                                     ;[30e2] c9

                    xor     a                               ;[30e3] af
                    cp      (hl)                            ;[30e4] be
                    jr      nz,$30e4                        ;[30e5] 20 fd
                    ret                                     ;[30e7] c9

                    ld      a,($7aaf)                       ;[30e8] 3a af 7a
                    or      a                               ;[30eb] b7
                    ret     z                               ;[30ec] c8
                    ld      b,a                             ;[30ed] 47
                    ld      hl,$7ab2                        ;[30ee] 21 b2 7a
                    push    hl                              ;[30f1] e5
                    ld      a,(hl)                          ;[30f2] 7e
                    inc     hl                              ;[30f3] 23
                    push    hl                              ;[30f4] e5
                    push    bc                              ;[30f5] c5
                    call    $3106                           ;[30f6] cd 06 31
                    pop     bc                              ;[30f9] c1
                    pop     hl                              ;[30fa] e1
                    djnz    $30f2                           ;[30fb] 10 f5
                    pop     hl                              ;[30fd] e1
                    ld      ($7ab0),hl                      ;[30fe] 22 b0 7a
                    xor     a                               ;[3101] af
                    ld      ($7aaf),a                       ;[3102] 32 af 7a
                    ret                                     ;[3105] c9

                    call    $030d                           ;[3106] cd 0d 03
                    or      a                               ;[3109] b7
                    jr      z,$3110                         ;[310a] 28 04
                    cp      $0d                             ;[310c] fe 0d
                    jr      nz,$315a                        ;[310e] 20 4a
                    push    af                              ;[3110] f5
                    ld      hl,($7820)                      ;[3111] 2a 20 78
                    ld      a,($78a6)                       ;[3114] 3a a6 78
                    ld      c,a                             ;[3117] 4f
                    xor     a                               ;[3118] af
                    ld      b,a                             ;[3119] 47
                    ld      ($78a6),a                       ;[311a] 32 a6 78
                    sbc     hl,bc                           ;[311d] ed 42
                    ld      bc,$0020                        ;[311f] 01 20 00
                    add     hl,bc                           ;[3122] 09
                    ld      a,h                             ;[3123] 7c
                    cp      $72                             ;[3124] fe 72
                    call    p,$33f3                         ;[3126] f4 f3 33
                    ld      ($7820),hl                      ;[3129] 22 20 78
                    call    $0053                           ;[312c] cd 53 00
                    pop     af                              ;[312f] f1
                    or      a                               ;[3130] b7
                    ret     z                               ;[3131] c8
                    call    $33a8                           ;[3132] cd a8 33
                    cp      $80                             ;[3135] fe 80
                    ret     z                               ;[3137] c8
                    cp      $81                             ;[3138] fe 81
                    jr      nz,$3141                        ;[313a] 20 05
                    dec     a                               ;[313c] 3d
                    ld      (hl),a                          ;[313d] 77
                    inc     hl                              ;[313e] 23
                    ld      (hl),a                          ;[313f] 77
                    ret                                     ;[3140] c9

                    ld      a,$80                           ;[3141] 3e 80
                    ld      (hl),a                          ;[3143] 77
                    ret                                     ;[3144] c9

                    bit     6,a                             ;[3145] cb 77
                    jr      z,$314d                         ;[3147] 28 04
                    jp      $3f60                           ;[3149] c3 60 3f
                    nop                                     ;[314c] 00
                    and     $8f                             ;[314d] e6 8f
                    ld      b,a                             ;[314f] 47
                    ld      a,($7846)                       ;[3150] 3a 46 78
                    or      b                               ;[3153] b0
                    ld      b,a                             ;[3154] 47
                    jr      $31b6                           ;[3155] 18 5f
                    call    $030d                           ;[3157] cd 0d 03
                    or      a                               ;[315a] b7
                    jp      m,$3145                         ;[315b] fa 45 31
                    cp      $0d                             ;[315e] fe 0d
                    ret     z                               ;[3160] c8
                    cp      $08                             ;[3161] fe 08
                    jp      z,$3227                         ;[3163] ca 27 32
                    cp      $1b                             ;[3166] fe 1b
                    jp      z,$3253                         ;[3168] ca 53 32
                    cp      $0a                             ;[316b] fe 0a
                    jp      z,$326d                         ;[316d] ca 6d 32
                    cp      $08                             ;[3170] fe 08
                    jp      z,$3227                         ;[3172] ca 27 32
                    cp      $09                             ;[3175] fe 09
                    jp      z,$31b8                         ;[3177] ca b8 31
                    cp      $01                             ;[317a] fe 01
                    ret     z                               ;[317c] c8
                    cp      $7f                             ;[317d] fe 7f
                    jp      z,$33cb                         ;[317f] ca cb 33
                    cp      $15                             ;[3182] fe 15
                    jp      z,$32c6                         ;[3184] ca c6 32
                    cp      $18                             ;[3187] fe 18
                    jp      z,$3227                         ;[3189] ca 27 32
                    cp      $19                             ;[318c] fe 19
                    jp      z,$31b8                         ;[318e] ca b8 31
                    cp      $1b                             ;[3191] fe 1b
                    jp      z,$3253                         ;[3193] ca 53 32
                    cp      $1c                             ;[3196] fe 1c
                    jp      z,$3287                         ;[3198] ca 87 32
                    cp      $1d                             ;[319b] fe 1d
                    jp      z,$32b4                         ;[319d] ca b4 32
                    cp      $1f                             ;[31a0] fe 1f
                    jp      z,$3292                         ;[31a2] ca 92 32
                    cp      $20                             ;[31a5] fe 20
                    ret     m                               ;[31a7] f8
                    jp      $3eca                           ;[31a8] c3 ca 3e
                    ld      hl,$7838                        ;[31ab] 21 38 78
                    bit     1,(hl)                          ;[31ae] cb 4e
                    pop     hl                              ;[31b0] e1
                    jr      z,$31b5                         ;[31b1] 28 02
                    or      $40                             ;[31b3] f6 40
                    ld      b,a                             ;[31b5] 47
                    ld      a,b                             ;[31b6] 78
                    ld      (hl),a                          ;[31b7] 77
                    call    $31bf                           ;[31b8] cd bf 31
                    call    $0050                           ;[31bb] cd 50 00
                    ret                                     ;[31be] c9

                    ld      a,($78a6)                       ;[31bf] 3a a6 78
                    inc     a                               ;[31c2] 3c
                    cp      $20                             ;[31c3] fe 20
                    jr      nz,$31f2                        ;[31c5] 20 2b
                    call    $33a8                           ;[31c7] cd a8 33
                    cp      $81                             ;[31ca] fe 81
                    jr      z,$31f1                         ;[31cc] 28 23
                    or      a                               ;[31ce] b7
                    jr      nz,$3206                        ;[31cf] 20 35
                    ld      b,a                             ;[31d1] 47
                    ld      a,($7839)                       ;[31d2] 3a 39 78
                    bit     0,a                             ;[31d5] cb 47
                    ld      a,b                             ;[31d7] 78
                    ret     z                               ;[31d8] c8
                    xor     a                               ;[31d9] af
                    inc     hl                              ;[31da] 23
                    ld      (hl),a                          ;[31db] 77
                    inc     hl                              ;[31dc] 23
                    push    hl                              ;[31dd] e5
                    ld      bc,($78a4)                      ;[31de] ed 4b a4 78
                    dec     bc                              ;[31e2] 0b
                    dec     bc                              ;[31e3] 0b
                    or      a                               ;[31e4] b7
                    sbc     hl,bc                           ;[31e5] ed 42
                    pop     hl                              ;[31e7] e1
                    jr      nc,$31f1                        ;[31e8] 30 07
                    ld      a,(hl)                          ;[31ea] 7e
                    or      a                               ;[31eb] b7
                    jr      nz,$31f1                        ;[31ec] 20 03
                    ld      a,$80                           ;[31ee] 3e 80
                    ld      (hl),a                          ;[31f0] 77
                    xor     a                               ;[31f1] af
                    ld      ($78a6),a                       ;[31f2] 32 a6 78
                    ld      hl,($7820)                      ;[31f5] 2a 20 78
                    ld      bc,$0001                        ;[31f8] 01 01 00
                    add     hl,bc                           ;[31fb] 09
                    ld      a,h                             ;[31fc] 7c
                    cp      $72                             ;[31fd] fe 72
                    call    p,$33f3                         ;[31ff] f4 f3 33
                    ld      ($7820),hl                      ;[3202] 22 20 78
                    ret                                     ;[3205] c9

                    push    af                              ;[3206] f5
                    ld      de,($7820)                      ;[3207] ed 5b 20 78
                    inc     de                              ;[320b] 13
                    ld      a,d                             ;[320c] 7a
                    cp      $72                             ;[320d] fe 72
                    jr      z,$3221                         ;[320f] 28 10
                    push    hl                              ;[3211] e5
                    ld      hl,$7839                        ;[3212] 21 39 78
                    bit     0,(hl)                          ;[3215] cb 46
                    jr      nz,$3220                        ;[3217] 20 07
                    bit     4,(hl)                          ;[3219] cb 66
                    jr      nz,$3220                        ;[321b] 20 03
                    call    $332c                           ;[321d] cd 2c 33
                    pop     hl                              ;[3220] e1
                    pop     af                              ;[3221] f1
                    inc     a                               ;[3222] 3c
                    ld      (hl),a                          ;[3223] 77
                    jp      $31d9                           ;[3224] c3 d9 31
                    ld      a,($78a6)                       ;[3227] 3a a6 78
                    dec     a                               ;[322a] 3d
                    jp      p,$3235                         ;[322b] f2 35 32
                    call    $33a8                           ;[322e] cd a8 33
                    or      a                               ;[3231] b7
                    ret     nz                              ;[3232] c0
                    ld      a,$1f                           ;[3233] 3e 1f
                    ld      ($78a6),a                       ;[3235] 32 a6 78
                    ld      bc,$0001                        ;[3238] 01 01 00
                    ld      hl,($7820)                      ;[323b] 2a 20 78
                    xor     a                               ;[323e] af
                    sbc     hl,bc                           ;[323f] ed 42
                    ld      a,h                             ;[3241] 7c
                    cp      $70                             ;[3242] fe 70
                    jp      c,$324e                         ;[3244] da 4e 32
                    ld      ($7820),hl                      ;[3247] 22 20 78
                    call    $0053                           ;[324a] cd 53 00
                    ret                                     ;[324d] c9

                    xor     a                               ;[324e] af
                    ld      ($78a6),a                       ;[324f] 32 a6 78
                    ret                                     ;[3252] c9

                    ld      hl,$7839                        ;[3253] 21 39 78
                    bit     4,(hl)                          ;[3256] cb 66
                    ret     nz                              ;[3258] c0
                    ld      bc,$0020                        ;[3259] 01 20 00
                    ld      hl,($7820)                      ;[325c] 2a 20 78
                    xor     a                               ;[325f] af
                    sbc     hl,bc                           ;[3260] ed 42
                    ld      a,h                             ;[3262] 7c
                    cp      $70                             ;[3263] fe 70
                    ret     m                               ;[3265] f8
                    ld      ($7820),hl                      ;[3266] 22 20 78
                    call    $0053                           ;[3269] cd 53 00
                    ret                                     ;[326c] c9

                    ld      hl,$7839                        ;[326d] 21 39 78
                    bit     4,(hl)                          ;[3270] cb 66
                    ret     nz                              ;[3272] c0
                    ld      bc,$0020                        ;[3273] 01 20 00
                    ld      hl,($7820)                      ;[3276] 2a 20 78
                    add     hl,bc                           ;[3279] 09
                    ld      a,h                             ;[327a] 7c
                    cp      $72                             ;[327b] fe 72
                    call    p,$3424                         ;[327d] f4 24 34
                    ld      ($7820),hl                      ;[3280] 22 20 78
                    call    $0053                           ;[3283] cd 53 00
                    ret                                     ;[3286] c9

                    ld      hl,$7000                        ;[3287] 21 00 70
                    ld      ($7820),hl                      ;[328a] 22 20 78
                    xor     a                               ;[328d] af
                    ld      ($78a6),a                       ;[328e] 32 a6 78
                    ret                                     ;[3291] c9

                    ld      hl,$7000                        ;[3292] 21 00 70
                    ld      ($7820),hl                      ;[3295] 22 20 78
                    ld      bc,$0200                        ;[3298] 01 00 02
                    call    $3ebe                           ;[329b] cd be 3e
                    inc     hl                              ;[329e] 23
                    dec     bc                              ;[329f] 0b
                    ld      a,c                             ;[32a0] 79
                    or      b                               ;[32a1] b0
                    jr      nz,$329b                        ;[32a2] 20 f7
                    xor     a                               ;[32a4] af
                    ld      ($78a6),a                       ;[32a5] 32 a6 78
                    ld      b,$10                           ;[32a8] 06 10
                    ld      a,$80                           ;[32aa] 3e 80
                    ld      hl,$7ad7                        ;[32ac] 21 d7 7a
                    ld      (hl),a                          ;[32af] 77
                    inc     hl                              ;[32b0] 23
                    djnz    $32af                           ;[32b1] 10 fc
                    ret                                     ;[32b3] c9

                    ld      hl,($7820)                      ;[32b4] 2a 20 78
                    ld      a,($78a6)                       ;[32b7] 3a a6 78
                    ld      c,a                             ;[32ba] 4f
                    xor     a                               ;[32bb] af
                    ld      b,a                             ;[32bc] 47
                    ld      ($78a6),a                       ;[32bd] 32 a6 78
                    sbc     hl,bc                           ;[32c0] ed 42
                    ld      ($7820),hl                      ;[32c2] 22 20 78
                    ret                                     ;[32c5] c9

                    call    $33a8                           ;[32c6] cd a8 33
                    cp      $81                             ;[32c9] fe 81
                    jr      z,$32fe                         ;[32cb] 28 31
                    ld      a,($78a6)                       ;[32cd] 3a a6 78
                    cp      $1f                             ;[32d0] fe 1f
                    jr      z,$32f9                         ;[32d2] 28 25
                    ld      c,a                             ;[32d4] 4f
                    xor     a                               ;[32d5] af
                    ld      b,a                             ;[32d6] 47
                    ld      hl,($7820)                      ;[32d7] 2a 20 78
                    sbc     hl,bc                           ;[32da] ed 42
                    ld      bc,$001f                        ;[32dc] 01 1f 00
                    add     hl,bc                           ;[32df] 09
                    call    $3ee9                           ;[32e0] cd e9 3e
                    jr      nz,$32f9                        ;[32e3] 20 14
                    push    hl                              ;[32e5] e5
                    pop     de                              ;[32e6] d1
                    dec     hl                              ;[32e7] 2b
                    ld      a,($78a6)                       ;[32e8] 3a a6 78
                    ld      c,a                             ;[32eb] 4f
                    ld      a,$1f                           ;[32ec] 3e 1f
                    sub     c                               ;[32ee] 91
                    ld      c,a                             ;[32ef] 4f
                    lddr                                    ;[32f0] ed b8
                    call    $3ef6                           ;[32f2] cd f6 3e
                    ld      ($783c),a                       ;[32f5] 32 3c 78
                    ret                                     ;[32f8] c9

                    call    $33a8                           ;[32f9] cd a8 33
                    or      a                               ;[32fc] b7
                    ret     z                               ;[32fd] c8
                    cp      $80                             ;[32fe] fe 80
                    jr      z,$3320                         ;[3300] 28 1e
                    ld      a,($78a6)                       ;[3302] 3a a6 78
                    ld      c,a                             ;[3305] 4f
                    xor     a                               ;[3306] af
                    ld      b,a                             ;[3307] 47
                    ld      hl,($7820)                      ;[3308] 2a 20 78
                    sbc     hl,bc                           ;[330b] ed 42
                    ld      bc,$003f                        ;[330d] 01 3f 00
                    add     hl,bc                           ;[3310] 09
                    call    $3ee9                           ;[3311] cd e9 3e
                    ret     nz                              ;[3314] c0
                    push    hl                              ;[3315] e5
                    pop     de                              ;[3316] d1
                    dec     hl                              ;[3317] 2b
                    ld      a,($78a6)                       ;[3318] 3a a6 78
                    ld      c,a                             ;[331b] 4f
                    ld      a,$3f                           ;[331c] 3e 3f
                    jr      $32ee                           ;[331e] 18 ce
                    push    hl                              ;[3320] e5
                    call    $332c                           ;[3321] cd 2c 33
                    pop     hl                              ;[3324] e1
                    ld      a,$81                           ;[3325] 3e 81
                    ld      (hl),a                          ;[3327] 77
                    inc     hl                              ;[3328] 23
                    xor     a                               ;[3329] af
                    ld      (hl),a                          ;[332a] 77
                    ret                                     ;[332b] c9

                    ld      hl,($7820)                      ;[332c] 2a 20 78
                    ld      a,h                             ;[332f] 7c
                    cp      $71                             ;[3330] fe 71
                    jr      nz,$335f                        ;[3332] 20 2b
                    ld      a,l                             ;[3334] 7d
                    cp      $e0                             ;[3335] fe e0
                    jp      c,$335f                         ;[3337] da 5f 33
                    ld      a,($78a6)                       ;[333a] 3a a6 78
                    push    af                              ;[333d] f5
                    ld      a,($7ad7)                       ;[333e] 3a d7 7a
                    cp      $81                             ;[3341] fe 81
                    jr      nz,$334d                        ;[3343] 20 08
                    push    hl                              ;[3345] e5
                    call    $33f3                           ;[3346] cd f3 33
                    pop     hl                              ;[3349] e1
                    call    $0317                           ;[334a] cd 17 03
                    push    hl                              ;[334d] e5
                    call    $33f3                           ;[334e] cd f3 33
                    pop     hl                              ;[3351] e1
                    call    $0317                           ;[3352] cd 17 03
                    pop     af                              ;[3355] f1
                    ld      ($78a6),a                       ;[3356] 32 a6 78
                    pop     de                              ;[3359] d1
                    pop     hl                              ;[335a] e1
                    dec     hl                              ;[335b] 2b
                    push    hl                              ;[335c] e5
                    push    de                              ;[335d] d5
                    ret                                     ;[335e] c9

                    ld      a,($78a6)                       ;[335f] 3a a6 78
                    ld      c,a                             ;[3362] 4f
                    xor     a                               ;[3363] af
                    ld      b,a                             ;[3364] 47
                    sbc     hl,bc                           ;[3365] ed 42
                    ld      bc,$0040                        ;[3367] 01 40 00
                    add     hl,bc                           ;[336a] 09
                    push    hl                              ;[336b] e5
                    ex      de,hl                           ;[336c] eb
                    ld      hl,$7200                        ;[336d] 21 00 72
                    sbc     hl,de                           ;[3370] ed 52
                    push    hl                              ;[3372] e5
                    pop     bc                              ;[3373] c1
                    ld      hl,$71df                        ;[3374] 21 df 71
                    ld      de,$71ff                        ;[3377] 11 ff 71
                    ld      a,c                             ;[337a] 79
                    or      b                               ;[337b] b0
                    jr      z,$3380                         ;[337c] 28 02
                    lddr                                    ;[337e] ed b8
                    pop     hl                              ;[3380] e1
                    call    $3f02                           ;[3381] cd 02 3f
                    nop                                     ;[3384] 00
                    ld      (de),a                          ;[3385] 12
                    dec     de                              ;[3386] 1b
                    djnz    $3385                           ;[3387] 10 fc
                    call    $33a8                           ;[3389] cd a8 33
                    push    hl                              ;[338c] e5
                    pop     bc                              ;[338d] c1
                    ld      hl,$7ae6                        ;[338e] 21 e6 7a
                    push    hl                              ;[3391] e5
                    or      a                               ;[3392] b7
                    sbc     hl,bc                           ;[3393] ed 42
                    push    hl                              ;[3395] e5
                    pop     bc                              ;[3396] c1
                    pop     hl                              ;[3397] e1
                    push    hl                              ;[3398] e5
                    pop     de                              ;[3399] d1
                    dec     hl                              ;[339a] 2b
                    lddr                                    ;[339b] ed b8
                    ld      a,($7ae6)                       ;[339d] 3a e6 7a
                    cp      $81                             ;[33a0] fe 81
                    ret     nz                              ;[33a2] c0
                    ld      hl,($7820)                      ;[33a3] 2a 20 78
                    jr      $335f                           ;[33a6] 18 b7
                    ld      a,($78a6)                       ;[33a8] 3a a6 78
                    ld      c,a                             ;[33ab] 4f
                    xor     a                               ;[33ac] af
                    ld      b,a                             ;[33ad] 47
                    ld      hl,($7820)                      ;[33ae] 2a 20 78
                    sbc     hl,bc                           ;[33b1] ed 42
                    push    hl                              ;[33b3] e5
                    pop     bc                              ;[33b4] c1
                    ld      a,b                             ;[33b5] 78
                    and     $0f                             ;[33b6] e6 0f
                    srl     a                               ;[33b8] cb 3f
                    ld      b,a                             ;[33ba] 47
                    rr      c                               ;[33bb] cb 19
                    srl     c                               ;[33bd] cb 39
                    srl     c                               ;[33bf] cb 39
                    srl     c                               ;[33c1] cb 39
                    srl     c                               ;[33c3] cb 39
                    ld      hl,$7ad7                        ;[33c5] 21 d7 7a
                    add     hl,bc                           ;[33c8] 09
                    ld      a,(hl)                          ;[33c9] 7e
                    ret                                     ;[33ca] c9

                    call    $33a8                           ;[33cb] cd a8 33
                    cp      $81                             ;[33ce] fe 81
                    ld      hl,($7820)                      ;[33d0] 2a 20 78
                    push    hl                              ;[33d3] e5
                    pop     de                              ;[33d4] d1
                    inc     hl                              ;[33d5] 23
                    ld      a,($78a6)                       ;[33d6] 3a a6 78
                    ld      c,a                             ;[33d9] 4f
                    jr      z,$33ef                         ;[33da] 28 13
                    cp      $1f                             ;[33dc] fe 1f
                    jr      z,$33e8                         ;[33de] 28 08
                    ld      a,$1f                           ;[33e0] 3e 1f
                    sub     c                               ;[33e2] 91
                    ld      c,a                             ;[33e3] 4f
                    xor     a                               ;[33e4] af
                    ld      b,a                             ;[33e5] 47
                    ldir                                    ;[33e6] ed b0
                    call    $3ef6                           ;[33e8] cd f6 3e
                    call    $0050                           ;[33eb] cd 50 00
                    ret                                     ;[33ee] c9

                    ld      a,$3f                           ;[33ef] 3e 3f
                    jr      $33e2                           ;[33f1] 18 ef
                    ld      de,$7000                        ;[33f3] 11 00 70
                    ld      hl,$7020                        ;[33f6] 21 20 70
                    ld      bc,$01e0                        ;[33f9] 01 e0 01
                    ldir                                    ;[33fc] ed b0
                    call    $3f02                           ;[33fe] cd 02 3f
                    nop                                     ;[3401] 00
                    ld      (de),a                          ;[3402] 12
                    inc     de                              ;[3403] 13
                    djnz    $3402                           ;[3404] 10 fc
                    ld      hl,$7ad7                        ;[3406] 21 d7 7a
                    push    hl                              ;[3409] e5
                    pop     de                              ;[340a] d1
                    inc     hl                              ;[340b] 23
                    ld      bc,$000f                        ;[340c] 01 0f 00
                    ldir                                    ;[340f] ed b0
                    ld      a,(de)                          ;[3411] 1a
                    cp      $81                             ;[3412] fe 81
                    jr      nz,$3419                        ;[3414] 20 03
                    xor     a                               ;[3416] af
                    jr      $341b                           ;[3417] 18 02
                    ld      a,$80                           ;[3419] 3e 80
                    ld      (de),a                          ;[341b] 12
                    xor     a                               ;[341c] af
                    ld      ($78a6),a                       ;[341d] 32 a6 78
                    ld      hl,$71e0                        ;[3420] 21 e0 71
                    ret                                     ;[3423] c9

                    ld      a,($7ad7)                       ;[3424] 3a d7 7a
                    cp      $81                             ;[3427] fe 81
                    call    z,$33f3                         ;[3429] cc f3 33
                    call    $33f3                           ;[342c] cd f3 33
                    ret                                     ;[342f] c9

                    ld      hl,$7839                        ;[3430] 21 39 78
                    or      a                               ;[3433] b7
                    jr      nz,$3441                        ;[3434] 20 0b
                    set     1,(hl)                          ;[3436] cb ce
                    ld      bc,$03ff                        ;[3438] 01 ff 03
                    dec     bc                              ;[343b] 0b
                    ld      a,c                             ;[343c] 79
                    or      b                               ;[343d] b0
                    jr      nz,$343b                        ;[343e] 20 fb
                    ret                                     ;[3440] c9

                    bit     0,(hl)                          ;[3441] cb 46
                    ret     nz                              ;[3443] c0
                    cp      $0d                             ;[3444] fe 0d
                    jr      z,$344e                         ;[3446] 28 06
                    cp      $01                             ;[3448] fe 01
                    jr      nz,$3450                        ;[344a] 20 04
                    set     2,(hl)                          ;[344c] cb d6
                    set     0,(hl)                          ;[344e] cb c6

;'BEEP' ROUTINE
;The routine which is used by BASIC to produce the short 'beep' when a key is pressed.
;It disturbs all registers except the HL pair.

SYS_PLAY_BEEP:
                    push    hl                              ;[3450] e5
                    ld      hl,$00a0                        ;[3451] 21 a0 00
                    ld      bc,$0006                        ;[3454] 01 06 00
                    call    SYS_PLAY_SOUND                  ;[3457] cd 5c 34
                    pop     hl                              ;[345a] e1
                    ret                                     ;[345b] c9


;SOUND DRIVER
; Located at 345C hex is a routine which can be used to produce sounds via the VZ200/300's 
; internal piezo speaker. Before calling the routine, the HL register pair must be loaded 
; with a number representing the pitch (frequency) of the tone to be produced, 
; while the BC register pair must be loaded with the number of cycles of the tone 
; required (ie the duration in cycles). 
; All registers are used. 
; The frequency coding used is inversely proportional to frequency, ie the smaller 
; the number loaded into the HL register pair, the higher the frequency.
; As a guide, the low C produced by the VZ200/300's SOUND command in BASIC 
; can be produced using the decimal number 526, the middle C using 529 
; and the high C using 127. Here is how you would use the routine to get say 
; 75 cycles of the middle C:
;   LD HL,259       ;set frequency code
;   LD BC,75        ;set number of cycles
;   CALL 345CH      ;& call sound routine

SYS_PLAY_SOUND
                    ld      a,($783b)                       ;[345c] 3a 3b 78
                    ld      d,a                             ;[345f] 57
snd_play_next_cycle
                    call    $3469                           ;[3460] cd 69 34
                    dec     bc                              ;[3463] 0b
                    ld      a,c                             ;[3464] 79
                    or      b                               ;[3465] b0
                    jr      nz,snd_play_next_cycle ;$3460                        ;[3466] 20 f8
                    ret                                     ;[3468] c9

                    push    bc                              ;[3469] c5
                    ld      a,d                             ;[346a] 7a
                    xor     $21                             ;[346b] ee 21
                    ld      ($6800),a                       ;[346d] 32 00 68
                    push    hl                              ;[3470] e5
                    pop     bc                              ;[3471] c1
                    dec     bc                              ;[3472] 0b
                    ld      a,c                             ;[3473] 79
                    or      b                               ;[3474] b0
                    jr      nz,$3472                        ;[3475] 20 fb
                    ld      a,d                             ;[3477] 7a
                    ld      ($6800),a                       ;[3478] 32 00 68
                    push    hl                              ;[347b] e5
                    pop     bc                              ;[347c] c1
                    dec     bc                              ;[347d] 0b
                    ld      a,c                             ;[347e] 79
                    or      b                               ;[347f] b0
                    jr      nz,$347d                        ;[3480] 20 fb
                    pop     bc                              ;[3482] c1
                    ret                                     ;[3483] c9

                    call    $3fa0                           ;[3484] cd a0 3f
                    ld      a,$20                           ;[3487] 3e 20
                    ld      ($783b),a                       ;[3489] 32 3b 78
                    ld      ($6800),a                       ;[348c] 32 00 68
                    ld      a,$3c                           ;[348f] 3e 3c
                    ld      ($783a),a                       ;[3491] 32 3a 78
                    ld      a,$10                           ;[3494] 3e 10
                    ld      ($7841),a                       ;[3496] 32 41 78
                    xor     a                               ;[3499] af
                    ld      ($7aaf),a                       ;[349a] 32 af 7a
                    ld      hl,$7ab2                        ;[349d] 21 b2 7a
                    ld      ($7ab0),hl                      ;[34a0] 22 b0 7a
                    ld      a,$c9                           ;[34a3] 3e c9
                    jp      $3e37                           ;[34a5] c3 37 3e
                    ret                                     ;[34a8] c9

;*********************************************************************************************************************
; CSAVE
;BAS_CODE_CSAVE          equ     $ba
BAS_PROC_CSAVE:
                    di                                      ;[34a9] f3
                    ld      c,$f0                           ;[34aa] 0e f0
                    call    $3558                           ;[34ac] cd 58 35
                    jp      c,$3afe                         ;[34af] da fe 3a
                    push    hl                              ;[34b2] e5
                    ld      bc,$019a                        ;[34b3] 01 9a 01
                    dec     bc                              ;[34b6] 0b
                    ld      a,c                             ;[34b7] 79
                    or      b                               ;[34b8] b0
                    jr      nz,$34b6                        ;[34b9] 20 fb
                    call    $3af8                           ;[34bb] cd f8 3a
                    ld      ix,$7823                        ;[34be] dd 21 23 78
                    ld      hl,($78a4)                      ;[34c2] 2a a4 78
                    ld      a,l                             ;[34c5] 7d
                    call    $3511                           ;[34c6] cd 11 35
                    ld      (ix+$00),a                      ;[34c9] dd 77 00
                    xor     a                               ;[34cc] af
                    ld      (ix+$01),a                      ;[34cd] dd 77 01
                    ld      a,h                             ;[34d0] 7c
                    call    $3511                           ;[34d1] cd 11 35
                    call    $388e                           ;[34d4] cd 8e 38
                    ex      de,hl                           ;[34d7] eb
                    ld      hl,($78f9)                      ;[34d8] 2a f9 78
                    ld      a,l                             ;[34db] 7d
                    call    $3511                           ;[34dc] cd 11 35
                    call    $388e                           ;[34df] cd 8e 38
                    ld      a,h                             ;[34e2] 7c
                    call    $3511                           ;[34e3] cd 11 35
                    call    $388e                           ;[34e6] cd 8e 38
                    call    $3af8                           ;[34e9] cd f8 3a
                    ld      a,(de)                          ;[34ec] 1a
                    inc     de                              ;[34ed] 13
                    call    $3511                           ;[34ee] cd 11 35
                    call    $388e                           ;[34f1] cd 8e 38
                    call    $3af8                           ;[34f4] cd f8 3a
                    rst     $18                             ;[34f7] df
                    jr      nz,$34ec                        ;[34f8] 20 f2
                    ld      a,(ix+$00)                      ;[34fa] dd 7e 00
                    call    $3511                           ;[34fd] cd 11 35
                    ld      a,(ix+$01)                      ;[3500] dd 7e 01
                    call    $3511                           ;[3503] cd 11 35
                    ld      b,$14                           ;[3506] 06 14
                    xor     a                               ;[3508] af
                    call    $3511                           ;[3509] cd 11 35
                    djnz    $3509                           ;[350c] 10 fb
                    pop     hl                              ;[350e] e1
                    ei                                      ;[350f] fb
                    ret                                     ;[3510] c9

                    push    af                              ;[3511] f5
                    push    bc                              ;[3512] c5
                    push    hl                              ;[3513] e5
                    ld      l,$08                           ;[3514] 2e 08
                    ld      h,a                             ;[3516] 67
                    call    $3542                           ;[3517] cd 42 35
                    rlc     h                               ;[351a] cb 04
                    jr      nc,$352b                        ;[351c] 30 0d
                    call    $3542                           ;[351e] cd 42 35
                    call    $3542                           ;[3521] cd 42 35
                    dec     l                               ;[3524] 2d
                    jr      nz,$3517                        ;[3525] 20 f0
                    pop     hl                              ;[3527] e1
                    pop     bc                              ;[3528] c1
                    pop     af                              ;[3529] f1
                    ret                                     ;[352a] c9

                    ld      a,($783b)                       ;[352b] 3a 3b 78
                    or      $06                             ;[352e] f6 06
                    ld      ($6800),a                       ;[3530] 32 00 68
                    ld      b,$99                           ;[3533] 06 99
                    djnz    $3535                           ;[3535] 10 fe
                    and     $f9                             ;[3537] e6 f9
                    ld      ($6800),a                       ;[3539] 32 00 68
                    ld      b,$99                           ;[353c] 06 99
                    djnz    $353e                           ;[353e] 10 fe
                    jr      $3524                           ;[3540] 18 e2
                    ld      a,($783b)                       ;[3542] 3a 3b 78
                    or      $06                             ;[3545] f6 06
                    ld      ($6800),a                       ;[3547] 32 00 68
                    ld      b,$4c                           ;[354a] 06 4c
                    djnz    $354c                           ;[354c] 10 fe
                    and     $f9                             ;[354e] e6 f9
                    ld      ($6800),a                       ;[3550] 32 00 68
                    ld      b,$4c                           ;[3553] 06 4c
                    djnz    $3555                           ;[3555] 10 fe
                    ret                                     ;[3557] c9

                    call    $358c                           ;[3558] cd 8c 35
                    ld      b,$ff                           ;[355b] 06 ff
                    ld      a,$80                           ;[355d] 3e 80
                    call    $3511                           ;[355f] cd 11 35
                    call    $3ae8                           ;[3562] cd e8 3a
                    ret     c                               ;[3565] d8
                    djnz    $355d                           ;[3566] 10 f5
                    ld      b,$05                           ;[3568] 06 05
                    ld      a,$fe                           ;[356a] 3e fe
                    call    $3511                           ;[356c] cd 11 35
                    call    $3ae8                           ;[356f] cd e8 3a
                    ret     c                               ;[3572] d8
                    djnz    $356a                           ;[3573] 10 f5
                    ld      a,c                             ;[3575] 79
                    call    $3511                           ;[3576] cd 11 35
                    call    $3ae8                           ;[3579] cd e8 3a
                    ret     c                               ;[357c] d8
                    ld      a,($7ad6)                       ;[357d] 3a d6 7a
                    ld      b,a                             ;[3580] 47
                    ld      de,$7a9d                        ;[3581] 11 9d 7a
                    ld      a,(de)                          ;[3584] 1a
                    inc     de                              ;[3585] 13
                    call    $3511                           ;[3586] cd 11 35
                    djnz    $3584                           ;[3589] 10 f9
                    ret                                     ;[358b] c9

                    ld      b,$10                           ;[358c] 06 10
                    ld      de,$7a9d                        ;[358e] 11 9d 7a
                    ld      a,(hl)                          ;[3591] 7e
                    cp      $3a                             ;[3592] fe 3a
                    jr      z,$35a8                         ;[3594] 28 12
                    or      a                               ;[3596] b7
                    jr      z,$35a8                         ;[3597] 28 0f
                    rst     $08                             ;[3599] cf
                    ld      ($b77e),hl                      ;[359a] 22 7e b7
                    jr      z,$35a8                         ;[359d] 28 09
                    inc     hl                              ;[359f] 23
                    cp      $22                             ;[35a0] fe 22
                    jr      z,$35a8                         ;[35a2] 28 04
                    ld      (de),a                          ;[35a4] 12
                    inc     de                              ;[35a5] 13
                    djnz    $359b                           ;[35a6] 10 f3
                    xor     a                               ;[35a8] af
                    ld      (de),a                          ;[35a9] 12
                    ld      a,$11                           ;[35aa] 3e 11
                    sub     b                               ;[35ac] 90
                    ld      ($7ad6),a                       ;[35ad] 32 d6 7a
                    ret                                     ;[35b0] c9

                    ld      a,($784c)                       ;[35b1] 3a 4c 78
                    or      a                               ;[35b4] b7
                    ret     nz                              ;[35b5] c0
                    ld      a,($783b)                       ;[35b6] 3a 3b 78
                    bit     3,a                             ;[35b9] cb 5f
                    jr      z,$35c8                         ;[35bb] 28 0b
                    and     $f7                             ;[35bd] e6 f7
                    ld      ($783b),a                       ;[35bf] 32 3b 78
                    ld      ($6800),a                       ;[35c2] 32 00 68
                    call    $3292                           ;[35c5] cd 92 32
                    ld      hl,$71ff                        ;[35c8] 21 ff 71
                    ld      ($7820),hl                      ;[35cb] 22 20 78
                    ld      a,$1f                           ;[35ce] 3e 1f
                    ld      ($78a6),a                       ;[35d0] 32 a6 78
                    ld      a,($7ae5)                       ;[35d3] 3a e5 7a
                    cp      $81                             ;[35d6] fe 81
                    ret     nz                              ;[35d8] c0
                    dec     a                               ;[35d9] 3d
                    ld      ($7ae5),a                       ;[35da] 32 e5 7a
                    ld      ($7ae6),a                       ;[35dd] 32 e6 7a
                    ret                                     ;[35e0] c9

                    ld      hl,$3842                        ;[35e1] 21 42 38
                    call    $37f4                           ;[35e4] cd f4 37
                    call    $3af8                           ;[35e7] cd f8 3a
                    ld      a,($6800)                       ;[35ea] 3a 00 68
                    bit     6,a                             ;[35ed] cb 77
                    jr      nz,$35e7                        ;[35ef] 20 f6
                    call    $378f                           ;[35f1] cd 8f 37
                    jr      c,$35e7                         ;[35f4] 38 f1
                    bit     0,a                             ;[35f6] cb 47
                    jr      z,$35f1                         ;[35f8] 28 f7
                    ld      b,$07                           ;[35fa] 06 07
                    call    $378f                           ;[35fc] cd 8f 37
                    jr      c,$35e7                         ;[35ff] 38 e6
                    djnz    $35fc                           ;[3601] 10 f9
                    cp      $80                             ;[3603] fe 80
                    jr      nz,$35e7                        ;[3605] 20 e0
                    call    $3775                           ;[3607] cd 75 37
                    jp      c,$35e7                         ;[360a] da e7 35
                    cp      $80                             ;[360d] fe 80
                    jr      z,$3607                         ;[360f] 28 f6
                    ld      b,$04                           ;[3611] 06 04
                    cp      $fe                             ;[3613] fe fe
                    jp      nz,$35e7                        ;[3615] c2 e7 35
                    call    $3775                           ;[3618] cd 75 37
                    jp      c,$35e7                         ;[361b] da e7 35
                    djnz    $3613                           ;[361e] 10 f3
                    call    $3775                           ;[3620] cd 75 37
                    ld      ($7ad2),a                       ;[3623] 32 d2 7a
                    ld      hl,$7ab2                        ;[3626] 21 b2 7a
                    ld      b,$12                           ;[3629] 06 12
                    call    $3775                           ;[362b] cd 75 37
                    ld      (hl),a                          ;[362e] 77
                    or      a                               ;[362f] b7
                    jr      z,$3638                         ;[3630] 28 06
                    inc     hl                              ;[3632] 23
                    djnz    $362b                           ;[3633] 10 f6
                    jp      $35e7                           ;[3635] c3 e7 35
                    ld      hl,$385a                        ;[3638] 21 5a 38
                    call    $37f4                           ;[363b] cd f4 37
                    ld      hl,$7ab2                        ;[363e] 21 b2 7a
                    call    $3814                           ;[3641] cd 14 38
                    ld      hl,$7ab2                        ;[3644] 21 b2 7a
                    ld      de,$7a9d                        ;[3647] 11 9d 7a
                    ld      a,(de)                          ;[364a] 1a
                    or      a                               ;[364b] b7
                    ret     z                               ;[364c] c8
                    cp      (hl)                            ;[364d] be
                    jp      nz,$35e7                        ;[364e] c2 e7 35
                    inc     hl                              ;[3651] 23
                    inc     de                              ;[3652] 13
                    jr      $364a                           ;[3653] 18 f5
                    ret                                     ;[3655] c9

 
 
 
 ;*********************************************************************************************************************
; CLOAD
;BAS_CODE_CLOAD          equ     $b9
BAS_PROC_CLOAD:
                    push    hl                              ;[3656] e5
                    ld      hl,$7839                        ;[3657] 21 39 78
                    res     6,(hl)                          ;[365a] cb b6
                    res     3,(hl)                          ;[365c] cb 9e
                    pop     hl                              ;[365e] e1
                    di                                      ;[365f] f3
                    call    $358c                           ;[3660] cd 8c 35
                    push    hl                              ;[3663] e5
                    call    $35b1                           ;[3664] cd b1 35
                    ld      hl,$3842                        ;[3667] 21 42 38
                    call    $37f4                           ;[366a] cd f4 37
                    call    $35e7                           ;[366d] cd e7 35
                    ld      a,($7ad2)                       ;[3670] 3a d2 7a
                    cp      $f2                             ;[3673] fe f2
                    jr      z,$366d                         ;[3675] 28 f6
                    ld      hl,$3860                        ;[3677] 21 60 38
                    call    $3804                           ;[367a] cd 04 38
                    ld      ix,$7823                        ;[367d] dd 21 23 78
                    call    $3868                           ;[3681] cd 68 38
                    jp      c,$3711                         ;[3684] da 11 37
                    push    hl                              ;[3687] e5
                    sbc     hl,de                           ;[3688] ed 52
                    jp      c,$3711                         ;[368a] da 11 37
                    ld      ($781e),de                      ;[368d] ed 53 1e 78
                    push    hl                              ;[3691] e5
                    pop     bc                              ;[3692] c1
                    pop     hl                              ;[3693] e1
                    ld      a,($7839)                       ;[3694] 3a 39 78
                    bit     3,a                             ;[3697] cb 5f
                    jp      nz,$3742                        ;[3699] c2 42 37
                    call    $3f73                           ;[369c] cd 73 3f
                    ld      (de),a                          ;[369f] 12
                    call    $388e                           ;[36a0] cd 8e 38
                    inc     de                              ;[36a3] 13
                    dec     bc                              ;[36a4] 0b
                    ld      a,c                             ;[36a5] 79
                    or      b                               ;[36a6] b0
                    jr      nz,$369c                        ;[36a7] 20 f3
                    call    $3775                           ;[36a9] cd 75 37
                    cp      (ix+$00)                        ;[36ac] dd be 00
                    jp      nz,$3711                        ;[36af] c2 11 37
                    call    $3775                           ;[36b2] cd 75 37
                    cp      (ix+$01)                        ;[36b5] dd be 01
                    jp      nz,$3711                        ;[36b8] c2 11 37
                    ld      ($78f9),hl                      ;[36bb] 22 f9 78
                    ei                                      ;[36be] fb
                    ld      a,$0d                           ;[36bf] 3e 0d
                    call    $308b                           ;[36c1] cd 8b 30
                    ld      a,($7ad2)                       ;[36c4] 3a d2 7a
                    cp      $f1                             ;[36c7] fe f1
                    jr      nz,$36cf                        ;[36c9] 20 04
                    ld      hl,($781e)                      ;[36cb] 2a 1e 78
                    jp      (hl)                            ;[36ce] e9
                    ld      hl,$1929                        ;[36cf] 21 29 19
                    call    SYS_STR_TO_DEVICE                           ;[36d2] cd a7 28
                    ld      hl,($78a4)                      ;[36d5] 2a a4 78
                    push    hl                              ;[36d8] e5
                    ld      hl,$7839                        ;[36d9] 21 39 78
                    bit     6,(hl)                          ;[36dc] cb 76
                    jr      nz,$36e3                        ;[36de] 20 03
                    jp      $1ae8                           ;[36e0] c3 e8 1a
                    ld      hl,$7839                        ;[36e3] 21 39 78
                    res     6,(hl)                          ;[36e6] cb b6
                    pop     de                              ;[36e8] d1
                    call    $1afc                           ;[36e9] cd fc 1a
                    call    $79b5                           ;[36ec] cd b5 79
                    call    $1b5d                           ;[36ef] cd 5d 1b
                    call    $79b8                           ;[36f2] cd b8 79
                    ld      hl,$ffff                        ;[36f5] 21 ff ff
                    ld      ($78a2),hl                      ;[36f8] 22 a2 78
                    ld      hl,$79e8                        ;[36fb] 21 e8 79
                    ld      de,$0570                        ;[36fe] 11 70 05
                    ld      a,(de)                          ;[3701] 1a
                    ld      (hl),a                          ;[3702] 77
                    or      a                               ;[3703] b7
                    jr      z,$370a                         ;[3704] 28 04
                    inc     hl                              ;[3706] 23
                    inc     de                              ;[3707] 13
                    jr      $3701                           ;[3708] 18 f7
                    ld      hl,$79e7                        ;[370a] 21 e7 79
                    xor     a                               ;[370d] af
                    jp      $1a81                           ;[370e] c3 81 1a
                    ld      hl,$384a                        ;[3711] 21 4a 38
                    ei                                      ;[3714] fb
                    call    SYS_STR_TO_DEVICE                           ;[3715] cd a7 28
                    di                                      ;[3718] f3
                    ld      a,($784c)                       ;[3719] 3a 4c 78
                    or      a                               ;[371c] b7
                    jp      nz,$3667                        ;[371d] c2 67 36
                    ld      hl,$71ff                        ;[3720] 21 ff 71
                    ld      ($7820),hl                      ;[3723] 22 20 78
                    ld      a,$1f                           ;[3726] 3e 1f
                    ld      ($78a6),a                       ;[3728] 32 a6 78
                    jp      $3667                           ;[372b] c3 67 36


;*********************************************************************************************************************
; CRUN
;BAS_CODE_CRUN          equ     $9c
BAS_PROC_CRUN:
                    push    hl                              ;[372e] e5
                    ld      hl,$7839                        ;[372f] 21 39 78
                    set     6,(hl)                          ;[3732] cb f6
                    pop     hl                              ;[3734] e1
                    jp      $365f                           ;[3735] c3 5f 36


;*********************************************************************************************************************
; VERIFY
;BAS_CODE_VERIFY          equ     $98
BAS_PROC_VERIFY:

                    push    hl                              ;[3738] e5
                    ld      hl,$7839                        ;[3739] 21 39 78
                    set     3,(hl)                          ;[373c] cb de
                    pop     hl                              ;[373e] e1
                    jp      $365f                           ;[373f] c3 5f 36
                    ex      de,hl                           ;[3742] eb
                    call    $3775                           ;[3743] cd 75 37
                    cp      (hl)                            ;[3746] be
                    jr      z,$3752                         ;[3747] 28 09
                    ld      hl,$376c                        ;[3749] 21 6c 37
                    call    SYS_STR_TO_DEVICE                           ;[374c] cd a7 28
                    jp      $0183                           ;[374f] c3 83 01
                    inc     hl                              ;[3752] 23
                    dec     bc                              ;[3753] 0b
                    ld      a,c                             ;[3754] 79
                    or      b                               ;[3755] b0
                    jr      nz,$3743                        ;[3756] 20 eb
                    ld      hl,$7839                        ;[3758] 21 39 78
                    res     3,(hl)                          ;[375b] cb 9e
                    ld      hl,$376c                        ;[375d] 21 6c 37
                    call    SYS_STR_TO_DEVICE                           ;[3760] cd a7 28
                    ld      hl,$0380                        ;[3763] 21 80 03
                    call    SYS_STR_TO_DEVICE                           ;[3766] cd a7 28
                    jp      $36cf                           ;[3769] c3 cf 36
                    dec     c                               ;[376c] 0d
                    ld      d,(hl)                          ;[376d] 56
                    ld      b,l                             ;[376e] 45
                    ld      d,d                             ;[376f] 52
                    ld      c,c                             ;[3770] 49
                    ld      b,(hl)                          ;[3771] 46
                    ld      e,c                             ;[3772] 59
                    jr      nz,$3775                        ;[3773] 20 00
                    push    bc                              ;[3775] c5
                    push    de                              ;[3776] d5
                    ld      b,$08                           ;[3777] 06 08
                    call    $378f                           ;[3779] cd 8f 37
                    jr      c,$378c                         ;[377c] 38 0e
                    djnz    $3779                           ;[377e] 10 f9
                    pop     de                              ;[3780] d1
                    pop     bc                              ;[3781] c1
                    ld      ($7ad3),a                       ;[3782] 32 d3 7a
                    call    $3af8                           ;[3785] cd f8 3a
                    ld      a,($7ad3)                       ;[3788] 3a d3 7a
                    ret                                     ;[378b] c9

                    pop     de                              ;[378c] d1
                    pop     bc                              ;[378d] c1
                    ret                                     ;[378e] c9

                    push    bc                              ;[378f] c5
                    ld      bc,$07ff                        ;[3790] 01 ff 07
                    ld      a,($6800)                       ;[3793] 3a 00 68
                    bit     6,a                             ;[3796] cb 77
                    jr      z,$37a2                         ;[3798] 28 08
                    dec     bc                              ;[379a] 0b
                    ld      a,c                             ;[379b] 79
                    or      b                               ;[379c] b0
                    jr      nz,$3793                        ;[379d] 20 f4
                    pop     bc                              ;[379f] c1
                    scf                                     ;[37a0] 37
                    ret                                     ;[37a1] c9

                    ld      a,($6800)                       ;[37a2] 3a 00 68
                    bit     6,a                             ;[37a5] cb 77
                    jr      nz,$3793                        ;[37a7] 20 ea
                    ld      a,($6800)                       ;[37a9] 3a 00 68
                    bit     6,a                             ;[37ac] cb 77
                    jr      nz,$3793                        ;[37ae] 20 e3
                    ld      b,$52                           ;[37b0] 06 52
                    djnz    $37b2                           ;[37b2] 10 fe
                    ld      a,($6800)                       ;[37b4] 3a 00 68
                    bit     6,a                             ;[37b7] cb 77
                    jr      nz,$37c4                        ;[37b9] 20 09
                    ld      a,($6800)                       ;[37bb] 3a 00 68
                    bit     6,a                             ;[37be] cb 77
                    jr      z,$37bb                         ;[37c0] 28 f9
                    jr      $3790                           ;[37c2] 18 cc
                    ld      b,$5a                           ;[37c4] 06 5a
                    ld      c,$00                           ;[37c6] 0e 00
                    ld      a,($6800)                       ;[37c8] 3a 00 68
                    bit     6,a                             ;[37cb] cb 77
                    jr      z,$37da                         ;[37cd] 28 0b
                    djnz    $37c8                           ;[37cf] 10 f7
                    ld      a,c                             ;[37d1] 79
                    dec     a                               ;[37d2] 3d
                    rra                                     ;[37d3] 1f
                    rl      d                               ;[37d4] cb 12
                    pop     bc                              ;[37d6] c1
                    ld      a,d                             ;[37d7] 7a
                    or      a                               ;[37d8] b7
                    ret                                     ;[37d9] c9

                    ld      a,($6800)                       ;[37da] 3a 00 68
                    bit     6,a                             ;[37dd] cb 77
                    jr      nz,$37cf                        ;[37df] 20 ee
                    ld      a,($6800)                       ;[37e1] 3a 00 68
                    bit     6,a                             ;[37e4] cb 77
                    jr      nz,$37cf                        ;[37e6] 20 e7
                    inc     c                               ;[37e8] 0c
                    ld      a,($6800)                       ;[37e9] 3a 00 68
                    bit     6,a                             ;[37ec] cb 77
                    jr      nz,$37cf                        ;[37ee] 20 df
                    djnz    $37e9                           ;[37f0] 10 f7
                    jr      $37d1                           ;[37f2] 18 dd
                    ld      a,($784c)                       ;[37f4] 3a 4c 78
                    or      a                               ;[37f7] b7
                    ret     nz                              ;[37f8] c0
                    ld      de,$71e0                        ;[37f9] 11 e0 71
                    ld      b,$20                           ;[37fc] 06 20
                    call    $3ef6                           ;[37fe] cd f6 3e
                    inc     de                              ;[3801] 13
                    djnz    $37fe                           ;[3802] 10 fa
                    ld      a,($784c)                       ;[3804] 3a 4c 78
                    or      a                               ;[3807] b7
                    ret     nz                              ;[3808] c0
                    call    $3f0e                           ;[3809] cd 0e 3f
                    ld      a,(hl)                          ;[380c] 7e
                    or      a                               ;[380d] b7
                    ret     z                               ;[380e] c8
                    ld      (de),a                          ;[380f] 12
                    inc     de                              ;[3810] 13
                    inc     hl                              ;[3811] 23
                    jr      $380c                           ;[3812] 18 f8
                    ld      a,($784c)                       ;[3814] 3a 4c 78
                    or      a                               ;[3817] b7
                    ret     nz                              ;[3818] c0
                    ld      de,$71e9                        ;[3819] 11 e9 71
                    push    hl                              ;[381c] e5
                    ld      a,($7ad2)                       ;[381d] 3a d2 7a
                    and     $0f                             ;[3820] e6 0f
                    ld      hl,$383f                        ;[3822] 21 3f 38
                    add     l                               ;[3825] 85
                    ld      l,a                             ;[3826] 6f
                    ld      a,$00                           ;[3827] 3e 00
                    adc     h                               ;[3829] 8c
                    ld      h,a                             ;[382a] 67
                    call    $3f21                           ;[382b] cd 21 3f
                    nop                                     ;[382e] 00
                    nop                                     ;[382f] 00
                    ld      (de),a                          ;[3830] 12
                    inc     de                              ;[3831] 13
                    inc     de                              ;[3832] 13
                    pop     hl                              ;[3833] e1
                    ld      a,(hl)                          ;[3834] 7e
                    or      a                               ;[3835] b7
                    ret     z                               ;[3836] c8
                    call    $3f33                           ;[3837] cd 33 3f
                    inc     de                              ;[383a] 13
                    inc     hl                              ;[383b] 23
                    jr      $3834                           ;[383c] 18 f6
                    ret                                     ;[383e] c9

                    inc     d                               ;[383f] 14
                    ld      (bc),a                          ;[3840] 02
                    inc     b                               ;[3841] 04
                    ld      d,a                             ;[3842] 57
                    ld      b,c                             ;[3843] 41
                    ld      c,c                             ;[3844] 49
                    ld      d,h                             ;[3845] 54
                    ld      c,c                             ;[3846] 49
                    ld      c,(hl)                          ;[3847] 4e
                    ld      b,a                             ;[3848] 47
                    nop                                     ;[3849] 00
                    dec     c                               ;[384a] 0d
                    ld      c,h                             ;[384b] 4c
                    ld      c,a                             ;[384c] 4f
                    ld      b,c                             ;[384d] 41
                    ld      b,h                             ;[384e] 44
                    ld      c,c                             ;[384f] 49
                    ld      c,(hl)                          ;[3850] 4e
                    ld      b,a                             ;[3851] 47
                    jr      nz,$3899                        ;[3852] 20 45
                    ld      d,d                             ;[3854] 52
                    ld      d,d                             ;[3855] 52
                    ld      c,a                             ;[3856] 4f
                    ld      d,d                             ;[3857] 52
                    dec     c                               ;[3858] 0d
                    nop                                     ;[3859] 00
                    ld      b,(hl)                          ;[385a] 46
                    ld      c,a                             ;[385b] 4f
                    ld      d,l                             ;[385c] 55
                    ld      c,(hl)                          ;[385d] 4e
                    ld      b,h                             ;[385e] 44
                    nop                                     ;[385f] 00
                    ld      c,h                             ;[3860] 4c
                    ld      c,a                             ;[3861] 4f
                    ld      b,c                             ;[3862] 41
                    ld      b,h                             ;[3863] 44
                    ld      c,c                             ;[3864] 49
                    ld      c,(hl)                          ;[3865] 4e
                    ld      b,a                             ;[3866] 47
                    nop                                     ;[3867] 00
                    call    $3775                           ;[3868] cd 75 37
                    ret     c                               ;[386b] d8
                    ld      e,a                             ;[386c] 5f
                    ld      (ix+$00),a                      ;[386d] dd 77 00
                    xor     a                               ;[3870] af
                    ld      (ix+$01),a                      ;[3871] dd 77 01
                    call    $3775                           ;[3874] cd 75 37
                    ret     c                               ;[3877] d8
                    ld      d,a                             ;[3878] 57
                    call    $388e                           ;[3879] cd 8e 38
                    call    $3775                           ;[387c] cd 75 37
                    ret     c                               ;[387f] d8
                    ld      l,a                             ;[3880] 6f
                    call    $388e                           ;[3881] cd 8e 38
                    call    $3775                           ;[3884] cd 75 37
                    ret     c                               ;[3887] d8
                    ld      h,a                             ;[3888] 67
                    call    $388e                           ;[3889] cd 8e 38
                    or      a                               ;[388c] b7
                    ret                                     ;[388d] c9

                    add     (ix+$00)                        ;[388e] dd 86 00
                    ld      (ix+$00),a                      ;[3891] dd 77 00
                    ld      a,$00                           ;[3894] 3e 00
                    adc     (ix+$01)                        ;[3896] dd 8e 01
                    ld      (ix+$01),a                      ;[3899] dd 77 01
                    ret                                     ;[389c] c9


;*********************************************************************************************************************
; COLOR
;BAS_CODE_COLOR          equ     $97
BAS_PROC_COLOR:


                    ld      a,(hl)                          ;[389d] 7e
                    cp      $2c                             ;[389e] fe 2c
                    jr      z,$38c2                         ;[38a0] 28 20
                    call    $2b1c                           ;[38a2] cd 1c 2b

;BASIC COLOR
;Example routine (self explanatory)
;       LD A,colour     ; 1-8
;       LD HL,zero      ; HL points to 00h byte
;       CALL 38A5h      ; change colour
;zero DEFB 00h
;If A=0 or A>8 it will display a "Function Code Error" and exit.
SYS_SET_COLOR
                    or      a                               ;[38a5] b7
                    jp      z,$1e4a                         ;[38a6] ca 4a 1e
                    cp      $09                             ;[38a9] fe 09
                    jp      nc,$1e4a                        ;[38ab] d2 4a 1e
                    dec     a                               ;[38ae] 3d
                    and     $07                             ;[38af] e6 07
                    sla     a                               ;[38b1] cb 27
                    sla     a                               ;[38b3] cb 27
                    sla     a                               ;[38b5] cb 27
                    sla     a                               ;[38b7] cb 27
                    ld      ($7846),a                       ;[38b9] 32 46 78
                    ld      a,(hl)                          ;[38bc] 7e
                    or      a                               ;[38bd] b7
                    ret     z                               ;[38be] c8
                    cp      $3a                             ;[38bf] fe 3a
                    ret     z                               ;[38c1] c8
                    rst     $08                             ;[38c2] cf
                    inc     l                               ;[38c3] 2c
                    call    $2b1c                           ;[38c4] cd 1c 2b
                    or      a                               ;[38c7] b7
                    jr      nz,$38d6                        ;[38c8] 20 0c
                    ld      a,($783b)                       ;[38ca] 3a 3b 78
                    res     4,a                             ;[38cd] cb a7
                    ld      ($783b),a                       ;[38cf] 32 3b 78
                    ld      ($6800),a                       ;[38d2] 32 00 68
                    ret                                     ;[38d5] c9

                    cp      $01                             ;[38d6] fe 01
                    jp      nz,$1e4a                        ;[38d8] c2 4a 1e
                    ld      a,($783b)                       ;[38db] 3a 3b 78
                    set     4,a                             ;[38de] cb e7
                    ld      ($783b),a                       ;[38e0] 32 3b 78
                    ld      ($6800),a                       ;[38e3] 32 00 68
                    ret                                     ;[38e6] c9

                    ld      c,$c0                           ;[38e7] 0e c0
                    rrc     c                               ;[38e9] cb 09
                    djnz    $38e9                           ;[38eb] 10 fc
                    ld      a,(de)                          ;[38ed] 1a
                    and     c                               ;[38ee] a1
                    ld      b,a                             ;[38ef] 47
                    ld      a,c                             ;[38f0] 79
                    rrc     b                               ;[38f1] cb 08
                    rrc     a                               ;[38f3] cb 0f
                    cp      $03                             ;[38f5] fe 03
                    jr      nz,$38f1                        ;[38f7] 20 f8
                    ld      a,b                             ;[38f9] 78
                    inc     a                               ;[38fa] 3c
                    push    hl                              ;[38fb] e5
                    call    $098d                           ;[38fc] cd 8d 09
                    pop     hl                              ;[38ff] e1
                    jp      $390f                           ;[3900] c3 0f 39
                    ld      b,a                             ;[3903] 47
                    ld      a,(de)                          ;[3904] 1a
                    and     c                               ;[3905] a1
                    ld      (de),a                          ;[3906] 12
                    pop     af                              ;[3907] f1
                    or      a                               ;[3908] b7
                    jp      p,$390f                         ;[3909] f2 0f 39
                    ld      a,(de)                          ;[390c] 1a
                    or      b                               ;[390d] b0
                    ld      (de),a                          ;[390e] 12
                    rst     $08                             ;[390f] cf
                    add     hl,hl                           ;[3910] 29
                    ret                                     ;[3911] c9

;*********************************************************************************************************************
; COPY
;BAS_CODE_COPY          equ     $96

    
BAS_PROC_COPY:
                    di                                      ;[3912] f3
                    push    hl                              ;[3913] e5
                    ld      a,($783b)                       ;[3914] 3a 3b 78
                    bit     3,a                             ;[3917] cb 5f
                    jp      nz,$398e                        ;[3919] c2 8e 39
                    ld      hl,$7000                        ;[391c] 21 00 70
                    ld      c,$10                           ;[391f] 0e 10
                    ld      b,$20                           ;[3921] 06 20
                    ld      a,(hl)                          ;[3923] 7e
                    or      a                               ;[3924] b7
                    jp      p,$392d                         ;[3925] f2 2d 39
                    call    $2c73                           ;[3928] cd 73 2c
                    jr      $3943                           ;[392b] 18 16
                    jp      $3f44                           ;[392d] c3 44 3f
                    nop                                     ;[3930] 00
                    and     $3f                             ;[3931] e6 3f
                    call    $3956                           ;[3933] cd 56 39
                    jr      $3943                           ;[3936] 18 0b
                    and     $3f                             ;[3938] e6 3f
                    bit     5,a                             ;[393a] cb 6f
                    jr      nz,$3940                        ;[393c] 20 02
                    or      $40                             ;[393e] f6 40
                    call    $3aba                           ;[3940] cd ba 3a
                    inc     hl                              ;[3943] 23
                    djnz    $3923                           ;[3944] 10 dd
                    ld      a,$0d                           ;[3946] 3e 0d
                    call    $3aba                           ;[3948] cd ba 3a
                    call    $3af8                           ;[394b] cd f8 3a
                    dec     c                               ;[394e] 0d
                    ld      a,c                             ;[394f] 79
                    or      a                               ;[3950] b7
                    jr      nz,$3921                        ;[3951] 20 ce
                    pop     hl                              ;[3953] e1
                    ei                                      ;[3954] fb
                    ret                                     ;[3955] c9

                    push    af                              ;[3956] f5
                    push    bc                              ;[3957] c5
                    push    de                              ;[3958] d5
                    push    hl                              ;[3959] e5
                    ld      l,a                             ;[395a] 6f
                    ld      h,$00                           ;[395b] 26 00
                    ld      a,$08                           ;[395d] 3e 08
                    call    $3aba                           ;[395f] cd ba 3a
                    ld      b,$04                           ;[3962] 06 04
                    push    hl                              ;[3964] e5
                    pop     de                              ;[3965] d1
                    or      a                               ;[3966] b7
                    adc     hl,de                           ;[3967] ed 5a
                    djnz    $3967                           ;[3969] 10 fc
                    push    hl                              ;[396b] e5
                    pop     bc                              ;[396c] c1
                    ld      hl,$3b94                        ;[396d] 21 94 3b
                    add     hl,bc                           ;[3970] 09
                    ld      a,$ff                           ;[3971] 3e ff
                    call    $3aba                           ;[3973] cd ba 3a
                    ld      b,$05                           ;[3976] 06 05
                    ld      a,(hl)                          ;[3978] 7e
                    inc     hl                              ;[3979] 23
                    call    $3aba                           ;[397a] cd ba 3a
                    djnz    $3978                           ;[397d] 10 f9
                    ld      a,$ff                           ;[397f] 3e ff
                    call    $3aba                           ;[3981] cd ba 3a
                    ld      a,$0f                           ;[3984] 3e 0f
                    call    $3aba                           ;[3986] cd ba 3a
                    pop     hl                              ;[3989] e1
                    pop     de                              ;[398a] d1
                    pop     bc                              ;[398b] c1
                    pop     af                              ;[398c] f1
                    ret                                     ;[398d] c9

                    xor     a                               ;[398e] af
                    ld      ($7ad6),a                       ;[398f] 32 d6 7a
                    ld      ($7ad6),a                       ;[3992] 32 d6 7a
                    ld      a,$08                           ;[3995] 3e 08
                    call    $3aba                           ;[3997] cd ba 3a
                    ld      ix,$7ad2                        ;[399a] dd 21 d2 7a
                    ld      hl,$7000                        ;[399e] 21 00 70
                    ld      de,$0000                        ;[39a1] 11 00 00
                    ld      c,$c0                           ;[39a4] 0e c0
                    call    $3af8                           ;[39a6] cd f8 3a
                    push    hl                              ;[39a9] e5
                    call    $05c9                           ;[39aa] cd c9 05
                    ld      b,$03                           ;[39ad] 06 03
                    ld      a,(hl)                          ;[39af] 7e
                    and     c                               ;[39b0] a1
                    push    bc                              ;[39b1] c5
                    ld      b,a                             ;[39b2] 47
                    rrc     b                               ;[39b3] cb 08
                    rrc     b                               ;[39b5] cb 08
                    rrc     c                               ;[39b7] cb 09
                    rrc     c                               ;[39b9] cb 09
                    ld      a,c                             ;[39bb] 79
                    cp      $03                             ;[39bc] fe 03
                    jp      nz,$39b3                        ;[39be] c2 b3 39
                    ld      a,b                             ;[39c1] 78
                    pop     bc                              ;[39c2] c1
                    cp      $03                             ;[39c3] fe 03
                    jr      z,$39d4                         ;[39c5] 28 0d
                    cp      $02                             ;[39c7] fe 02
                    jr      z,$39d9                         ;[39c9] 28 0e
                    cp      $01                             ;[39cb] fe 01
                    jr      z,$39df                         ;[39cd] 28 10
                    ld      de,$0000                        ;[39cf] 11 00 00
                    jr      $39e3                           ;[39d2] 18 0f
                    ld      de,$e0e0                        ;[39d4] 11 e0 e0
                    jr      $39e3                           ;[39d7] 18 0a
                    ld      d,$40                           ;[39d9] 16 40
                    ld      e,$a0                           ;[39db] 1e a0
                    jr      $39e3                           ;[39dd] 18 04
                    ld      d,$a0                           ;[39df] 16 a0
                    ld      e,$40                           ;[39e1] 1e 40
                    ld      a,(ix+$00)                      ;[39e3] dd 7e 00
                    srl     a                               ;[39e6] cb 3f
                    srl     a                               ;[39e8] cb 3f
                    srl     a                               ;[39ea] cb 3f
                    push    hl                              ;[39ec] e5
                    ld      hl,$7ad3                        ;[39ed] 21 d3 7a
                    call    $3a6a                           ;[39f0] cd 6a 3a
                    pop     hl                              ;[39f3] e1
                    or      d                               ;[39f4] b2
                    ld      (ix+$00),a                      ;[39f5] dd 77 00
                    ld      a,(ix+$02)                      ;[39f8] dd 7e 02
                    srl     a                               ;[39fb] cb 3f
                    srl     a                               ;[39fd] cb 3f
                    srl     a                               ;[39ff] cb 3f
                    push    hl                              ;[3a01] e5
                    ld      hl,$7ad5                        ;[3a02] 21 d5 7a
                    call    $3a6a                           ;[3a05] cd 6a 3a
                    pop     hl                              ;[3a08] e1
                    or      e                               ;[3a09] b3
                    ld      (ix+$02),a                      ;[3a0a] dd 77 02
                    ld      a,$20                           ;[3a0d] 3e 20
                    add     l                               ;[3a0f] 85
                    ld      l,a                             ;[3a10] 6f
                    ld      a,$00                           ;[3a11] 3e 00
                    adc     h                               ;[3a13] 8c
                    ld      h,a                             ;[3a14] 67
                    djnz    $3a67                           ;[3a15] 10 50
                    call    $3a73                           ;[3a17] cd 73 3a
                    pop     hl                              ;[3a1a] e1
                    srl     c                               ;[3a1b] cb 39
                    srl     c                               ;[3a1d] cb 39
                    ld      a,c                             ;[3a1f] 79
                    or      a                               ;[3a20] b7
                    jr      nz,$39a6                        ;[3a21] 20 83
                    inc     hl                              ;[3a23] 23
                    ld      a,l                             ;[3a24] 7d
                    and     $1f                             ;[3a25] e6 1f
                    jp      nz,$39a4                        ;[3a27] c2 a4 39
                    call    SYS_PRINT_CRLF                           ;[3a2a] cd e2 3a
                    ld      a,($7ad6)                       ;[3a2d] 3a d6 7a
                    inc     a                               ;[3a30] 3c
                    cp      $03                             ;[3a31] fe 03
                    jr      nz,$3a36                        ;[3a33] 20 01
                    xor     a                               ;[3a35] af
                    ld      ($7ad6),a                       ;[3a36] 32 d6 7a
                    jr      nz,$3a3f                        ;[3a39] 20 04
                    ld      a,$40                           ;[3a3b] 3e 40
                    jr      $3a41                           ;[3a3d] 18 02
                    ld      a,$20                           ;[3a3f] 3e 20
                    add     l                               ;[3a41] 85
                    ld      l,a                             ;[3a42] 6f
                    ld      a,$00                           ;[3a43] 3e 00
                    adc     h                               ;[3a45] 8c
                    ld      h,a                             ;[3a46] 67
                    cp      $78                             ;[3a47] fe 78
                    jp      nc,$3a5f                        ;[3a49] d2 5f 3a
                    cp      $77                             ;[3a4c] fe 77
                    jp      nz,$39a4                        ;[3a4e] c2 a4 39
                    ld      a,l                             ;[3a51] 7d
                    cp      $e0                             ;[3a52] fe e0
                    jp      c,$39a4                         ;[3a54] da a4 39
                    ld      a,$ff                           ;[3a57] 3e ff
                    ld      ($7ad6),a                       ;[3a59] 32 d6 7a
                    jp      $39a4                           ;[3a5c] c3 a4 39
                    ld      a,$0f                           ;[3a5f] 3e 0f
                    call    $3aba                           ;[3a61] cd ba 3a
                    pop     hl                              ;[3a64] e1
                    ei                                      ;[3a65] fb
                    ret                                     ;[3a66] c9

                    jp      $39af                           ;[3a67] c3 af 39
                    jp      nc,$3a70                        ;[3a6a] d2 70 3a
                    set     0,(hl)                          ;[3a6d] cb c6
                    ret                                     ;[3a6f] c9

                    res     0,(hl)                          ;[3a70] cb 86
                    ret                                     ;[3a72] c9

                    call    $3a85                           ;[3a73] cd 85 3a
                    inc     ix                              ;[3a76] dd 23
                    inc     ix                              ;[3a78] dd 23
                    call    $3a85                           ;[3a7a] cd 85 3a
                    dec     ix                              ;[3a7d] dd 2b
                    dec     ix                              ;[3a7f] dd 2b
                    call    $3a85                           ;[3a81] cd 85 3a
                    ret                                     ;[3a84] c9

                    ld      a,(ix+$01)                      ;[3a85] dd 7e 01
                    rrc     a                               ;[3a88] cb 0f
                    ld      a,(ix+$00)                      ;[3a8a] dd 7e 00
                    push    af                              ;[3a8d] f5
                    ld      a,($7ad6)                       ;[3a8e] 3a d6 7a
                    cp      $02                             ;[3a91] fe 02
                    jr      z,$3ab2                         ;[3a93] 28 1d
                    cp      $01                             ;[3a95] fe 01
                    jr      z,$3aaf                         ;[3a97] 28 16
                    pop     af                              ;[3a99] f1
                    rla                                     ;[3a9a] 17
                    push    af                              ;[3a9b] f5
                    ld      a,($7ad6)                       ;[3a9c] 3a d6 7a
                    cp      $ff                             ;[3a9f] fe ff
                    jr      nz,$3aa8                        ;[3aa1] 20 05
                    pop     af                              ;[3aa3] f1
                    and     $07                             ;[3aa4] e6 07
                    jr      $3aa9                           ;[3aa6] 18 01
                    pop     af                              ;[3aa8] f1
                    or      $80                             ;[3aa9] f6 80
                    call    $3aba                           ;[3aab] cd ba 3a
                    ret                                     ;[3aae] c9

                    pop     af                              ;[3aaf] f1
                    jr      $3a9b                           ;[3ab0] 18 e9
                    pop     af                              ;[3ab2] f1
                    rra                                     ;[3ab3] 1f
                    jr      $3a9b                           ;[3ab4] 18 e5
                    
; --- A                    
                    or      a                               ;[3ab6] b7
                    jp      m,$3ad8                         ;[3ab7] fa d8 3a
                    push    af                              ;[3aba] f5
                    call    $3ae8                           ;[3abb] cd e8 3a
                    jp      nc,$3ac4                        ;[3abe] d2 c4 3a
                    pop     af                              ;[3ac1] f1
                    scf                                     ;[3ac2] 37
                    ret                                     ;[3ac3] c9

                    in      a,($00)                         ;[3ac4] db 00
                    bit     0,a                             ;[3ac6] cb 47
                    jr      nz,$3abb                        ;[3ac8] 20 f1
                    pop     af                              ;[3aca] f1
                    out     ($0e),a                         ;[3acb] d3 0e
                    out     ($0d),a                         ;[3acd] d3 0d
                    cp      $0d                             ;[3acf] fe 0d
                    scf                                     ;[3ad1] 37
                    ccf                                     ;[3ad2] 3f
                    ret     nz                              ;[3ad3] c0
                    ld      a,$0a                           ;[3ad4] 3e 0a
                    jr      $3aba                           ;[3ad6] 18 e2
                    bit     6,a                             ;[3ad8] cb 77
                    jp      z,$2c73                         ;[3ada] ca 73 2c
                    and     $3f                             ;[3add] e6 3f
                    jp      $3956                           ;[3adf] c3 56 39


;SEND CR-LF TO PRINTER
;A routine located at 03AE2 hex may be used to send a carriage return and line feed combination to the printer.
;No registers need be set up before calling, but all registers are disturbed. If the break key is pressed while
;printing occurs (or while the printer driver is waiting for the printer to signal 'ready'), the routine will return
;with the carry flag set:
;       CALL 3AE2H      ;go send CR-LF to printer
;       JP C,BRK        ;check if BREAK key is pressed
;       ... ;apparently not
SYS_PRINT_CRLF
                    ld      a,$0d                           ;[3ae2] 3e 0d
                    call    $3aba                           ;[3ae4] cd ba 3a
                    ret                                     ;[3ae7] c9

                    or      a                               ;[3ae8] b7
                    ld      a,($68fd)                       ;[3ae9] 3a fd 68
                    bit     2,a                             ;[3aec] cb 57
                    ret     nz                              ;[3aee] c0
                    ld      a,($68df)                       ;[3aef] 3a df 68
                    scf                                     ;[3af2] 37
                    bit     2,a                             ;[3af3] cb 57
                    ret     z                               ;[3af5] c8
                    ccf                                     ;[3af6] 3f
                    ret                                     ;[3af7] c9

                    call    $3ae8                           ;[3af8] cd e8 3a
                    ret     nc                              ;[3afb] d0
                    pop     hl                              ;[3afc] e1
                    pop     hl                              ;[3afd] e1
                    ld      a,($7839)                       ;[3afe] 3a 39 78
                    and     $b7                             ;[3b01] e6 b7
                    ld      ($7839),a                       ;[3b03] 32 39 78
                    ld      a,$01                           ;[3b06] 3e 01
                    ei                                      ;[3b08] fb
                    jp      $1da0                           ;[3b09] c3 a0 1d
                    ld      a,($789c)                       ;[3b0c] 3a 9c 78
                    or      a                               ;[3b0f] b7
                    jp      nz,$2164                        ;[3b10] c2 64 21
                    ld      a,($7aaf)                       ;[3b13] 3a af 7a
                    or      a                               ;[3b16] b7
                    jr      nz,$3b13                        ;[3b17] 20 fa
                    jp      $2164                           ;[3b19] c3 64 21
                    ld      a,($7aaf)                       ;[3b1c] 3a af 7a
                    or      a                               ;[3b1f] b7
                    ret     nz                              ;[3b20] c0
                    ld      a,($78a6)                       ;[3b21] 3a a6 78
                    ret                                     ;[3b24] c9

                    ld      hl,$68ef                        ;[3b25] 21 ef 68
                    bit     4,(hl)                          ;[3b28] cb 66
                    jr      nz,$3b44                        ;[3b2a] 20 18
                    call    $3b48                           ;[3b2c] cd 48 3b
                    bit     4,(hl)                          ;[3b2f] cb 66
                    jr      z,$3b2f                         ;[3b31] 28 fc
                    call    $3b48                           ;[3b33] cd 48 3b
                    call    $3af8                           ;[3b36] cd f8 3a
                    bit     4,(hl)                          ;[3b39] cb 66
                    jr      nz,$3b36                        ;[3b3b] 20 f9
                    call    $3b48                           ;[3b3d] cd 48 3b
                    bit     4,(hl)                          ;[3b40] cb 66
                    jr      z,$3b40                         ;[3b42] 28 fc
                    ld      hl,$ffff                        ;[3b44] 21 ff ff
                    ret                                     ;[3b47] c9

                    ld      hl,$07ff                        ;[3b48] 21 ff 07
                    dec     hl                              ;[3b4b] 2b
                    ld      a,l                             ;[3b4c] 7d
                    or      h                               ;[3b4d] b4
                    jr      nz,$3b4b                        ;[3b4e] 20 fb
                    ld      hl,$68ef                        ;[3b50] 21 ef 68
                    ret                                     ;[3b53] c9

                    call    $3511                           ;[3b54] cd 11 35
                    ret                                     ;[3b57] c9

                    di                                      ;[3b58] f3
                    inc     hl                              ;[3b59] 23
                    ld      c,$f2                           ;[3b5a] 0e f2
                    call    $3558                           ;[3b5c] cd 58 35
                    jp      c,$3afe                         ;[3b5f] da fe 3a
                    dec     hl                              ;[3b62] 2b
                    rst     $08                             ;[3b63] cf
                    ld      ($2ccf),hl                      ;[3b64] 22 cf 2c
                    ret                                     ;[3b67] c9

                    di                                      ;[3b68] f3
                    inc     hl                              ;[3b69] 23
                    call    $358c                           ;[3b6a] cd 8c 35
                    dec     hl                              ;[3b6d] 2b
                    rst     $08                             ;[3b6e] cf
                    ld      ($2ccf),hl                      ;[3b6f] 22 cf 2c
                    push    hl                              ;[3b72] e5
                    call    $35b1                           ;[3b73] cd b1 35
                    ld      hl,$3842                        ;[3b76] 21 42 38
                    call    $37f4                           ;[3b79] cd f4 37
                    call    $35e7                           ;[3b7c] cd e7 35
                    ld      a,($7ad2)                       ;[3b7f] 3a d2 7a
                    cp      $f2                             ;[3b82] fe f2
                    jr      nz,$3b7c                        ;[3b84] 20 f6
                    pop     hl                              ;[3b86] e1
                    ret                                     ;[3b87] c9

                    call    $3775                           ;[3b88] cd 75 37
                    cp      $0d                             ;[3b8b] fe 0d
                    ret     nz                              ;[3b8d] c0
                    push    af                              ;[3b8e] f5
                    call    $20f9                           ;[3b8f] cd f9 20
                    pop     af                              ;[3b92] f1
                    ret                                     ;[3b93] c9

                    pop     bc                              ;[3b94] c1
                    cp      (hl)                            ;[3b95] be
                    and     d                               ;[3b96] a2
                    xor     (hl)                            ;[3b97] ae
                    or      c                               ;[3b98] b1
                    add     e                               ;[3b99] 83
                    defb    $ed, $ee                        ;[3b9a] ed ee
                    defb    $ed, $83                        ;[3b9c] ed 83
                    add     b                               ;[3b9e] 80
                    or      (hl)                            ;[3b9f] b6
                    or      (hl)                            ;[3ba0] b6
                    or      (hl)                            ;[3ba1] b6
                    pop     bc                              ;[3ba2] c1
                    pop     bc                              ;[3ba3] c1
                    cp      (hl)                            ;[3ba4] be
                    cp      (hl)                            ;[3ba5] be
                    cp      (hl)                            ;[3ba6] be
                    defb    $dd, $80                        ;[3ba7] dd 80
                    cp      (hl)                            ;[3ba9] be
                    cp      (hl)                            ;[3baa] be
                    cp      (hl)                            ;[3bab] be
                    pop     bc                              ;[3bac] c1
                    add     b                               ;[3bad] 80
                    or      (hl)                            ;[3bae] b6
                    or      (hl)                            ;[3baf] b6
                    or      (hl)                            ;[3bb0] b6
                    cp      (hl)                            ;[3bb1] be
                    add     b                               ;[3bb2] 80
                    or      $f6                             ;[3bb3] f6 f6
                    or      $fe                             ;[3bb5] f6 fe
                    pop     bc                              ;[3bb7] c1
                    cp      (hl)                            ;[3bb8] be
                    cp      (hl)                            ;[3bb9] be
                    xor     (hl)                            ;[3bba] ae
                    adc     h                               ;[3bbb] 8c
                    add     b                               ;[3bbc] 80
                    rst     $30                             ;[3bbd] f7
                    rst     $30                             ;[3bbe] f7
                    rst     $30                             ;[3bbf] f7
                    add     b                               ;[3bc0] 80
                    rst     $38                             ;[3bc1] ff
                    cp      (hl)                            ;[3bc2] be
                    add     b                               ;[3bc3] 80
                    cp      (hl)                            ;[3bc4] be
                    rst     $38                             ;[3bc5] ff
                    rst     $18                             ;[3bc6] df
                    cp      a                               ;[3bc7] bf
                    cp      a                               ;[3bc8] bf
                    ret     nz                              ;[3bc9] c0
                    cp      $80                             ;[3bca] fe 80
                    rst     $30                             ;[3bcc] f7
                    ex      de,hl                           ;[3bcd] eb
                    defb    $dd, $be, $80                   ;[3bce] dd be 80
                    cp      a                               ;[3bd1] bf
                    cp      a                               ;[3bd2] bf
                    cp      a                               ;[3bd3] bf
                    cp      a                               ;[3bd4] bf
                    add     b                               ;[3bd5] 80
                    defb    $fd, $f3                        ;[3bd6] fd f3
                    defb    $fd, $80                        ;[3bd8] fd 80
                    add     b                               ;[3bda] 80
                    defb    $fd, $fb                        ;[3bdb] fd fb
                    rst     $30                             ;[3bdd] f7
                    add     b                               ;[3bde] 80
                    pop     bc                              ;[3bdf] c1
                    cp      (hl)                            ;[3be0] be
                    cp      (hl)                            ;[3be1] be
                    cp      (hl)                            ;[3be2] be
                    pop     bc                              ;[3be3] c1
                    add     b                               ;[3be4] 80
                    or      $f6                             ;[3be5] f6 f6
                    or      $f9                             ;[3be7] f6 f9
                    pop     bc                              ;[3be9] c1
                    cp      (hl)                            ;[3bea] be
                    xor     (hl)                            ;[3beb] ae
                    sbc     $a1                             ;[3bec] de a1
                    add     b                               ;[3bee] 80
                    or      $e6                             ;[3bef] f6 e6
                    sub     $b9                             ;[3bf1] d6 b9
                    exx                                     ;[3bf3] d9
                    or      (hl)                            ;[3bf4] b6
                    or      (hl)                            ;[3bf5] b6
                    or      (hl)                            ;[3bf6] b6
                    call    $fefe                           ;[3bf7] cd fe fe
                    add     b                               ;[3bfa] 80
                    cp      $fe                             ;[3bfb] fe fe
                    ret     nz                              ;[3bfd] c0
                    cp      a                               ;[3bfe] bf
                    cp      a                               ;[3bff] bf
                    cp      a                               ;[3c00] bf
                    ret     nz                              ;[3c01] c0
                    ret     m                               ;[3c02] f8
                    rst     $20                             ;[3c03] e7
                    sbc     a                               ;[3c04] 9f
                    rst     $20                             ;[3c05] e7
                    ret     m                               ;[3c06] f8
                    add     b                               ;[3c07] 80
                    rst     $18                             ;[3c08] df
                    rst     $20                             ;[3c09] e7
                    rst     $18                             ;[3c0a] df
                    add     b                               ;[3c0b] 80
                    sbc     h                               ;[3c0c] 9c
                    defb    $ed, $f7                        ;[3c0d] ed f7
                    ex      de,hl                           ;[3c0f] eb
                    sbc     h                               ;[3c10] 9c
                    call    m,$87fb                         ;[3c11] fc fb 87
                    ei                                      ;[3c14] fb
                    call    m,$ae9e                         ;[3c15] fc 9e ae
                    or      (hl)                            ;[3c18] b6
                    cp      d                               ;[3c19] ba
                    cp      h                               ;[3c1a] bc
                    rst     $38                             ;[3c1b] ff
                    add     b                               ;[3c1c] 80
                    cp      (hl)                            ;[3c1d] be
                    cp      (hl)                            ;[3c1e] be
                    rst     $38                             ;[3c1f] ff
                    defb    $fd, $fb                        ;[3c20] fd fb
                    rst     $30                             ;[3c22] f7
                    rst     $28                             ;[3c23] ef
                    rst     $18                             ;[3c24] df
                    rst     $38                             ;[3c25] ff
                    cp      (hl)                            ;[3c26] be
                    cp      (hl)                            ;[3c27] be
                    add     b                               ;[3c28] 80
                    rst     $38                             ;[3c29] ff
                    ei                                      ;[3c2a] fb
                    defb    $fd, $80                        ;[3c2b] fd 80
                    defb    $fd, $fb                        ;[3c2d] fd fb
                    rst     $30                             ;[3c2f] f7
                    ex      (sp),hl                         ;[3c30] e3
                    sub     $f7                             ;[3c31] d6 f7
                    rst     $30                             ;[3c33] f7
                    rst     $38                             ;[3c34] ff
                    rst     $38                             ;[3c35] ff
                    rst     $38                             ;[3c36] ff
                    rst     $38                             ;[3c37] ff
                    rst     $38                             ;[3c38] ff
                    rst     $38                             ;[3c39] ff
                    rst     $38                             ;[3c3a] ff
                    and     b                               ;[3c3b] a0
                    rst     $38                             ;[3c3c] ff
                    rst     $38                             ;[3c3d] ff
                    rst     $38                             ;[3c3e] ff
                    ret     m                               ;[3c3f] f8
                    rst     $38                             ;[3c40] ff
                    ret     m                               ;[3c41] f8
                    rst     $38                             ;[3c42] ff
                    ex      de,hl                           ;[3c43] eb
                    add     b                               ;[3c44] 80
                    ex      de,hl                           ;[3c45] eb
                    add     b                               ;[3c46] 80
                    defb $ed, $db                           ;[3c47] ed db
                    sub     $80                             ;[3c49] d6 80
                    sub     $ed                             ;[3c4b] d6 ed
                    exx                                     ;[3c4d] d9
                    jp      (hl)                            ;[3c4e] e9
                    rst     $30                             ;[3c4f] f7
                    set     1,l                             ;[3c50] cb cd
                    ret                                     ;[3c52] c9

                    sub     $a9                             ;[3c53] d6 a9
                    rst     $18                             ;[3c55] df
                    xor     a                               ;[3c56] af
                    rst     $30                             ;[3c57] f7
                    ret     m                               ;[3c58] f8
                    call    m,$ffff                         ;[3c59] fc ff ff
                    rst     $38                             ;[3c5c] ff
                    ex      (sp),hl                         ;[3c5d] e3
                    cp      (ix-$01)                        ;[3c5e] dd be ff
                    rst     $38                             ;[3c61] ff
                    cp      (hl)                            ;[3c62] be
                    ex      (sp),ix                         ;[3c63] dd e3
                    rst     $38                             ;[3c65] ff
                    sub     $e3                             ;[3c66] d6 e3
                    add     b                               ;[3c68] 80
                    ex      (sp),hl                         ;[3c69] e3
                    push    de                              ;[3c6a] d5
                    rst     $30                             ;[3c6b] f7
                    rst     $30                             ;[3c6c] f7
                    pop     bc                              ;[3c6d] c1
                    rst     $30                             ;[3c6e] f7
                    rst     $30                             ;[3c6f] f7
                    rst     $18                             ;[3c70] df
                    rst     $00                             ;[3c71] c7
                    rst     $30                             ;[3c72] f7
                    rst     $38                             ;[3c73] ff
                    rst     $38                             ;[3c74] ff
                    rst     $30                             ;[3c75] f7
                    rst     $30                             ;[3c76] f7
                    rst     $30                             ;[3c77] f7
                    rst     $30                             ;[3c78] f7
                    rst     $30                             ;[3c79] f7
                    rst     $38                             ;[3c7a] ff
                    sbc     a                               ;[3c7b] 9f
                    sbc     a                               ;[3c7c] 9f
                    rst     $38                             ;[3c7d] ff
                    rst     $38                             ;[3c7e] ff
                    rst     $18                             ;[3c7f] df
                    rst     $28                             ;[3c80] ef
                    rst     $30                             ;[3c81] f7
                    ei                                      ;[3c82] fb
                    defb    $fd, $c1                        ;[3c83] fd c1
                    xor     (hl)                            ;[3c85] ae
                    or      (hl)                            ;[3c86] b6
                    cp      d                               ;[3c87] ba
                    pop     bc                              ;[3c88] c1
                    rst     $38                             ;[3c89] ff
                    cp      l                               ;[3c8a] bd
                    add     b                               ;[3c8b] 80
                    cp      a                               ;[3c8c] bf
                    rst     $38                             ;[3c8d] ff
                    sbc     l                               ;[3c8e] 9d
                    xor     (hl)                            ;[3c8f] ae
                    or      (hl)                            ;[3c90] b6
                    cp      d                               ;[3c91] ba
                    cp      l                               ;[3c92] bd
                    defb    $dd, $bb                        ;[3c93] dd bb
                    cp      e                               ;[3c95] bb
                    cp      e                               ;[3c96] bb
                    ret                                     ;[3c97] c9

                    rst     $20                             ;[3c98] e7
                    ex      de,hl                           ;[3c99] eb
                    defb    $ed, $80                        ;[3c9a] ed 80
                    rst     $28                             ;[3c9c] ef
                    ret     c                               ;[3c9d] d8
                    cp      d                               ;[3c9e] ba
                    jp      c,$c6da                         ;[3c9f] da da c6
                    pop     bc                              ;[3ca2] c1
                    or      (hl)                            ;[3ca3] b6
                    or      (hl)                            ;[3ca4] b6
                    or      (hl)                            ;[3ca5] b6
                    rst     $08                             ;[3ca6] cf
                    call    m,$86fe                         ;[3ca7] fc fe 86
                    jp      m,$c9fc                         ;[3caa] fa fc c9
                    or      (hl)                            ;[3cad] b6
                    or      (hl)                            ;[3cae] b6
                    or      (hl)                            ;[3caf] b6
                    ret                                     ;[3cb0] c9

                    ld      sp,hl                           ;[3cb1] f9
                    or      (hl)                            ;[3cb2] b6
                    or      (hl)                            ;[3cb3] b6
                    or      (hl)                            ;[3cb4] b6
                    pop     bc                              ;[3cb5] c1
                    rst     $38                             ;[3cb6] ff
                    ret                                     ;[3cb7] c9

                    ret                                     ;[3cb8] c9

                    rst     $38                             ;[3cb9] ff
                    rst     $38                             ;[3cba] ff
                    cp      a                               ;[3cbb] bf
                    call    nz,$ffe4                        ;[3cbc] c4 e4 ff
                    rst     $38                             ;[3cbf] ff
                    rst     $30                             ;[3cc0] f7
                    ex      de,hl                           ;[3cc1] eb
                    defb    $dd, $de, $de                   ;[3cc2] dd de de
                    ex      de,hl                           ;[3cc5] eb
                    ex      de,hl                           ;[3cc6] eb
                    ex      de,hl                           ;[3cc7] eb
                    ex      de,hl                           ;[3cc8] eb
                    ex      de,hl                           ;[3cc9] eb
                    sbc     $de                             ;[3cca] de de
                    defb    $dd, $eb                        ;[3ccc] dd eb
                    rst     $30                             ;[3cce] f7
                    defb    $fd, $fe, $a6                   ;[3ccf] fd fe a6
                    jp      m,$cbfd                         ;[3cd2] fa fd cb
                    dec     sp                              ;[3cd5] 3b
                    inc     e                               ;[3cd6] 1c
                    ld      a,(hl)                          ;[3cd7] 7e
                    inc     hl                              ;[3cd8] 23
                    or      a                               ;[3cd9] b7
                    jp      p,$3cd7                         ;[3cda] f2 d7 3c
                    dec     e                               ;[3cdd] 1d
                    jr      nz,$3cd7                        ;[3cde] 20 f7
                    and     $7f                             ;[3ce0] e6 7f
                    call    $032a                           ;[3ce2] cd 2a 03
                    ld      a,(hl)                          ;[3ce5] 7e
                    inc     hl                              ;[3ce6] 23
                    or      a                               ;[3ce7] b7
                    jp      p,$3ce2                         ;[3ce8] f2 e2 3c
                    ret                                     ;[3ceb] c9

                    adc     $45                             ;[3cec] ce 45
                    ld      e,b                             ;[3cee] 58
                    ld      d,h                             ;[3cef] 54
                    jr      nz,$3d49                        ;[3cf0] 20 57
                    ld      c,c                             ;[3cf2] 49
                    ld      d,h                             ;[3cf3] 54
                    ld      c,b                             ;[3cf4] 48
                    ld      c,a                             ;[3cf5] 4f
                    ld      d,l                             ;[3cf6] 55
                    ld      d,h                             ;[3cf7] 54
                    jr      nz,$3d40                        ;[3cf8] 20 46
                    ld      c,a                             ;[3cfa] 4f
                    ld      d,d                             ;[3cfb] 52
                    out     ($59),a                         ;[3cfc] d3 59
                    ld      c,(hl)                          ;[3cfe] 4e
                    ld      d,h                             ;[3cff] 54
                    ld      b,c                             ;[3d00] 41
                    ld      e,b                             ;[3d01] 58
                    jp      nc,$5445                        ;[3d02] d2 45 54
                    daa                                     ;[3d05] 27
                    ld      c,(hl)                          ;[3d06] 4e
                    jr      nz,$3d60                        ;[3d07] 20 57
                    ld      c,c                             ;[3d09] 49
                    ld      d,h                             ;[3d0a] 54
                    ld      c,b                             ;[3d0b] 48
                    ld      c,a                             ;[3d0c] 4f
                    ld      d,l                             ;[3d0d] 55
                    ld      d,h                             ;[3d0e] 54
                    jr      nz,$3d58                        ;[3d0f] 20 47
                    ld      c,a                             ;[3d11] 4f
                    ld      d,e                             ;[3d12] 53
                    ld      d,l                             ;[3d13] 55
                    ld      b,d                             ;[3d14] 42
                    rst     $08                             ;[3d15] cf
                    ld      d,l                             ;[3d16] 55
                    ld      d,h                             ;[3d17] 54
                    jr      nz,$3d69                        ;[3d18] 20 4f
                    ld      b,(hl)                          ;[3d1a] 46
                    jr      nz,$3d61                        ;[3d1b] 20 44
                    ld      b,c                             ;[3d1d] 41
                    ld      d,h                             ;[3d1e] 54
                    ld      b,c                             ;[3d1f] 41
                    add     $55                             ;[3d20] c6 55
                    ld      c,(hl)                          ;[3d22] 4e
                    ld      b,e                             ;[3d23] 43
                    ld      d,h                             ;[3d24] 54
                    ld      c,c                             ;[3d25] 49
                    ld      c,a                             ;[3d26] 4f
                    ld      c,(hl)                          ;[3d27] 4e
                    jr      nz,$3d6d                        ;[3d28] 20 43
                    ld      c,a                             ;[3d2a] 4f
                    ld      b,h                             ;[3d2b] 44
                    ld      b,l                             ;[3d2c] 45
                    rst     $08                             ;[3d2d] cf
                    ld      d,(hl)                          ;[3d2e] 56
                    ld      b,l                             ;[3d2f] 45
                    ld      d,d                             ;[3d30] 52
                    ld      b,(hl)                          ;[3d31] 46
                    ld      c,h                             ;[3d32] 4c
                    ld      c,a                             ;[3d33] 4f
                    ld      d,a                             ;[3d34] 57
                    rst     $08                             ;[3d35] cf
                    ld      d,l                             ;[3d36] 55
                    ld      d,h                             ;[3d37] 54
                    jr      nz,$3d89                        ;[3d38] 20 4f
                    ld      b,(hl)                          ;[3d3a] 46
                    jr      nz,$3d8a                        ;[3d3b] 20 4d
                    ld      b,l                             ;[3d3d] 45
                    ld      c,l                             ;[3d3e] 4d
                    ld      c,a                             ;[3d3f] 4f
                    ld      d,d                             ;[3d40] 52
                    ld      e,c                             ;[3d41] 59
                    push    de                              ;[3d42] d5
                    ld      c,(hl)                          ;[3d43] 4e
                    ld      b,h                             ;[3d44] 44
                    ld      b,l                             ;[3d45] 45
                    ld      b,(hl)                          ;[3d46] 46
                    daa                                     ;[3d47] 27
                    ld      b,h                             ;[3d48] 44
                    jr      nz,$3d9e                        ;[3d49] 20 53
                    ld      d,h                             ;[3d4b] 54
                    ld      b,c                             ;[3d4c] 41
                    ld      d,h                             ;[3d4d] 54
                    ld      b,l                             ;[3d4e] 45
                    ld      c,l                             ;[3d4f] 4d
                    ld      b,l                             ;[3d50] 45
                    ld      c,(hl)                          ;[3d51] 4e
                    ld      d,h                             ;[3d52] 54
                    jp      nz,$4441                        ;[3d53] c2 41 44
                    jr      nz,$3dab                        ;[3d56] 20 53
                    ld      d,l                             ;[3d58] 55
                    ld      b,d                             ;[3d59] 42
                    ld      d,e                             ;[3d5a] 53
                    ld      b,e                             ;[3d5b] 43
                    ld      d,d                             ;[3d5c] 52
                    ld      c,c                             ;[3d5d] 49
                    ld      d,b                             ;[3d5e] 50
                    ld      d,h                             ;[3d5f] 54
                    jp      nc,$4445                        ;[3d60] d2 45 44
                    ld      c,c                             ;[3d63] 49
                    ld      c,l                             ;[3d64] 4d
                    daa                                     ;[3d65] 27
                    ld      b,h                             ;[3d66] 44
                    jr      nz,$3daa                        ;[3d67] 20 41
                    ld      d,d                             ;[3d69] 52
                    ld      d,d                             ;[3d6a] 52
                    ld      b,c                             ;[3d6b] 41
                    ld      e,c                             ;[3d6c] 59
                    call    nz,$5649                        ;[3d6d] c4 49 56
                    ld      c,c                             ;[3d70] 49
                    ld      d,e                             ;[3d71] 53
                    ld      c,c                             ;[3d72] 49
                    ld      c,a                             ;[3d73] 4f
                    ld      c,(hl)                          ;[3d74] 4e
                    jr      nz,$3db9                        ;[3d75] 20 42
                    ld      e,c                             ;[3d77] 59
                    jr      nz,$3dd4                        ;[3d78] 20 5a
                    ld      b,l                             ;[3d7a] 45
                    ld      d,d                             ;[3d7b] 52
                    ld      c,a                             ;[3d7c] 4f
                    ret                                     ;[3d7d] c9

                    ld      c,h                             ;[3d7e] 4c
                    ld      c,h                             ;[3d7f] 4c
                    ld      b,l                             ;[3d80] 45
                    ld      b,a                             ;[3d81] 47
                    ld      b,c                             ;[3d82] 41
                    ld      c,h                             ;[3d83] 4c
                    jr      nz,$3dca                        ;[3d84] 20 44
                    ld      c,c                             ;[3d86] 49
                    ld      d,d                             ;[3d87] 52
                    ld      b,l                             ;[3d88] 45
                    ld      b,e                             ;[3d89] 43
                    ld      d,h                             ;[3d8a] 54
                    call    nc,$5059                        ;[3d8b] d4 59 50
                    ld      b,l                             ;[3d8e] 45
                    jr      nz,$3dde                        ;[3d8f] 20 4d
                    ld      c,c                             ;[3d91] 49
                    ld      d,e                             ;[3d92] 53
                    ld      c,l                             ;[3d93] 4d
                    ld      b,c                             ;[3d94] 41
                    ld      d,h                             ;[3d95] 54
                    ld      b,e                             ;[3d96] 43
                    ld      c,b                             ;[3d97] 48
                    rst     $08                             ;[3d98] cf
                    ld      d,l                             ;[3d99] 55
                    ld      d,h                             ;[3d9a] 54
                    jr      nz,$3dec                        ;[3d9b] 20 4f
                    ld      b,(hl)                          ;[3d9d] 46
                    jr      nz,$3df3                        ;[3d9e] 20 53
                    ld      d,b                             ;[3da0] 50
                    ld      b,c                             ;[3da1] 41
                    ld      b,e                             ;[3da2] 43
                    ld      b,l                             ;[3da3] 45
                    out     ($54),a                         ;[3da4] d3 54
                    ld      d,d                             ;[3da6] 52
                    ld      c,c                             ;[3da7] 49
                    ld      c,(hl)                          ;[3da8] 4e
                    ld      b,a                             ;[3da9] 47
                    jr      nz,$3e00                        ;[3daa] 20 54
                    ld      c,a                             ;[3dac] 4f
                    ld      c,a                             ;[3dad] 4f
                    jr      nz,$3dfc                        ;[3dae] 20 4c
                    ld      c,a                             ;[3db0] 4f
                    ld      c,(hl)                          ;[3db1] 4e
                    ld      b,a                             ;[3db2] 47
                    add     $4f                             ;[3db3] c6 4f
                    ld      d,d                             ;[3db5] 52
                    ld      c,l                             ;[3db6] 4d
                    ld      d,l                             ;[3db7] 55
                    ld      c,h                             ;[3db8] 4c
                    ld      b,c                             ;[3db9] 41
                    jr      nz,$3e10                        ;[3dba] 20 54
                    ld      c,a                             ;[3dbc] 4f
                    ld      c,a                             ;[3dbd] 4f
                    jr      nz,$3e03                        ;[3dbe] 20 43
                    ld      c,a                             ;[3dc0] 4f
                    ld      c,l                             ;[3dc1] 4d
                    ld      d,b                             ;[3dc2] 50
                    ld      c,h                             ;[3dc3] 4c
                    ld      b,l                             ;[3dc4] 45
                    ld      e,b                             ;[3dc5] 58
                    jp      $4e41                           ;[3dc6] c3 41 4e
                    daa                                     ;[3dc9] 27
                    ld      d,h                             ;[3dca] 54
                    jr      nz,$3e10                        ;[3dcb] 20 43
                    ld      c,a                             ;[3dcd] 4f
                    ld      c,(hl)                          ;[3dce] 4e
                    ld      d,h                             ;[3dcf] 54
                    adc     $4f                             ;[3dd0] ce 4f
                    jr      nz,$3e26                        ;[3dd2] 20 52
                    ld      b,l                             ;[3dd4] 45
                    ld      d,e                             ;[3dd5] 53
                    ld      d,l                             ;[3dd6] 55
                    ld      c,l                             ;[3dd7] 4d
                    ld      b,l                             ;[3dd8] 45
                    jp      nc,$5345                        ;[3dd9] d2 45 53
                    ld      d,l                             ;[3ddc] 55
                    ld      c,l                             ;[3ddd] 4d
                    ld      b,l                             ;[3dde] 45
                    jr      nz,$3e38                        ;[3ddf] 20 57
                    ld      c,c                             ;[3de1] 49
                    ld      d,h                             ;[3de2] 54
                    ld      c,b                             ;[3de3] 48
                    ld      c,a                             ;[3de4] 4f
                    ld      d,l                             ;[3de5] 55
                    ld      d,h                             ;[3de6] 54
                    push    de                              ;[3de7] d5
                    ld      c,(hl)                          ;[3de8] 4e
                    ld      d,b                             ;[3de9] 50
                    ld      d,d                             ;[3dea] 52
                    ld      c,c                             ;[3deb] 49
                    ld      c,(hl)                          ;[3dec] 4e
                    ld      d,h                             ;[3ded] 54
                    ld      b,c                             ;[3dee] 41
                    ld      b,d                             ;[3def] 42
                    ld      c,h                             ;[3df0] 4c
                    ld      b,l                             ;[3df1] 45
                    call    $5349                           ;[3df2] cd 49 53
                    ld      d,e                             ;[3df5] 53
                    ld      c,c                             ;[3df6] 49
                    ld      c,(hl)                          ;[3df7] 4e
                    ld      b,a                             ;[3df8] 47
                    jr      nz,$3e4a                        ;[3df9] 20 4f
                    ld      d,b                             ;[3dfb] 50
                    ld      b,l                             ;[3dfc] 45
                    ld      d,d                             ;[3dfd] 52
                    ld      b,c                             ;[3dfe] 41
                    ld      c,(hl)                          ;[3dff] 4e
                    ld      b,h                             ;[3e00] 44
                    jp      nz,$4441                        ;[3e01] c2 41 44
                    jr      nz,$3e4c                        ;[3e04] 20 46
                    ld      c,c                             ;[3e06] 49
                    ld      c,h                             ;[3e07] 4c
                    ld      b,l                             ;[3e08] 45
                    jr      nz,$3e4f                        ;[3e09] 20 44
                    ld      b,c                             ;[3e0b] 41
                    ld      d,h                             ;[3e0c] 54
                    ld      b,c                             ;[3e0d] 41
                    call    nz,$5349                        ;[3e0e] c4 49 53
                    ld      c,e                             ;[3e11] 4b
                    jr      nz,$3e57                        ;[3e12] 20 43
                    ld      c,a                             ;[3e14] 4f
                    ld      c,l                             ;[3e15] 4d
                    ld      c,l                             ;[3e16] 4d
                    ld      b,c                             ;[3e17] 41
                    ld      c,(hl)                          ;[3e18] 4e
                    ld      b,h                             ;[3e19] 44
                    ccf                                     ;[3e1a] 3f
                    ld      d,e                             ;[3e1b] 53
                    ld      e,c                             ;[3e1c] 59
                    ld      c,(hl)                          ;[3e1d] 4e
                    ld      d,h                             ;[3e1e] 54
                    ld      b,c                             ;[3e1f] 41
                    ld      e,b                             ;[3e20] 58
                    jr      nz,$3e68                        ;[3e21] 20 45
                    ld      d,d                             ;[3e23] 52
                    ld      d,d                             ;[3e24] 52
                    ld      c,a                             ;[3e25] 4f
                    ld      d,d                             ;[3e26] 52
                    dec     c                               ;[3e27] 0d
                    nop                                     ;[3e28] 00
                    ld      a,(hl)                          ;[3e29] 7e
                    or      a                               ;[3e2a] b7
                    jr      nz,$3e34                        ;[3e2b] 20 07
                    ld      a,$20                           ;[3e2d] 3e 20
                    ld      (hl),a                          ;[3e2f] 77
                    inc     hl                              ;[3e30] 23
                    xor     a                               ;[3e31] af
                    ld      (hl),a                          ;[3e32] 77
                    dec     hl                              ;[3e33] 2b
                    dec     hl                              ;[3e34] 2b
                    pop     af                              ;[3e35] f1
                    ret                                     ;[3e36] c9

                    ld      ($787d),a                       ;[3e37] 32 7d 78
                    ld      a,$10                           ;[3e3a] 3e 10
                    ld      ($7846),a                       ;[3e3c] 32 46 78
                    ret                                     ;[3e3f] c9

                    ld      a,(hl)                          ;[3e40] 7e
                    bit     6,a                             ;[3e41] cb 77
                    jr      z,$3e4a                         ;[3e43] 28 05
                    cp      $80                             ;[3e45] fe 80
                    jp      c,$3e5d                         ;[3e47] da 5d 3e
                    pop     bc                              ;[3e4a] c1
                    ld      de,$3e53                        ;[3e4b] 11 53 3e
                    push    de                              ;[3e4e] d5
                    push    bc                              ;[3e4f] c5
                    jp      $0502                           ;[3e50] c3 02 05
                    ret     c                               ;[3e53] d8
                    ld      hl,$3e1a                        ;[3e54] 21 1a 3e
                    call    SYS_STR_TO_DEVICE                           ;[3e57] cd a7 28
                    jp      $03e3                           ;[3e5a] c3 e3 03
                    cp      $62                             ;[3e5d] fe 62
                    jr      nz,$3e9a                        ;[3e5f] 20 39
                    and     $bf                             ;[3e61] e6 bf
                    ld      (de),a                          ;[3e63] 12
                    inc     hl                              ;[3e64] 23
                    inc     de                              ;[3e65] 13
                    dec     b                               ;[3e66] 05
                    jp      z,$04ee                         ;[3e67] ca ee 04
                    ld      a,(hl)                          ;[3e6a] 7e
                    bit     7,a                             ;[3e6b] cb 7f
                    jr      nz,$3e75                        ;[3e6d] 20 06
                    bit     6,a                             ;[3e6f] cb 77
                    jr      nz,$3e7f                        ;[3e71] 20 0c
                    jr      $3e7b                           ;[3e73] 18 06
                    and     $8f                             ;[3e75] e6 8f
                    or      $80                             ;[3e77] f6 80
                    jr      $3e92                           ;[3e79] 18 17
                    or      $c0                             ;[3e7b] f6 c0
                    jr      $3e92                           ;[3e7d] 18 13
                    cp      $62                             ;[3e7f] fe 62
                    jr      nz,$3e8c                        ;[3e81] 20 09
                    push    hl                              ;[3e83] e5
                    ld      hl,$7839                        ;[3e84] 21 39 78
                    bit     4,(hl)                          ;[3e87] cb 66
                    pop     hl                              ;[3e89] e1
                    jr      z,$3e9a                         ;[3e8a] 28 0e
                    bit     5,a                             ;[3e8c] cb 6f
                    jr      z,$3e92                         ;[3e8e] 28 02
                    and     $bf                             ;[3e90] e6 bf
                    ld      (de),a                          ;[3e92] 12
                    inc     hl                              ;[3e93] 23
                    inc     de                              ;[3e94] 13
                    djnz    $3e6a                           ;[3e95] 10 d3
                    jp      $04ee                           ;[3e97] c3 ee 04
                    bit     5,a                             ;[3e9a] cb 6f
                    jr      z,$3ea0                         ;[3e9c] 28 02
                    and     $bf                             ;[3e9e] e6 bf
                    ld      (de),a                          ;[3ea0] 12
                    inc     hl                              ;[3ea1] 23
                    inc     de                              ;[3ea2] 13
                    djnz    $3e40                           ;[3ea3] 10 9b
                    jp      $04ee                           ;[3ea5] c3 ee 04
                    ld      a,($7818)                       ;[3ea8] 3a 18 78
                    or      a                               ;[3eab] b7
                    jp      nz,$04b8                        ;[3eac] c2 b8 04
                    jp      $3e6a                           ;[3eaf] c3 6a 3e
                    ld      a,($7818)                       ;[3eb2] 3a 18 78
                    or      a                               ;[3eb5] b7
                    jr      nz,$3ebb                        ;[3eb6] 20 03
                    res     6,(hl)                          ;[3eb8] cb b6
                    ret                                     ;[3eba] c9

                    set     6,(hl)                          ;[3ebb] cb f6
                    ret                                     ;[3ebd] c9

                    ld      a,($7818)                       ;[3ebe] 3a 18 78
                    or      a                               ;[3ec1] b7
                    ld      a,$20                           ;[3ec2] 3e 20
                    jr      nz,$3ec8                        ;[3ec4] 20 02
                    or      $40                             ;[3ec6] f6 40
                    ld      (hl),a                          ;[3ec8] 77
                    ret                                     ;[3ec9] c9

                    push    af                              ;[3eca] f5
                    ld      a,($7818)                       ;[3ecb] 3a 18 78
                    or      a                               ;[3ece] b7
                    jr      z,$3ed8                         ;[3ecf] 28 07
                    pop     af                              ;[3ed1] f1
                    and     $3f                             ;[3ed2] e6 3f
                    push    hl                              ;[3ed4] e5
                    jp      $31ab                           ;[3ed5] c3 ab 31
                    pop     af                              ;[3ed8] f1
                    or      $40                             ;[3ed9] f6 40
                    push    hl                              ;[3edb] e5
                    ld      hl,$7838                        ;[3edc] 21 38 78
                    bit     1,(hl)                          ;[3edf] cb 4e
                    pop     hl                              ;[3ee1] e1
                    jr      z,$3ee6                         ;[3ee2] 28 02
                    and     $bf                             ;[3ee4] e6 bf
                    jp      $31b5                           ;[3ee6] c3 b5 31
                    ld      a,($7818)                       ;[3ee9] 3a 18 78
                    or      a                               ;[3eec] b7
                    ld      a,(hl)                          ;[3eed] 7e
                    jr      nz,$3ef3                        ;[3eee] 20 03
                    cp      $60                             ;[3ef0] fe 60
                    ret                                     ;[3ef2] c9

                    cp      $20                             ;[3ef3] fe 20
                    ret                                     ;[3ef5] c9

                    ld      a,($7818)                       ;[3ef6] 3a 18 78
                    or      a                               ;[3ef9] b7
                    ld      a,$20                           ;[3efa] 3e 20
                    jr      nz,$3f00                        ;[3efc] 20 02
                    or      $40                             ;[3efe] f6 40
                    ld      (de),a                          ;[3f00] 12
                    ret                                     ;[3f01] c9

                    ld      b,$20                           ;[3f02] 06 20
                    ld      a,($7818)                       ;[3f04] 3a 18 78
                    or      a                               ;[3f07] b7
                    ld      a,$20                           ;[3f08] 3e 20
                    ret     nz                              ;[3f0a] c0
                    or      $40                             ;[3f0b] f6 40
                    ret                                     ;[3f0d] c9

                    ld      de,$71e0                        ;[3f0e] 11 e0 71
                    ld      a,($7818)                       ;[3f11] 3a 18 78
                    or      a                               ;[3f14] b7
                    ret     nz                              ;[3f15] c0
                    pop     af                              ;[3f16] f1
                    ld      a,(hl)                          ;[3f17] 7e
                    or      a                               ;[3f18] b7
                    ret     z                               ;[3f19] c8
                    res     6,a                             ;[3f1a] cb b7
                    ld      (de),a                          ;[3f1c] 12
                    inc     de                              ;[3f1d] 13
                    inc     hl                              ;[3f1e] 23
                    jr      $3f17                           ;[3f1f] 18 f6
                    ld      a,($7818)                       ;[3f21] 3a 18 78
                    or      a                               ;[3f24] b7
                    ld      a,(hl)                          ;[3f25] 7e
                    jr      nz,$3f2f                        ;[3f26] 20 07
                    set     6,a                             ;[3f28] cb f7
                    ld      (de),a                          ;[3f2a] 12
                    inc     de                              ;[3f2b] 13
                    ld      a,$7a                           ;[3f2c] 3e 7a
                    ret                                     ;[3f2e] c9

                    ld      (de),a                          ;[3f2f] 12
                    ld      a,$3a                           ;[3f30] 3e 3a
                    ret                                     ;[3f32] c9

                    push    af                              ;[3f33] f5
                    ld      a,($7818)                       ;[3f34] 3a 18 78
                    or      a                               ;[3f37] b7
                    jr      nz,$3f3f                        ;[3f38] 20 05
                    pop     af                              ;[3f3a] f1
                    or      $40                             ;[3f3b] f6 40
                    ld      (de),a                          ;[3f3d] 12
                    ret                                     ;[3f3e] c9

                    pop     af                              ;[3f3f] f1
                    and     $3f                             ;[3f40] e6 3f
                    ld      (de),a                          ;[3f42] 12
                    ret                                     ;[3f43] c9

                    push    af                              ;[3f44] f5
                    ld      a,($7818)                       ;[3f45] 3a 18 78
                    or      a                               ;[3f48] b7
                    jr      nz,$3f54                        ;[3f49] 20 09
                    pop     af                              ;[3f4b] f1
                    bit     6,a                             ;[3f4c] cb 77
                    jp      nz,$3938                        ;[3f4e] c2 38 39
                    jp      $3931                           ;[3f51] c3 31 39
                    pop     af                              ;[3f54] f1
                    bit     6,a                             ;[3f55] cb 77
                    jp      z,$3938                         ;[3f57] ca 38 39
                    jp      $3931                           ;[3f5a] c3 31 39
                    jp      $3931                           ;[3f5d] c3 31 39
                    push    af                              ;[3f60] f5
                    ld      a,($7818)                       ;[3f61] 3a 18 78
                    or      a                               ;[3f64] b7
                    jr      nz,$3f6d                        ;[3f65] 20 06
                    pop     af                              ;[3f67] f1
                    and     $3f                             ;[3f68] e6 3f
                    jp      $3154                           ;[3f6a] c3 54 31
                    pop     af                              ;[3f6d] f1
                    and     $7f                             ;[3f6e] e6 7f
                    jp      $3154                           ;[3f70] c3 54 31
                    call    $3775                           ;[3f73] cd 75 37
                    ret     nc                              ;[3f76] d0
                    pop     hl                              ;[3f77] e1
                    jp      $3711                           ;[3f78] c3 11 37
                    ld      a,($7819)                       ;[3f7b] 3a 19 78
                    ld      b,a                             ;[3f7e] 47
                    ld      a,($7818)                       ;[3f7f] 3a 18 78
                    cp      b                               ;[3f82] b8
                    jp      z,$30e8                         ;[3f83] ca e8 30
                    ld      ($7819),a                       ;[3f86] 32 19 78
                    ld      hl,$7000                        ;[3f89] 21 00 70
                    ld      bc,$0200                        ;[3f8c] 01 00 02
                    ld      a,(hl)                          ;[3f8f] 7e
                    or      a                               ;[3f90] b7
                    jp      m,$3f97                         ;[3f91] fa 97 3f
                    xor     $40                             ;[3f94] ee 40
                    ld      (hl),a                          ;[3f96] 77
                    inc     hl                              ;[3f97] 23
                    dec     bc                              ;[3f98] 0b
                    ld      a,b                             ;[3f99] 78
                    or      c                               ;[3f9a] b1
                    jr      nz,$3f8f                        ;[3f9b] 20 f2
                    jp      $30e8                           ;[3f9d] c3 e8 30
                    ld      a,($68fd)                       ;[3fa0] 3a fd 68
                    bit     2,a                             ;[3fa3] cb 57
                    ld      a,$20                           ;[3fa5] 3e 20
                    jr      nz,$3fb1                        ;[3fa7] 20 08
                    or      $40                             ;[3fa9] f6 40
                    ld      ($7818),a                       ;[3fab] 32 18 78
                    ld      ($7819),a                       ;[3fae] 32 19 78
                    ld      ($783c),a                       ;[3fb1] 32 3c 78
                    jp      BAS_PROC_CLS                          ;[3fb4] c3 c9 01
                    nop                                     ;[3fb7] 00
                    nop                                     ;[3fb8] 00
                    nop                                     ;[3fb9] 00
                    nop                                     ;[3fba] 00
                    nop                                     ;[3fbb] 00
                    nop                                     ;[3fbc] 00
                    nop                                     ;[3fbd] 00
                    nop                                     ;[3fbe] 00
                    nop                                     ;[3fbf] 00
                    nop                                     ;[3fc0] 00
                    nop                                     ;[3fc1] 00
                    nop                                     ;[3fc2] 00
                    nop                                     ;[3fc3] 00
                    nop                                     ;[3fc4] 00
                    nop                                     ;[3fc5] 00
                    nop                                     ;[3fc6] 00
                    nop                                     ;[3fc7] 00
                    nop                                     ;[3fc8] 00
                    nop                                     ;[3fc9] 00
                    nop                                     ;[3fca] 00
                    nop                                     ;[3fcb] 00
                    nop                                     ;[3fcc] 00
                    nop                                     ;[3fcd] 00
                    nop                                     ;[3fce] 00
                    nop                                     ;[3fcf] 00
                    nop                                     ;[3fd0] 00
                    nop                                     ;[3fd1] 00
                    nop                                     ;[3fd2] 00
                    nop                                     ;[3fd3] 00
                    nop                                     ;[3fd4] 00
                    nop                                     ;[3fd5] 00
                    nop                                     ;[3fd6] 00
                    nop                                     ;[3fd7] 00
                    nop                                     ;[3fd8] 00
                    nop                                     ;[3fd9] 00
                    nop                                     ;[3fda] 00
                    nop                                     ;[3fdb] 00
                    nop                                     ;[3fdc] 00
                    nop                                     ;[3fdd] 00
                    nop                                     ;[3fde] 00
                    nop                                     ;[3fdf] 00
                    nop                                     ;[3fe0] 00
                    nop                                     ;[3fe1] 00
                    nop                                     ;[3fe2] 00
                    nop                                     ;[3fe3] 00
                    nop                                     ;[3fe4] 00
                    nop                                     ;[3fe5] 00
                    nop                                     ;[3fe6] 00
                    nop                                     ;[3fe7] 00
                    nop                                     ;[3fe8] 00
                    nop                                     ;[3fe9] 00
                    nop                                     ;[3fea] 00
                    nop                                     ;[3feb] 00
                    nop                                     ;[3fec] 00
                    nop                                     ;[3fed] 00
                    nop                                     ;[3fee] 00
                    nop                                     ;[3fef] 00
                    rst     $38                             ;[3ff0] ff
                    rst     $38                             ;[3ff1] ff
                    rst     $38                             ;[3ff2] ff
                    rst     $38                             ;[3ff3] ff
                    rst     $38                             ;[3ff4] ff
                    rst     $38                             ;[3ff5] ff
                    rst     $38                             ;[3ff6] ff
                    rst     $38                             ;[3ff7] ff
                    rst     $38                             ;[3ff8] ff
                    rst     $38                             ;[3ff9] ff
                    rst     $38                             ;[3ffa] ff
                    rst     $38                             ;[3ffb] ff
                    rst     $38                             ;[3ffc] ff
                    rst     $38                             ;[3ffd] ff
                    rst     $38                             ;[3ffe] ff
                    rst     $38                             ;[3fff] ff
